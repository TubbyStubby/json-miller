{"version":3,"file":"json-miller.min.js","sources":["../node_modules/ajv/dist/compile/codegen/code.js","../node_modules/ajv/dist/compile/codegen/scope.js","../node_modules/ajv/dist/compile/codegen/index.js","../node_modules/ajv/dist/compile/util.js","../node_modules/ajv/dist/compile/names.js","../node_modules/ajv/dist/compile/errors.js","../node_modules/ajv/dist/compile/rules.js","../node_modules/ajv/dist/compile/validate/applicability.js","../node_modules/ajv/dist/compile/validate/dataType.js","../node_modules/ajv/dist/vocabularies/code.js","../node_modules/ajv/dist/compile/validate/keyword.js","../node_modules/fast-deep-equal/index.js","../node_modules/json-schema-traverse/index.js","../node_modules/ajv/dist/compile/resolve.js","../node_modules/ajv/dist/compile/validate/index.js","../node_modules/ajv/dist/compile/validate/boolSchema.js","../node_modules/ajv/dist/compile/validate/defaults.js","../node_modules/ajv/dist/compile/validate/subschema.js","../node_modules/ajv/dist/runtime/validation_error.js","../node_modules/ajv/dist/compile/ref_error.js","../node_modules/ajv/dist/compile/index.js","../node_modules/fast-uri/lib/utils.js","../node_modules/fast-uri/index.js","../node_modules/fast-uri/lib/schemes.js","../node_modules/ajv/dist/core.js","../node_modules/ajv/dist/runtime/uri.js","../node_modules/ajv/dist/vocabularies/core/index.js","../node_modules/ajv/dist/vocabularies/core/id.js","../node_modules/ajv/dist/vocabularies/core/ref.js","../node_modules/ajv/dist/vocabularies/validation/limitLength.js","../node_modules/ajv/dist/runtime/ucs2length.js","../node_modules/ajv/dist/vocabularies/validation/required.js","../node_modules/ajv/dist/runtime/equal.js","../node_modules/ajv/dist/vocabularies/validation/uniqueItems.js","../node_modules/ajv/dist/vocabularies/validation/enum.js","../node_modules/ajv/dist/vocabularies/validation/index.js","../node_modules/ajv/dist/vocabularies/validation/limitNumber.js","../node_modules/ajv/dist/vocabularies/validation/multipleOf.js","../node_modules/ajv/dist/vocabularies/validation/pattern.js","../node_modules/ajv/dist/vocabularies/validation/limitProperties.js","../node_modules/ajv/dist/vocabularies/validation/limitItems.js","../node_modules/ajv/dist/vocabularies/validation/const.js","../node_modules/ajv/dist/vocabularies/applicator/additionalItems.js","../node_modules/ajv/dist/vocabularies/applicator/items.js","../node_modules/ajv/dist/vocabularies/applicator/contains.js","../node_modules/ajv/dist/vocabularies/applicator/dependencies.js","../node_modules/ajv/dist/vocabularies/applicator/additionalProperties.js","../node_modules/ajv/dist/vocabularies/applicator/index.js","../node_modules/ajv/dist/vocabularies/applicator/prefixItems.js","../node_modules/ajv/dist/vocabularies/applicator/items2020.js","../node_modules/ajv/dist/vocabularies/applicator/propertyNames.js","../node_modules/ajv/dist/vocabularies/applicator/properties.js","../node_modules/ajv/dist/vocabularies/applicator/patternProperties.js","../node_modules/ajv/dist/vocabularies/applicator/not.js","../node_modules/ajv/dist/vocabularies/applicator/anyOf.js","../node_modules/ajv/dist/vocabularies/applicator/oneOf.js","../node_modules/ajv/dist/vocabularies/applicator/allOf.js","../node_modules/ajv/dist/vocabularies/applicator/if.js","../node_modules/ajv/dist/vocabularies/applicator/thenElse.js","../node_modules/ajv/dist/vocabularies/format/format.js","../node_modules/ajv/dist/vocabularies/draft7.js","../node_modules/ajv/dist/vocabularies/format/index.js","../node_modules/ajv/dist/vocabularies/metadata.js","../node_modules/ajv/dist/vocabularies/discriminator/index.js","../node_modules/ajv/dist/vocabularies/discriminator/types.js","../node_modules/ajv/dist/ajv.js","../node_modules/ajv-formats/dist/index.js","../node_modules/ajv-formats/dist/formats.js","../node_modules/ajv-formats/dist/limit.js","../src/index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.regexpCode = exports.getEsmExportName = exports.getProperty = exports.safeStringify = exports.stringify = exports.strConcat = exports.addCodeArg = exports.str = exports._ = exports.nil = exports._Code = exports.Name = exports.IDENTIFIER = exports._CodeOrName = void 0;\n// eslint-disable-next-line @typescript-eslint/no-extraneous-class\nclass _CodeOrName {\n}\nexports._CodeOrName = _CodeOrName;\nexports.IDENTIFIER = /^[a-z$_][a-z$_0-9]*$/i;\nclass Name extends _CodeOrName {\n    constructor(s) {\n        super();\n        if (!exports.IDENTIFIER.test(s))\n            throw new Error(\"CodeGen: name must be a valid identifier\");\n        this.str = s;\n    }\n    toString() {\n        return this.str;\n    }\n    emptyStr() {\n        return false;\n    }\n    get names() {\n        return { [this.str]: 1 };\n    }\n}\nexports.Name = Name;\nclass _Code extends _CodeOrName {\n    constructor(code) {\n        super();\n        this._items = typeof code === \"string\" ? [code] : code;\n    }\n    toString() {\n        return this.str;\n    }\n    emptyStr() {\n        if (this._items.length > 1)\n            return false;\n        const item = this._items[0];\n        return item === \"\" || item === '\"\"';\n    }\n    get str() {\n        var _a;\n        return ((_a = this._str) !== null && _a !== void 0 ? _a : (this._str = this._items.reduce((s, c) => `${s}${c}`, \"\")));\n    }\n    get names() {\n        var _a;\n        return ((_a = this._names) !== null && _a !== void 0 ? _a : (this._names = this._items.reduce((names, c) => {\n            if (c instanceof Name)\n                names[c.str] = (names[c.str] || 0) + 1;\n            return names;\n        }, {})));\n    }\n}\nexports._Code = _Code;\nexports.nil = new _Code(\"\");\nfunction _(strs, ...args) {\n    const code = [strs[0]];\n    let i = 0;\n    while (i < args.length) {\n        addCodeArg(code, args[i]);\n        code.push(strs[++i]);\n    }\n    return new _Code(code);\n}\nexports._ = _;\nconst plus = new _Code(\"+\");\nfunction str(strs, ...args) {\n    const expr = [safeStringify(strs[0])];\n    let i = 0;\n    while (i < args.length) {\n        expr.push(plus);\n        addCodeArg(expr, args[i]);\n        expr.push(plus, safeStringify(strs[++i]));\n    }\n    optimize(expr);\n    return new _Code(expr);\n}\nexports.str = str;\nfunction addCodeArg(code, arg) {\n    if (arg instanceof _Code)\n        code.push(...arg._items);\n    else if (arg instanceof Name)\n        code.push(arg);\n    else\n        code.push(interpolate(arg));\n}\nexports.addCodeArg = addCodeArg;\nfunction optimize(expr) {\n    let i = 1;\n    while (i < expr.length - 1) {\n        if (expr[i] === plus) {\n            const res = mergeExprItems(expr[i - 1], expr[i + 1]);\n            if (res !== undefined) {\n                expr.splice(i - 1, 3, res);\n                continue;\n            }\n            expr[i++] = \"+\";\n        }\n        i++;\n    }\n}\nfunction mergeExprItems(a, b) {\n    if (b === '\"\"')\n        return a;\n    if (a === '\"\"')\n        return b;\n    if (typeof a == \"string\") {\n        if (b instanceof Name || a[a.length - 1] !== '\"')\n            return;\n        if (typeof b != \"string\")\n            return `${a.slice(0, -1)}${b}\"`;\n        if (b[0] === '\"')\n            return a.slice(0, -1) + b.slice(1);\n        return;\n    }\n    if (typeof b == \"string\" && b[0] === '\"' && !(a instanceof Name))\n        return `\"${a}${b.slice(1)}`;\n    return;\n}\nfunction strConcat(c1, c2) {\n    return c2.emptyStr() ? c1 : c1.emptyStr() ? c2 : str `${c1}${c2}`;\n}\nexports.strConcat = strConcat;\n// TODO do not allow arrays here\nfunction interpolate(x) {\n    return typeof x == \"number\" || typeof x == \"boolean\" || x === null\n        ? x\n        : safeStringify(Array.isArray(x) ? x.join(\",\") : x);\n}\nfunction stringify(x) {\n    return new _Code(safeStringify(x));\n}\nexports.stringify = stringify;\nfunction safeStringify(x) {\n    return JSON.stringify(x)\n        .replace(/\\u2028/g, \"\\\\u2028\")\n        .replace(/\\u2029/g, \"\\\\u2029\");\n}\nexports.safeStringify = safeStringify;\nfunction getProperty(key) {\n    return typeof key == \"string\" && exports.IDENTIFIER.test(key) ? new _Code(`.${key}`) : _ `[${key}]`;\n}\nexports.getProperty = getProperty;\n//Does best effort to format the name properly\nfunction getEsmExportName(key) {\n    if (typeof key == \"string\" && exports.IDENTIFIER.test(key)) {\n        return new _Code(`${key}`);\n    }\n    throw new Error(`CodeGen: invalid export name: ${key}, use explicit $id name mapping`);\n}\nexports.getEsmExportName = getEsmExportName;\nfunction regexpCode(rx) {\n    return new _Code(rx.toString());\n}\nexports.regexpCode = regexpCode;\n//# sourceMappingURL=code.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ValueScope = exports.ValueScopeName = exports.Scope = exports.varKinds = exports.UsedValueState = void 0;\nconst code_1 = require(\"./code\");\nclass ValueError extends Error {\n    constructor(name) {\n        super(`CodeGen: \"code\" for ${name} not defined`);\n        this.value = name.value;\n    }\n}\nvar UsedValueState;\n(function (UsedValueState) {\n    UsedValueState[UsedValueState[\"Started\"] = 0] = \"Started\";\n    UsedValueState[UsedValueState[\"Completed\"] = 1] = \"Completed\";\n})(UsedValueState || (exports.UsedValueState = UsedValueState = {}));\nexports.varKinds = {\n    const: new code_1.Name(\"const\"),\n    let: new code_1.Name(\"let\"),\n    var: new code_1.Name(\"var\"),\n};\nclass Scope {\n    constructor({ prefixes, parent } = {}) {\n        this._names = {};\n        this._prefixes = prefixes;\n        this._parent = parent;\n    }\n    toName(nameOrPrefix) {\n        return nameOrPrefix instanceof code_1.Name ? nameOrPrefix : this.name(nameOrPrefix);\n    }\n    name(prefix) {\n        return new code_1.Name(this._newName(prefix));\n    }\n    _newName(prefix) {\n        const ng = this._names[prefix] || this._nameGroup(prefix);\n        return `${prefix}${ng.index++}`;\n    }\n    _nameGroup(prefix) {\n        var _a, _b;\n        if (((_b = (_a = this._parent) === null || _a === void 0 ? void 0 : _a._prefixes) === null || _b === void 0 ? void 0 : _b.has(prefix)) || (this._prefixes && !this._prefixes.has(prefix))) {\n            throw new Error(`CodeGen: prefix \"${prefix}\" is not allowed in this scope`);\n        }\n        return (this._names[prefix] = { prefix, index: 0 });\n    }\n}\nexports.Scope = Scope;\nclass ValueScopeName extends code_1.Name {\n    constructor(prefix, nameStr) {\n        super(nameStr);\n        this.prefix = prefix;\n    }\n    setValue(value, { property, itemIndex }) {\n        this.value = value;\n        this.scopePath = (0, code_1._) `.${new code_1.Name(property)}[${itemIndex}]`;\n    }\n}\nexports.ValueScopeName = ValueScopeName;\nconst line = (0, code_1._) `\\n`;\nclass ValueScope extends Scope {\n    constructor(opts) {\n        super(opts);\n        this._values = {};\n        this._scope = opts.scope;\n        this.opts = { ...opts, _n: opts.lines ? line : code_1.nil };\n    }\n    get() {\n        return this._scope;\n    }\n    name(prefix) {\n        return new ValueScopeName(prefix, this._newName(prefix));\n    }\n    value(nameOrPrefix, value) {\n        var _a;\n        if (value.ref === undefined)\n            throw new Error(\"CodeGen: ref must be passed in value\");\n        const name = this.toName(nameOrPrefix);\n        const { prefix } = name;\n        const valueKey = (_a = value.key) !== null && _a !== void 0 ? _a : value.ref;\n        let vs = this._values[prefix];\n        if (vs) {\n            const _name = vs.get(valueKey);\n            if (_name)\n                return _name;\n        }\n        else {\n            vs = this._values[prefix] = new Map();\n        }\n        vs.set(valueKey, name);\n        const s = this._scope[prefix] || (this._scope[prefix] = []);\n        const itemIndex = s.length;\n        s[itemIndex] = value.ref;\n        name.setValue(value, { property: prefix, itemIndex });\n        return name;\n    }\n    getValue(prefix, keyOrRef) {\n        const vs = this._values[prefix];\n        if (!vs)\n            return;\n        return vs.get(keyOrRef);\n    }\n    scopeRefs(scopeName, values = this._values) {\n        return this._reduceValues(values, (name) => {\n            if (name.scopePath === undefined)\n                throw new Error(`CodeGen: name \"${name}\" has no value`);\n            return (0, code_1._) `${scopeName}${name.scopePath}`;\n        });\n    }\n    scopeCode(values = this._values, usedValues, getCode) {\n        return this._reduceValues(values, (name) => {\n            if (name.value === undefined)\n                throw new Error(`CodeGen: name \"${name}\" has no value`);\n            return name.value.code;\n        }, usedValues, getCode);\n    }\n    _reduceValues(values, valueCode, usedValues = {}, getCode) {\n        let code = code_1.nil;\n        for (const prefix in values) {\n            const vs = values[prefix];\n            if (!vs)\n                continue;\n            const nameSet = (usedValues[prefix] = usedValues[prefix] || new Map());\n            vs.forEach((name) => {\n                if (nameSet.has(name))\n                    return;\n                nameSet.set(name, UsedValueState.Started);\n                let c = valueCode(name);\n                if (c) {\n                    const def = this.opts.es5 ? exports.varKinds.var : exports.varKinds.const;\n                    code = (0, code_1._) `${code}${def} ${name} = ${c};${this.opts._n}`;\n                }\n                else if ((c = getCode === null || getCode === void 0 ? void 0 : getCode(name))) {\n                    code = (0, code_1._) `${code}${c}${this.opts._n}`;\n                }\n                else {\n                    throw new ValueError(name);\n                }\n                nameSet.set(name, UsedValueState.Completed);\n            });\n        }\n        return code;\n    }\n}\nexports.ValueScope = ValueScope;\n//# sourceMappingURL=scope.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.or = exports.and = exports.not = exports.CodeGen = exports.operators = exports.varKinds = exports.ValueScopeName = exports.ValueScope = exports.Scope = exports.Name = exports.regexpCode = exports.stringify = exports.getProperty = exports.nil = exports.strConcat = exports.str = exports._ = void 0;\nconst code_1 = require(\"./code\");\nconst scope_1 = require(\"./scope\");\nvar code_2 = require(\"./code\");\nObject.defineProperty(exports, \"_\", { enumerable: true, get: function () { return code_2._; } });\nObject.defineProperty(exports, \"str\", { enumerable: true, get: function () { return code_2.str; } });\nObject.defineProperty(exports, \"strConcat\", { enumerable: true, get: function () { return code_2.strConcat; } });\nObject.defineProperty(exports, \"nil\", { enumerable: true, get: function () { return code_2.nil; } });\nObject.defineProperty(exports, \"getProperty\", { enumerable: true, get: function () { return code_2.getProperty; } });\nObject.defineProperty(exports, \"stringify\", { enumerable: true, get: function () { return code_2.stringify; } });\nObject.defineProperty(exports, \"regexpCode\", { enumerable: true, get: function () { return code_2.regexpCode; } });\nObject.defineProperty(exports, \"Name\", { enumerable: true, get: function () { return code_2.Name; } });\nvar scope_2 = require(\"./scope\");\nObject.defineProperty(exports, \"Scope\", { enumerable: true, get: function () { return scope_2.Scope; } });\nObject.defineProperty(exports, \"ValueScope\", { enumerable: true, get: function () { return scope_2.ValueScope; } });\nObject.defineProperty(exports, \"ValueScopeName\", { enumerable: true, get: function () { return scope_2.ValueScopeName; } });\nObject.defineProperty(exports, \"varKinds\", { enumerable: true, get: function () { return scope_2.varKinds; } });\nexports.operators = {\n    GT: new code_1._Code(\">\"),\n    GTE: new code_1._Code(\">=\"),\n    LT: new code_1._Code(\"<\"),\n    LTE: new code_1._Code(\"<=\"),\n    EQ: new code_1._Code(\"===\"),\n    NEQ: new code_1._Code(\"!==\"),\n    NOT: new code_1._Code(\"!\"),\n    OR: new code_1._Code(\"||\"),\n    AND: new code_1._Code(\"&&\"),\n    ADD: new code_1._Code(\"+\"),\n};\nclass Node {\n    optimizeNodes() {\n        return this;\n    }\n    optimizeNames(_names, _constants) {\n        return this;\n    }\n}\nclass Def extends Node {\n    constructor(varKind, name, rhs) {\n        super();\n        this.varKind = varKind;\n        this.name = name;\n        this.rhs = rhs;\n    }\n    render({ es5, _n }) {\n        const varKind = es5 ? scope_1.varKinds.var : this.varKind;\n        const rhs = this.rhs === undefined ? \"\" : ` = ${this.rhs}`;\n        return `${varKind} ${this.name}${rhs};` + _n;\n    }\n    optimizeNames(names, constants) {\n        if (!names[this.name.str])\n            return;\n        if (this.rhs)\n            this.rhs = optimizeExpr(this.rhs, names, constants);\n        return this;\n    }\n    get names() {\n        return this.rhs instanceof code_1._CodeOrName ? this.rhs.names : {};\n    }\n}\nclass Assign extends Node {\n    constructor(lhs, rhs, sideEffects) {\n        super();\n        this.lhs = lhs;\n        this.rhs = rhs;\n        this.sideEffects = sideEffects;\n    }\n    render({ _n }) {\n        return `${this.lhs} = ${this.rhs};` + _n;\n    }\n    optimizeNames(names, constants) {\n        if (this.lhs instanceof code_1.Name && !names[this.lhs.str] && !this.sideEffects)\n            return;\n        this.rhs = optimizeExpr(this.rhs, names, constants);\n        return this;\n    }\n    get names() {\n        const names = this.lhs instanceof code_1.Name ? {} : { ...this.lhs.names };\n        return addExprNames(names, this.rhs);\n    }\n}\nclass AssignOp extends Assign {\n    constructor(lhs, op, rhs, sideEffects) {\n        super(lhs, rhs, sideEffects);\n        this.op = op;\n    }\n    render({ _n }) {\n        return `${this.lhs} ${this.op}= ${this.rhs};` + _n;\n    }\n}\nclass Label extends Node {\n    constructor(label) {\n        super();\n        this.label = label;\n        this.names = {};\n    }\n    render({ _n }) {\n        return `${this.label}:` + _n;\n    }\n}\nclass Break extends Node {\n    constructor(label) {\n        super();\n        this.label = label;\n        this.names = {};\n    }\n    render({ _n }) {\n        const label = this.label ? ` ${this.label}` : \"\";\n        return `break${label};` + _n;\n    }\n}\nclass Throw extends Node {\n    constructor(error) {\n        super();\n        this.error = error;\n    }\n    render({ _n }) {\n        return `throw ${this.error};` + _n;\n    }\n    get names() {\n        return this.error.names;\n    }\n}\nclass AnyCode extends Node {\n    constructor(code) {\n        super();\n        this.code = code;\n    }\n    render({ _n }) {\n        return `${this.code};` + _n;\n    }\n    optimizeNodes() {\n        return `${this.code}` ? this : undefined;\n    }\n    optimizeNames(names, constants) {\n        this.code = optimizeExpr(this.code, names, constants);\n        return this;\n    }\n    get names() {\n        return this.code instanceof code_1._CodeOrName ? this.code.names : {};\n    }\n}\nclass ParentNode extends Node {\n    constructor(nodes = []) {\n        super();\n        this.nodes = nodes;\n    }\n    render(opts) {\n        return this.nodes.reduce((code, n) => code + n.render(opts), \"\");\n    }\n    optimizeNodes() {\n        const { nodes } = this;\n        let i = nodes.length;\n        while (i--) {\n            const n = nodes[i].optimizeNodes();\n            if (Array.isArray(n))\n                nodes.splice(i, 1, ...n);\n            else if (n)\n                nodes[i] = n;\n            else\n                nodes.splice(i, 1);\n        }\n        return nodes.length > 0 ? this : undefined;\n    }\n    optimizeNames(names, constants) {\n        const { nodes } = this;\n        let i = nodes.length;\n        while (i--) {\n            // iterating backwards improves 1-pass optimization\n            const n = nodes[i];\n            if (n.optimizeNames(names, constants))\n                continue;\n            subtractNames(names, n.names);\n            nodes.splice(i, 1);\n        }\n        return nodes.length > 0 ? this : undefined;\n    }\n    get names() {\n        return this.nodes.reduce((names, n) => addNames(names, n.names), {});\n    }\n}\nclass BlockNode extends ParentNode {\n    render(opts) {\n        return \"{\" + opts._n + super.render(opts) + \"}\" + opts._n;\n    }\n}\nclass Root extends ParentNode {\n}\nclass Else extends BlockNode {\n}\nElse.kind = \"else\";\nclass If extends BlockNode {\n    constructor(condition, nodes) {\n        super(nodes);\n        this.condition = condition;\n    }\n    render(opts) {\n        let code = `if(${this.condition})` + super.render(opts);\n        if (this.else)\n            code += \"else \" + this.else.render(opts);\n        return code;\n    }\n    optimizeNodes() {\n        super.optimizeNodes();\n        const cond = this.condition;\n        if (cond === true)\n            return this.nodes; // else is ignored here\n        let e = this.else;\n        if (e) {\n            const ns = e.optimizeNodes();\n            e = this.else = Array.isArray(ns) ? new Else(ns) : ns;\n        }\n        if (e) {\n            if (cond === false)\n                return e instanceof If ? e : e.nodes;\n            if (this.nodes.length)\n                return this;\n            return new If(not(cond), e instanceof If ? [e] : e.nodes);\n        }\n        if (cond === false || !this.nodes.length)\n            return undefined;\n        return this;\n    }\n    optimizeNames(names, constants) {\n        var _a;\n        this.else = (_a = this.else) === null || _a === void 0 ? void 0 : _a.optimizeNames(names, constants);\n        if (!(super.optimizeNames(names, constants) || this.else))\n            return;\n        this.condition = optimizeExpr(this.condition, names, constants);\n        return this;\n    }\n    get names() {\n        const names = super.names;\n        addExprNames(names, this.condition);\n        if (this.else)\n            addNames(names, this.else.names);\n        return names;\n    }\n}\nIf.kind = \"if\";\nclass For extends BlockNode {\n}\nFor.kind = \"for\";\nclass ForLoop extends For {\n    constructor(iteration) {\n        super();\n        this.iteration = iteration;\n    }\n    render(opts) {\n        return `for(${this.iteration})` + super.render(opts);\n    }\n    optimizeNames(names, constants) {\n        if (!super.optimizeNames(names, constants))\n            return;\n        this.iteration = optimizeExpr(this.iteration, names, constants);\n        return this;\n    }\n    get names() {\n        return addNames(super.names, this.iteration.names);\n    }\n}\nclass ForRange extends For {\n    constructor(varKind, name, from, to) {\n        super();\n        this.varKind = varKind;\n        this.name = name;\n        this.from = from;\n        this.to = to;\n    }\n    render(opts) {\n        const varKind = opts.es5 ? scope_1.varKinds.var : this.varKind;\n        const { name, from, to } = this;\n        return `for(${varKind} ${name}=${from}; ${name}<${to}; ${name}++)` + super.render(opts);\n    }\n    get names() {\n        const names = addExprNames(super.names, this.from);\n        return addExprNames(names, this.to);\n    }\n}\nclass ForIter extends For {\n    constructor(loop, varKind, name, iterable) {\n        super();\n        this.loop = loop;\n        this.varKind = varKind;\n        this.name = name;\n        this.iterable = iterable;\n    }\n    render(opts) {\n        return `for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})` + super.render(opts);\n    }\n    optimizeNames(names, constants) {\n        if (!super.optimizeNames(names, constants))\n            return;\n        this.iterable = optimizeExpr(this.iterable, names, constants);\n        return this;\n    }\n    get names() {\n        return addNames(super.names, this.iterable.names);\n    }\n}\nclass Func extends BlockNode {\n    constructor(name, args, async) {\n        super();\n        this.name = name;\n        this.args = args;\n        this.async = async;\n    }\n    render(opts) {\n        const _async = this.async ? \"async \" : \"\";\n        return `${_async}function ${this.name}(${this.args})` + super.render(opts);\n    }\n}\nFunc.kind = \"func\";\nclass Return extends ParentNode {\n    render(opts) {\n        return \"return \" + super.render(opts);\n    }\n}\nReturn.kind = \"return\";\nclass Try extends BlockNode {\n    render(opts) {\n        let code = \"try\" + super.render(opts);\n        if (this.catch)\n            code += this.catch.render(opts);\n        if (this.finally)\n            code += this.finally.render(opts);\n        return code;\n    }\n    optimizeNodes() {\n        var _a, _b;\n        super.optimizeNodes();\n        (_a = this.catch) === null || _a === void 0 ? void 0 : _a.optimizeNodes();\n        (_b = this.finally) === null || _b === void 0 ? void 0 : _b.optimizeNodes();\n        return this;\n    }\n    optimizeNames(names, constants) {\n        var _a, _b;\n        super.optimizeNames(names, constants);\n        (_a = this.catch) === null || _a === void 0 ? void 0 : _a.optimizeNames(names, constants);\n        (_b = this.finally) === null || _b === void 0 ? void 0 : _b.optimizeNames(names, constants);\n        return this;\n    }\n    get names() {\n        const names = super.names;\n        if (this.catch)\n            addNames(names, this.catch.names);\n        if (this.finally)\n            addNames(names, this.finally.names);\n        return names;\n    }\n}\nclass Catch extends BlockNode {\n    constructor(error) {\n        super();\n        this.error = error;\n    }\n    render(opts) {\n        return `catch(${this.error})` + super.render(opts);\n    }\n}\nCatch.kind = \"catch\";\nclass Finally extends BlockNode {\n    render(opts) {\n        return \"finally\" + super.render(opts);\n    }\n}\nFinally.kind = \"finally\";\nclass CodeGen {\n    constructor(extScope, opts = {}) {\n        this._values = {};\n        this._blockStarts = [];\n        this._constants = {};\n        this.opts = { ...opts, _n: opts.lines ? \"\\n\" : \"\" };\n        this._extScope = extScope;\n        this._scope = new scope_1.Scope({ parent: extScope });\n        this._nodes = [new Root()];\n    }\n    toString() {\n        return this._root.render(this.opts);\n    }\n    // returns unique name in the internal scope\n    name(prefix) {\n        return this._scope.name(prefix);\n    }\n    // reserves unique name in the external scope\n    scopeName(prefix) {\n        return this._extScope.name(prefix);\n    }\n    // reserves unique name in the external scope and assigns value to it\n    scopeValue(prefixOrName, value) {\n        const name = this._extScope.value(prefixOrName, value);\n        const vs = this._values[name.prefix] || (this._values[name.prefix] = new Set());\n        vs.add(name);\n        return name;\n    }\n    getScopeValue(prefix, keyOrRef) {\n        return this._extScope.getValue(prefix, keyOrRef);\n    }\n    // return code that assigns values in the external scope to the names that are used internally\n    // (same names that were returned by gen.scopeName or gen.scopeValue)\n    scopeRefs(scopeName) {\n        return this._extScope.scopeRefs(scopeName, this._values);\n    }\n    scopeCode() {\n        return this._extScope.scopeCode(this._values);\n    }\n    _def(varKind, nameOrPrefix, rhs, constant) {\n        const name = this._scope.toName(nameOrPrefix);\n        if (rhs !== undefined && constant)\n            this._constants[name.str] = rhs;\n        this._leafNode(new Def(varKind, name, rhs));\n        return name;\n    }\n    // `const` declaration (`var` in es5 mode)\n    const(nameOrPrefix, rhs, _constant) {\n        return this._def(scope_1.varKinds.const, nameOrPrefix, rhs, _constant);\n    }\n    // `let` declaration with optional assignment (`var` in es5 mode)\n    let(nameOrPrefix, rhs, _constant) {\n        return this._def(scope_1.varKinds.let, nameOrPrefix, rhs, _constant);\n    }\n    // `var` declaration with optional assignment\n    var(nameOrPrefix, rhs, _constant) {\n        return this._def(scope_1.varKinds.var, nameOrPrefix, rhs, _constant);\n    }\n    // assignment code\n    assign(lhs, rhs, sideEffects) {\n        return this._leafNode(new Assign(lhs, rhs, sideEffects));\n    }\n    // `+=` code\n    add(lhs, rhs) {\n        return this._leafNode(new AssignOp(lhs, exports.operators.ADD, rhs));\n    }\n    // appends passed SafeExpr to code or executes Block\n    code(c) {\n        if (typeof c == \"function\")\n            c();\n        else if (c !== code_1.nil)\n            this._leafNode(new AnyCode(c));\n        return this;\n    }\n    // returns code for object literal for the passed argument list of key-value pairs\n    object(...keyValues) {\n        const code = [\"{\"];\n        for (const [key, value] of keyValues) {\n            if (code.length > 1)\n                code.push(\",\");\n            code.push(key);\n            if (key !== value || this.opts.es5) {\n                code.push(\":\");\n                (0, code_1.addCodeArg)(code, value);\n            }\n        }\n        code.push(\"}\");\n        return new code_1._Code(code);\n    }\n    // `if` clause (or statement if `thenBody` and, optionally, `elseBody` are passed)\n    if(condition, thenBody, elseBody) {\n        this._blockNode(new If(condition));\n        if (thenBody && elseBody) {\n            this.code(thenBody).else().code(elseBody).endIf();\n        }\n        else if (thenBody) {\n            this.code(thenBody).endIf();\n        }\n        else if (elseBody) {\n            throw new Error('CodeGen: \"else\" body without \"then\" body');\n        }\n        return this;\n    }\n    // `else if` clause - invalid without `if` or after `else` clauses\n    elseIf(condition) {\n        return this._elseNode(new If(condition));\n    }\n    // `else` clause - only valid after `if` or `else if` clauses\n    else() {\n        return this._elseNode(new Else());\n    }\n    // end `if` statement (needed if gen.if was used only with condition)\n    endIf() {\n        return this._endBlockNode(If, Else);\n    }\n    _for(node, forBody) {\n        this._blockNode(node);\n        if (forBody)\n            this.code(forBody).endFor();\n        return this;\n    }\n    // a generic `for` clause (or statement if `forBody` is passed)\n    for(iteration, forBody) {\n        return this._for(new ForLoop(iteration), forBody);\n    }\n    // `for` statement for a range of values\n    forRange(nameOrPrefix, from, to, forBody, varKind = this.opts.es5 ? scope_1.varKinds.var : scope_1.varKinds.let) {\n        const name = this._scope.toName(nameOrPrefix);\n        return this._for(new ForRange(varKind, name, from, to), () => forBody(name));\n    }\n    // `for-of` statement (in es5 mode replace with a normal for loop)\n    forOf(nameOrPrefix, iterable, forBody, varKind = scope_1.varKinds.const) {\n        const name = this._scope.toName(nameOrPrefix);\n        if (this.opts.es5) {\n            const arr = iterable instanceof code_1.Name ? iterable : this.var(\"_arr\", iterable);\n            return this.forRange(\"_i\", 0, (0, code_1._) `${arr}.length`, (i) => {\n                this.var(name, (0, code_1._) `${arr}[${i}]`);\n                forBody(name);\n            });\n        }\n        return this._for(new ForIter(\"of\", varKind, name, iterable), () => forBody(name));\n    }\n    // `for-in` statement.\n    // With option `ownProperties` replaced with a `for-of` loop for object keys\n    forIn(nameOrPrefix, obj, forBody, varKind = this.opts.es5 ? scope_1.varKinds.var : scope_1.varKinds.const) {\n        if (this.opts.ownProperties) {\n            return this.forOf(nameOrPrefix, (0, code_1._) `Object.keys(${obj})`, forBody);\n        }\n        const name = this._scope.toName(nameOrPrefix);\n        return this._for(new ForIter(\"in\", varKind, name, obj), () => forBody(name));\n    }\n    // end `for` loop\n    endFor() {\n        return this._endBlockNode(For);\n    }\n    // `label` statement\n    label(label) {\n        return this._leafNode(new Label(label));\n    }\n    // `break` statement\n    break(label) {\n        return this._leafNode(new Break(label));\n    }\n    // `return` statement\n    return(value) {\n        const node = new Return();\n        this._blockNode(node);\n        this.code(value);\n        if (node.nodes.length !== 1)\n            throw new Error('CodeGen: \"return\" should have one node');\n        return this._endBlockNode(Return);\n    }\n    // `try` statement\n    try(tryBody, catchCode, finallyCode) {\n        if (!catchCode && !finallyCode)\n            throw new Error('CodeGen: \"try\" without \"catch\" and \"finally\"');\n        const node = new Try();\n        this._blockNode(node);\n        this.code(tryBody);\n        if (catchCode) {\n            const error = this.name(\"e\");\n            this._currNode = node.catch = new Catch(error);\n            catchCode(error);\n        }\n        if (finallyCode) {\n            this._currNode = node.finally = new Finally();\n            this.code(finallyCode);\n        }\n        return this._endBlockNode(Catch, Finally);\n    }\n    // `throw` statement\n    throw(error) {\n        return this._leafNode(new Throw(error));\n    }\n    // start self-balancing block\n    block(body, nodeCount) {\n        this._blockStarts.push(this._nodes.length);\n        if (body)\n            this.code(body).endBlock(nodeCount);\n        return this;\n    }\n    // end the current self-balancing block\n    endBlock(nodeCount) {\n        const len = this._blockStarts.pop();\n        if (len === undefined)\n            throw new Error(\"CodeGen: not in self-balancing block\");\n        const toClose = this._nodes.length - len;\n        if (toClose < 0 || (nodeCount !== undefined && toClose !== nodeCount)) {\n            throw new Error(`CodeGen: wrong number of nodes: ${toClose} vs ${nodeCount} expected`);\n        }\n        this._nodes.length = len;\n        return this;\n    }\n    // `function` heading (or definition if funcBody is passed)\n    func(name, args = code_1.nil, async, funcBody) {\n        this._blockNode(new Func(name, args, async));\n        if (funcBody)\n            this.code(funcBody).endFunc();\n        return this;\n    }\n    // end function definition\n    endFunc() {\n        return this._endBlockNode(Func);\n    }\n    optimize(n = 1) {\n        while (n-- > 0) {\n            this._root.optimizeNodes();\n            this._root.optimizeNames(this._root.names, this._constants);\n        }\n    }\n    _leafNode(node) {\n        this._currNode.nodes.push(node);\n        return this;\n    }\n    _blockNode(node) {\n        this._currNode.nodes.push(node);\n        this._nodes.push(node);\n    }\n    _endBlockNode(N1, N2) {\n        const n = this._currNode;\n        if (n instanceof N1 || (N2 && n instanceof N2)) {\n            this._nodes.pop();\n            return this;\n        }\n        throw new Error(`CodeGen: not in block \"${N2 ? `${N1.kind}/${N2.kind}` : N1.kind}\"`);\n    }\n    _elseNode(node) {\n        const n = this._currNode;\n        if (!(n instanceof If)) {\n            throw new Error('CodeGen: \"else\" without \"if\"');\n        }\n        this._currNode = n.else = node;\n        return this;\n    }\n    get _root() {\n        return this._nodes[0];\n    }\n    get _currNode() {\n        const ns = this._nodes;\n        return ns[ns.length - 1];\n    }\n    set _currNode(node) {\n        const ns = this._nodes;\n        ns[ns.length - 1] = node;\n    }\n}\nexports.CodeGen = CodeGen;\nfunction addNames(names, from) {\n    for (const n in from)\n        names[n] = (names[n] || 0) + (from[n] || 0);\n    return names;\n}\nfunction addExprNames(names, from) {\n    return from instanceof code_1._CodeOrName ? addNames(names, from.names) : names;\n}\nfunction optimizeExpr(expr, names, constants) {\n    if (expr instanceof code_1.Name)\n        return replaceName(expr);\n    if (!canOptimize(expr))\n        return expr;\n    return new code_1._Code(expr._items.reduce((items, c) => {\n        if (c instanceof code_1.Name)\n            c = replaceName(c);\n        if (c instanceof code_1._Code)\n            items.push(...c._items);\n        else\n            items.push(c);\n        return items;\n    }, []));\n    function replaceName(n) {\n        const c = constants[n.str];\n        if (c === undefined || names[n.str] !== 1)\n            return n;\n        delete names[n.str];\n        return c;\n    }\n    function canOptimize(e) {\n        return (e instanceof code_1._Code &&\n            e._items.some((c) => c instanceof code_1.Name && names[c.str] === 1 && constants[c.str] !== undefined));\n    }\n}\nfunction subtractNames(names, from) {\n    for (const n in from)\n        names[n] = (names[n] || 0) - (from[n] || 0);\n}\nfunction not(x) {\n    return typeof x == \"boolean\" || typeof x == \"number\" || x === null ? !x : (0, code_1._) `!${par(x)}`;\n}\nexports.not = not;\nconst andCode = mappend(exports.operators.AND);\n// boolean AND (&&) expression with the passed arguments\nfunction and(...args) {\n    return args.reduce(andCode);\n}\nexports.and = and;\nconst orCode = mappend(exports.operators.OR);\n// boolean OR (||) expression with the passed arguments\nfunction or(...args) {\n    return args.reduce(orCode);\n}\nexports.or = or;\nfunction mappend(op) {\n    return (x, y) => (x === code_1.nil ? y : y === code_1.nil ? x : (0, code_1._) `${par(x)} ${op} ${par(y)}`);\n}\nfunction par(x) {\n    return x instanceof code_1.Name ? x : (0, code_1._) `(${x})`;\n}\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.checkStrictMode = exports.getErrorPath = exports.Type = exports.useFunc = exports.setEvaluated = exports.evaluatedPropsToName = exports.mergeEvaluated = exports.eachItem = exports.unescapeJsonPointer = exports.escapeJsonPointer = exports.escapeFragment = exports.unescapeFragment = exports.schemaRefOrVal = exports.schemaHasRulesButRef = exports.schemaHasRules = exports.checkUnknownRules = exports.alwaysValidSchema = exports.toHash = void 0;\nconst codegen_1 = require(\"./codegen\");\nconst code_1 = require(\"./codegen/code\");\n// TODO refactor to use Set\nfunction toHash(arr) {\n    const hash = {};\n    for (const item of arr)\n        hash[item] = true;\n    return hash;\n}\nexports.toHash = toHash;\nfunction alwaysValidSchema(it, schema) {\n    if (typeof schema == \"boolean\")\n        return schema;\n    if (Object.keys(schema).length === 0)\n        return true;\n    checkUnknownRules(it, schema);\n    return !schemaHasRules(schema, it.self.RULES.all);\n}\nexports.alwaysValidSchema = alwaysValidSchema;\nfunction checkUnknownRules(it, schema = it.schema) {\n    const { opts, self } = it;\n    if (!opts.strictSchema)\n        return;\n    if (typeof schema === \"boolean\")\n        return;\n    const rules = self.RULES.keywords;\n    for (const key in schema) {\n        if (!rules[key])\n            checkStrictMode(it, `unknown keyword: \"${key}\"`);\n    }\n}\nexports.checkUnknownRules = checkUnknownRules;\nfunction schemaHasRules(schema, rules) {\n    if (typeof schema == \"boolean\")\n        return !schema;\n    for (const key in schema)\n        if (rules[key])\n            return true;\n    return false;\n}\nexports.schemaHasRules = schemaHasRules;\nfunction schemaHasRulesButRef(schema, RULES) {\n    if (typeof schema == \"boolean\")\n        return !schema;\n    for (const key in schema)\n        if (key !== \"$ref\" && RULES.all[key])\n            return true;\n    return false;\n}\nexports.schemaHasRulesButRef = schemaHasRulesButRef;\nfunction schemaRefOrVal({ topSchemaRef, schemaPath }, schema, keyword, $data) {\n    if (!$data) {\n        if (typeof schema == \"number\" || typeof schema == \"boolean\")\n            return schema;\n        if (typeof schema == \"string\")\n            return (0, codegen_1._) `${schema}`;\n    }\n    return (0, codegen_1._) `${topSchemaRef}${schemaPath}${(0, codegen_1.getProperty)(keyword)}`;\n}\nexports.schemaRefOrVal = schemaRefOrVal;\nfunction unescapeFragment(str) {\n    return unescapeJsonPointer(decodeURIComponent(str));\n}\nexports.unescapeFragment = unescapeFragment;\nfunction escapeFragment(str) {\n    return encodeURIComponent(escapeJsonPointer(str));\n}\nexports.escapeFragment = escapeFragment;\nfunction escapeJsonPointer(str) {\n    if (typeof str == \"number\")\n        return `${str}`;\n    return str.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\n}\nexports.escapeJsonPointer = escapeJsonPointer;\nfunction unescapeJsonPointer(str) {\n    return str.replace(/~1/g, \"/\").replace(/~0/g, \"~\");\n}\nexports.unescapeJsonPointer = unescapeJsonPointer;\nfunction eachItem(xs, f) {\n    if (Array.isArray(xs)) {\n        for (const x of xs)\n            f(x);\n    }\n    else {\n        f(xs);\n    }\n}\nexports.eachItem = eachItem;\nfunction makeMergeEvaluated({ mergeNames, mergeToName, mergeValues, resultToName, }) {\n    return (gen, from, to, toName) => {\n        const res = to === undefined\n            ? from\n            : to instanceof codegen_1.Name\n                ? (from instanceof codegen_1.Name ? mergeNames(gen, from, to) : mergeToName(gen, from, to), to)\n                : from instanceof codegen_1.Name\n                    ? (mergeToName(gen, to, from), from)\n                    : mergeValues(from, to);\n        return toName === codegen_1.Name && !(res instanceof codegen_1.Name) ? resultToName(gen, res) : res;\n    };\n}\nexports.mergeEvaluated = {\n    props: makeMergeEvaluated({\n        mergeNames: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true && ${from} !== undefined`, () => {\n            gen.if((0, codegen_1._) `${from} === true`, () => gen.assign(to, true), () => gen.assign(to, (0, codegen_1._) `${to} || {}`).code((0, codegen_1._) `Object.assign(${to}, ${from})`));\n        }),\n        mergeToName: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true`, () => {\n            if (from === true) {\n                gen.assign(to, true);\n            }\n            else {\n                gen.assign(to, (0, codegen_1._) `${to} || {}`);\n                setEvaluated(gen, to, from);\n            }\n        }),\n        mergeValues: (from, to) => (from === true ? true : { ...from, ...to }),\n        resultToName: evaluatedPropsToName,\n    }),\n    items: makeMergeEvaluated({\n        mergeNames: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true && ${from} !== undefined`, () => gen.assign(to, (0, codegen_1._) `${from} === true ? true : ${to} > ${from} ? ${to} : ${from}`)),\n        mergeToName: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true`, () => gen.assign(to, from === true ? true : (0, codegen_1._) `${to} > ${from} ? ${to} : ${from}`)),\n        mergeValues: (from, to) => (from === true ? true : Math.max(from, to)),\n        resultToName: (gen, items) => gen.var(\"items\", items),\n    }),\n};\nfunction evaluatedPropsToName(gen, ps) {\n    if (ps === true)\n        return gen.var(\"props\", true);\n    const props = gen.var(\"props\", (0, codegen_1._) `{}`);\n    if (ps !== undefined)\n        setEvaluated(gen, props, ps);\n    return props;\n}\nexports.evaluatedPropsToName = evaluatedPropsToName;\nfunction setEvaluated(gen, props, ps) {\n    Object.keys(ps).forEach((p) => gen.assign((0, codegen_1._) `${props}${(0, codegen_1.getProperty)(p)}`, true));\n}\nexports.setEvaluated = setEvaluated;\nconst snippets = {};\nfunction useFunc(gen, f) {\n    return gen.scopeValue(\"func\", {\n        ref: f,\n        code: snippets[f.code] || (snippets[f.code] = new code_1._Code(f.code)),\n    });\n}\nexports.useFunc = useFunc;\nvar Type;\n(function (Type) {\n    Type[Type[\"Num\"] = 0] = \"Num\";\n    Type[Type[\"Str\"] = 1] = \"Str\";\n})(Type || (exports.Type = Type = {}));\nfunction getErrorPath(dataProp, dataPropType, jsPropertySyntax) {\n    // let path\n    if (dataProp instanceof codegen_1.Name) {\n        const isNumber = dataPropType === Type.Num;\n        return jsPropertySyntax\n            ? isNumber\n                ? (0, codegen_1._) `\"[\" + ${dataProp} + \"]\"`\n                : (0, codegen_1._) `\"['\" + ${dataProp} + \"']\"`\n            : isNumber\n                ? (0, codegen_1._) `\"/\" + ${dataProp}`\n                : (0, codegen_1._) `\"/\" + ${dataProp}.replace(/~/g, \"~0\").replace(/\\\\//g, \"~1\")`; // TODO maybe use global escapePointer\n    }\n    return jsPropertySyntax ? (0, codegen_1.getProperty)(dataProp).toString() : \"/\" + escapeJsonPointer(dataProp);\n}\nexports.getErrorPath = getErrorPath;\nfunction checkStrictMode(it, msg, mode = it.opts.strictSchema) {\n    if (!mode)\n        return;\n    msg = `strict mode: ${msg}`;\n    if (mode === true)\n        throw new Error(msg);\n    it.self.logger.warn(msg);\n}\nexports.checkStrictMode = checkStrictMode;\n//# sourceMappingURL=util.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"./codegen\");\nconst names = {\n    // validation function arguments\n    data: new codegen_1.Name(\"data\"), // data passed to validation function\n    // args passed from referencing schema\n    valCxt: new codegen_1.Name(\"valCxt\"), // validation/data context - should not be used directly, it is destructured to the names below\n    instancePath: new codegen_1.Name(\"instancePath\"),\n    parentData: new codegen_1.Name(\"parentData\"),\n    parentDataProperty: new codegen_1.Name(\"parentDataProperty\"),\n    rootData: new codegen_1.Name(\"rootData\"), // root data - same as the data passed to the first/top validation function\n    dynamicAnchors: new codegen_1.Name(\"dynamicAnchors\"), // used to support recursiveRef and dynamicRef\n    // function scoped variables\n    vErrors: new codegen_1.Name(\"vErrors\"), // null or array of validation errors\n    errors: new codegen_1.Name(\"errors\"), // counter of validation errors\n    this: new codegen_1.Name(\"this\"),\n    // \"globals\"\n    self: new codegen_1.Name(\"self\"),\n    scope: new codegen_1.Name(\"scope\"),\n    // JTD serialize/parse name for JSON string and position\n    json: new codegen_1.Name(\"json\"),\n    jsonPos: new codegen_1.Name(\"jsonPos\"),\n    jsonLen: new codegen_1.Name(\"jsonLen\"),\n    jsonPart: new codegen_1.Name(\"jsonPart\"),\n};\nexports.default = names;\n//# sourceMappingURL=names.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.extendErrors = exports.resetErrorsCount = exports.reportExtraError = exports.reportError = exports.keyword$DataError = exports.keywordError = void 0;\nconst codegen_1 = require(\"./codegen\");\nconst util_1 = require(\"./util\");\nconst names_1 = require(\"./names\");\nexports.keywordError = {\n    message: ({ keyword }) => (0, codegen_1.str) `must pass \"${keyword}\" keyword validation`,\n};\nexports.keyword$DataError = {\n    message: ({ keyword, schemaType }) => schemaType\n        ? (0, codegen_1.str) `\"${keyword}\" keyword must be ${schemaType} ($data)`\n        : (0, codegen_1.str) `\"${keyword}\" keyword is invalid ($data)`,\n};\nfunction reportError(cxt, error = exports.keywordError, errorPaths, overrideAllErrors) {\n    const { it } = cxt;\n    const { gen, compositeRule, allErrors } = it;\n    const errObj = errorObjectCode(cxt, error, errorPaths);\n    if (overrideAllErrors !== null && overrideAllErrors !== void 0 ? overrideAllErrors : (compositeRule || allErrors)) {\n        addError(gen, errObj);\n    }\n    else {\n        returnErrors(it, (0, codegen_1._) `[${errObj}]`);\n    }\n}\nexports.reportError = reportError;\nfunction reportExtraError(cxt, error = exports.keywordError, errorPaths) {\n    const { it } = cxt;\n    const { gen, compositeRule, allErrors } = it;\n    const errObj = errorObjectCode(cxt, error, errorPaths);\n    addError(gen, errObj);\n    if (!(compositeRule || allErrors)) {\n        returnErrors(it, names_1.default.vErrors);\n    }\n}\nexports.reportExtraError = reportExtraError;\nfunction resetErrorsCount(gen, errsCount) {\n    gen.assign(names_1.default.errors, errsCount);\n    gen.if((0, codegen_1._) `${names_1.default.vErrors} !== null`, () => gen.if(errsCount, () => gen.assign((0, codegen_1._) `${names_1.default.vErrors}.length`, errsCount), () => gen.assign(names_1.default.vErrors, null)));\n}\nexports.resetErrorsCount = resetErrorsCount;\nfunction extendErrors({ gen, keyword, schemaValue, data, errsCount, it, }) {\n    /* istanbul ignore if */\n    if (errsCount === undefined)\n        throw new Error(\"ajv implementation error\");\n    const err = gen.name(\"err\");\n    gen.forRange(\"i\", errsCount, names_1.default.errors, (i) => {\n        gen.const(err, (0, codegen_1._) `${names_1.default.vErrors}[${i}]`);\n        gen.if((0, codegen_1._) `${err}.instancePath === undefined`, () => gen.assign((0, codegen_1._) `${err}.instancePath`, (0, codegen_1.strConcat)(names_1.default.instancePath, it.errorPath)));\n        gen.assign((0, codegen_1._) `${err}.schemaPath`, (0, codegen_1.str) `${it.errSchemaPath}/${keyword}`);\n        if (it.opts.verbose) {\n            gen.assign((0, codegen_1._) `${err}.schema`, schemaValue);\n            gen.assign((0, codegen_1._) `${err}.data`, data);\n        }\n    });\n}\nexports.extendErrors = extendErrors;\nfunction addError(gen, errObj) {\n    const err = gen.const(\"err\", errObj);\n    gen.if((0, codegen_1._) `${names_1.default.vErrors} === null`, () => gen.assign(names_1.default.vErrors, (0, codegen_1._) `[${err}]`), (0, codegen_1._) `${names_1.default.vErrors}.push(${err})`);\n    gen.code((0, codegen_1._) `${names_1.default.errors}++`);\n}\nfunction returnErrors(it, errs) {\n    const { gen, validateName, schemaEnv } = it;\n    if (schemaEnv.$async) {\n        gen.throw((0, codegen_1._) `new ${it.ValidationError}(${errs})`);\n    }\n    else {\n        gen.assign((0, codegen_1._) `${validateName}.errors`, errs);\n        gen.return(false);\n    }\n}\nconst E = {\n    keyword: new codegen_1.Name(\"keyword\"),\n    schemaPath: new codegen_1.Name(\"schemaPath\"), // also used in JTD errors\n    params: new codegen_1.Name(\"params\"),\n    propertyName: new codegen_1.Name(\"propertyName\"),\n    message: new codegen_1.Name(\"message\"),\n    schema: new codegen_1.Name(\"schema\"),\n    parentSchema: new codegen_1.Name(\"parentSchema\"),\n};\nfunction errorObjectCode(cxt, error, errorPaths) {\n    const { createErrors } = cxt.it;\n    if (createErrors === false)\n        return (0, codegen_1._) `{}`;\n    return errorObject(cxt, error, errorPaths);\n}\nfunction errorObject(cxt, error, errorPaths = {}) {\n    const { gen, it } = cxt;\n    const keyValues = [\n        errorInstancePath(it, errorPaths),\n        errorSchemaPath(cxt, errorPaths),\n    ];\n    extraErrorProps(cxt, error, keyValues);\n    return gen.object(...keyValues);\n}\nfunction errorInstancePath({ errorPath }, { instancePath }) {\n    const instPath = instancePath\n        ? (0, codegen_1.str) `${errorPath}${(0, util_1.getErrorPath)(instancePath, util_1.Type.Str)}`\n        : errorPath;\n    return [names_1.default.instancePath, (0, codegen_1.strConcat)(names_1.default.instancePath, instPath)];\n}\nfunction errorSchemaPath({ keyword, it: { errSchemaPath } }, { schemaPath, parentSchema }) {\n    let schPath = parentSchema ? errSchemaPath : (0, codegen_1.str) `${errSchemaPath}/${keyword}`;\n    if (schemaPath) {\n        schPath = (0, codegen_1.str) `${schPath}${(0, util_1.getErrorPath)(schemaPath, util_1.Type.Str)}`;\n    }\n    return [E.schemaPath, schPath];\n}\nfunction extraErrorProps(cxt, { params, message }, keyValues) {\n    const { keyword, data, schemaValue, it } = cxt;\n    const { opts, propertyName, topSchemaRef, schemaPath } = it;\n    keyValues.push([E.keyword, keyword], [E.params, typeof params == \"function\" ? params(cxt) : params || (0, codegen_1._) `{}`]);\n    if (opts.messages) {\n        keyValues.push([E.message, typeof message == \"function\" ? message(cxt) : message]);\n    }\n    if (opts.verbose) {\n        keyValues.push([E.schema, schemaValue], [E.parentSchema, (0, codegen_1._) `${topSchemaRef}${schemaPath}`], [names_1.default.data, data]);\n    }\n    if (propertyName)\n        keyValues.push([E.propertyName, propertyName]);\n}\n//# sourceMappingURL=errors.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getRules = exports.isJSONType = void 0;\nconst _jsonTypes = [\"string\", \"number\", \"integer\", \"boolean\", \"null\", \"object\", \"array\"];\nconst jsonTypes = new Set(_jsonTypes);\nfunction isJSONType(x) {\n    return typeof x == \"string\" && jsonTypes.has(x);\n}\nexports.isJSONType = isJSONType;\nfunction getRules() {\n    const groups = {\n        number: { type: \"number\", rules: [] },\n        string: { type: \"string\", rules: [] },\n        array: { type: \"array\", rules: [] },\n        object: { type: \"object\", rules: [] },\n    };\n    return {\n        types: { ...groups, integer: true, boolean: true, null: true },\n        rules: [{ rules: [] }, groups.number, groups.string, groups.array, groups.object],\n        post: { rules: [] },\n        all: {},\n        keywords: {},\n    };\n}\nexports.getRules = getRules;\n//# sourceMappingURL=rules.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.shouldUseRule = exports.shouldUseGroup = exports.schemaHasRulesForType = void 0;\nfunction schemaHasRulesForType({ schema, self }, type) {\n    const group = self.RULES.types[type];\n    return group && group !== true && shouldUseGroup(schema, group);\n}\nexports.schemaHasRulesForType = schemaHasRulesForType;\nfunction shouldUseGroup(schema, group) {\n    return group.rules.some((rule) => shouldUseRule(schema, rule));\n}\nexports.shouldUseGroup = shouldUseGroup;\nfunction shouldUseRule(schema, rule) {\n    var _a;\n    return (schema[rule.keyword] !== undefined ||\n        ((_a = rule.definition.implements) === null || _a === void 0 ? void 0 : _a.some((kwd) => schema[kwd] !== undefined)));\n}\nexports.shouldUseRule = shouldUseRule;\n//# sourceMappingURL=applicability.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.reportTypeError = exports.checkDataTypes = exports.checkDataType = exports.coerceAndCheckDataType = exports.getJSONTypes = exports.getSchemaTypes = exports.DataType = void 0;\nconst rules_1 = require(\"../rules\");\nconst applicability_1 = require(\"./applicability\");\nconst errors_1 = require(\"../errors\");\nconst codegen_1 = require(\"../codegen\");\nconst util_1 = require(\"../util\");\nvar DataType;\n(function (DataType) {\n    DataType[DataType[\"Correct\"] = 0] = \"Correct\";\n    DataType[DataType[\"Wrong\"] = 1] = \"Wrong\";\n})(DataType || (exports.DataType = DataType = {}));\nfunction getSchemaTypes(schema) {\n    const types = getJSONTypes(schema.type);\n    const hasNull = types.includes(\"null\");\n    if (hasNull) {\n        if (schema.nullable === false)\n            throw new Error(\"type: null contradicts nullable: false\");\n    }\n    else {\n        if (!types.length && schema.nullable !== undefined) {\n            throw new Error('\"nullable\" cannot be used without \"type\"');\n        }\n        if (schema.nullable === true)\n            types.push(\"null\");\n    }\n    return types;\n}\nexports.getSchemaTypes = getSchemaTypes;\n// eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\nfunction getJSONTypes(ts) {\n    const types = Array.isArray(ts) ? ts : ts ? [ts] : [];\n    if (types.every(rules_1.isJSONType))\n        return types;\n    throw new Error(\"type must be JSONType or JSONType[]: \" + types.join(\",\"));\n}\nexports.getJSONTypes = getJSONTypes;\nfunction coerceAndCheckDataType(it, types) {\n    const { gen, data, opts } = it;\n    const coerceTo = coerceToTypes(types, opts.coerceTypes);\n    const checkTypes = types.length > 0 &&\n        !(coerceTo.length === 0 && types.length === 1 && (0, applicability_1.schemaHasRulesForType)(it, types[0]));\n    if (checkTypes) {\n        const wrongType = checkDataTypes(types, data, opts.strictNumbers, DataType.Wrong);\n        gen.if(wrongType, () => {\n            if (coerceTo.length)\n                coerceData(it, types, coerceTo);\n            else\n                reportTypeError(it);\n        });\n    }\n    return checkTypes;\n}\nexports.coerceAndCheckDataType = coerceAndCheckDataType;\nconst COERCIBLE = new Set([\"string\", \"number\", \"integer\", \"boolean\", \"null\"]);\nfunction coerceToTypes(types, coerceTypes) {\n    return coerceTypes\n        ? types.filter((t) => COERCIBLE.has(t) || (coerceTypes === \"array\" && t === \"array\"))\n        : [];\n}\nfunction coerceData(it, types, coerceTo) {\n    const { gen, data, opts } = it;\n    const dataType = gen.let(\"dataType\", (0, codegen_1._) `typeof ${data}`);\n    const coerced = gen.let(\"coerced\", (0, codegen_1._) `undefined`);\n    if (opts.coerceTypes === \"array\") {\n        gen.if((0, codegen_1._) `${dataType} == 'object' && Array.isArray(${data}) && ${data}.length == 1`, () => gen\n            .assign(data, (0, codegen_1._) `${data}[0]`)\n            .assign(dataType, (0, codegen_1._) `typeof ${data}`)\n            .if(checkDataTypes(types, data, opts.strictNumbers), () => gen.assign(coerced, data)));\n    }\n    gen.if((0, codegen_1._) `${coerced} !== undefined`);\n    for (const t of coerceTo) {\n        if (COERCIBLE.has(t) || (t === \"array\" && opts.coerceTypes === \"array\")) {\n            coerceSpecificType(t);\n        }\n    }\n    gen.else();\n    reportTypeError(it);\n    gen.endIf();\n    gen.if((0, codegen_1._) `${coerced} !== undefined`, () => {\n        gen.assign(data, coerced);\n        assignParentData(it, coerced);\n    });\n    function coerceSpecificType(t) {\n        switch (t) {\n            case \"string\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} == \"number\" || ${dataType} == \"boolean\"`)\n                    .assign(coerced, (0, codegen_1._) `\"\" + ${data}`)\n                    .elseIf((0, codegen_1._) `${data} === null`)\n                    .assign(coerced, (0, codegen_1._) `\"\"`);\n                return;\n            case \"number\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} == \"boolean\" || ${data} === null\n              || (${dataType} == \"string\" && ${data} && ${data} == +${data})`)\n                    .assign(coerced, (0, codegen_1._) `+${data}`);\n                return;\n            case \"integer\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} === \"boolean\" || ${data} === null\n              || (${dataType} === \"string\" && ${data} && ${data} == +${data} && !(${data} % 1))`)\n                    .assign(coerced, (0, codegen_1._) `+${data}`);\n                return;\n            case \"boolean\":\n                gen\n                    .elseIf((0, codegen_1._) `${data} === \"false\" || ${data} === 0 || ${data} === null`)\n                    .assign(coerced, false)\n                    .elseIf((0, codegen_1._) `${data} === \"true\" || ${data} === 1`)\n                    .assign(coerced, true);\n                return;\n            case \"null\":\n                gen.elseIf((0, codegen_1._) `${data} === \"\" || ${data} === 0 || ${data} === false`);\n                gen.assign(coerced, null);\n                return;\n            case \"array\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} === \"string\" || ${dataType} === \"number\"\n              || ${dataType} === \"boolean\" || ${data} === null`)\n                    .assign(coerced, (0, codegen_1._) `[${data}]`);\n        }\n    }\n}\nfunction assignParentData({ gen, parentData, parentDataProperty }, expr) {\n    // TODO use gen.property\n    gen.if((0, codegen_1._) `${parentData} !== undefined`, () => gen.assign((0, codegen_1._) `${parentData}[${parentDataProperty}]`, expr));\n}\nfunction checkDataType(dataType, data, strictNums, correct = DataType.Correct) {\n    const EQ = correct === DataType.Correct ? codegen_1.operators.EQ : codegen_1.operators.NEQ;\n    let cond;\n    switch (dataType) {\n        case \"null\":\n            return (0, codegen_1._) `${data} ${EQ} null`;\n        case \"array\":\n            cond = (0, codegen_1._) `Array.isArray(${data})`;\n            break;\n        case \"object\":\n            cond = (0, codegen_1._) `${data} && typeof ${data} == \"object\" && !Array.isArray(${data})`;\n            break;\n        case \"integer\":\n            cond = numCond((0, codegen_1._) `!(${data} % 1) && !isNaN(${data})`);\n            break;\n        case \"number\":\n            cond = numCond();\n            break;\n        default:\n            return (0, codegen_1._) `typeof ${data} ${EQ} ${dataType}`;\n    }\n    return correct === DataType.Correct ? cond : (0, codegen_1.not)(cond);\n    function numCond(_cond = codegen_1.nil) {\n        return (0, codegen_1.and)((0, codegen_1._) `typeof ${data} == \"number\"`, _cond, strictNums ? (0, codegen_1._) `isFinite(${data})` : codegen_1.nil);\n    }\n}\nexports.checkDataType = checkDataType;\nfunction checkDataTypes(dataTypes, data, strictNums, correct) {\n    if (dataTypes.length === 1) {\n        return checkDataType(dataTypes[0], data, strictNums, correct);\n    }\n    let cond;\n    const types = (0, util_1.toHash)(dataTypes);\n    if (types.array && types.object) {\n        const notObj = (0, codegen_1._) `typeof ${data} != \"object\"`;\n        cond = types.null ? notObj : (0, codegen_1._) `!${data} || ${notObj}`;\n        delete types.null;\n        delete types.array;\n        delete types.object;\n    }\n    else {\n        cond = codegen_1.nil;\n    }\n    if (types.number)\n        delete types.integer;\n    for (const t in types)\n        cond = (0, codegen_1.and)(cond, checkDataType(t, data, strictNums, correct));\n    return cond;\n}\nexports.checkDataTypes = checkDataTypes;\nconst typeError = {\n    message: ({ schema }) => `must be ${schema}`,\n    params: ({ schema, schemaValue }) => typeof schema == \"string\" ? (0, codegen_1._) `{type: ${schema}}` : (0, codegen_1._) `{type: ${schemaValue}}`,\n};\nfunction reportTypeError(it) {\n    const cxt = getTypeErrorContext(it);\n    (0, errors_1.reportError)(cxt, typeError);\n}\nexports.reportTypeError = reportTypeError;\nfunction getTypeErrorContext(it) {\n    const { gen, data, schema } = it;\n    const schemaCode = (0, util_1.schemaRefOrVal)(it, schema, \"type\");\n    return {\n        gen,\n        keyword: \"type\",\n        data,\n        schema: schema.type,\n        schemaCode,\n        schemaValue: schemaCode,\n        parentSchema: schema,\n        params: {},\n        it,\n    };\n}\n//# sourceMappingURL=dataType.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateUnion = exports.validateArray = exports.usePattern = exports.callValidateCode = exports.schemaProperties = exports.allSchemaProperties = exports.noPropertyInData = exports.propertyInData = exports.isOwnProperty = exports.hasPropFunc = exports.reportMissingProp = exports.checkMissingProp = exports.checkReportMissingProp = void 0;\nconst codegen_1 = require(\"../compile/codegen\");\nconst util_1 = require(\"../compile/util\");\nconst names_1 = require(\"../compile/names\");\nconst util_2 = require(\"../compile/util\");\nfunction checkReportMissingProp(cxt, prop) {\n    const { gen, data, it } = cxt;\n    gen.if(noPropertyInData(gen, data, prop, it.opts.ownProperties), () => {\n        cxt.setParams({ missingProperty: (0, codegen_1._) `${prop}` }, true);\n        cxt.error();\n    });\n}\nexports.checkReportMissingProp = checkReportMissingProp;\nfunction checkMissingProp({ gen, data, it: { opts } }, properties, missing) {\n    return (0, codegen_1.or)(...properties.map((prop) => (0, codegen_1.and)(noPropertyInData(gen, data, prop, opts.ownProperties), (0, codegen_1._) `${missing} = ${prop}`)));\n}\nexports.checkMissingProp = checkMissingProp;\nfunction reportMissingProp(cxt, missing) {\n    cxt.setParams({ missingProperty: missing }, true);\n    cxt.error();\n}\nexports.reportMissingProp = reportMissingProp;\nfunction hasPropFunc(gen) {\n    return gen.scopeValue(\"func\", {\n        // eslint-disable-next-line @typescript-eslint/unbound-method\n        ref: Object.prototype.hasOwnProperty,\n        code: (0, codegen_1._) `Object.prototype.hasOwnProperty`,\n    });\n}\nexports.hasPropFunc = hasPropFunc;\nfunction isOwnProperty(gen, data, property) {\n    return (0, codegen_1._) `${hasPropFunc(gen)}.call(${data}, ${property})`;\n}\nexports.isOwnProperty = isOwnProperty;\nfunction propertyInData(gen, data, property, ownProperties) {\n    const cond = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(property)} !== undefined`;\n    return ownProperties ? (0, codegen_1._) `${cond} && ${isOwnProperty(gen, data, property)}` : cond;\n}\nexports.propertyInData = propertyInData;\nfunction noPropertyInData(gen, data, property, ownProperties) {\n    const cond = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(property)} === undefined`;\n    return ownProperties ? (0, codegen_1.or)(cond, (0, codegen_1.not)(isOwnProperty(gen, data, property))) : cond;\n}\nexports.noPropertyInData = noPropertyInData;\nfunction allSchemaProperties(schemaMap) {\n    return schemaMap ? Object.keys(schemaMap).filter((p) => p !== \"__proto__\") : [];\n}\nexports.allSchemaProperties = allSchemaProperties;\nfunction schemaProperties(it, schemaMap) {\n    return allSchemaProperties(schemaMap).filter((p) => !(0, util_1.alwaysValidSchema)(it, schemaMap[p]));\n}\nexports.schemaProperties = schemaProperties;\nfunction callValidateCode({ schemaCode, data, it: { gen, topSchemaRef, schemaPath, errorPath }, it }, func, context, passSchema) {\n    const dataAndSchema = passSchema ? (0, codegen_1._) `${schemaCode}, ${data}, ${topSchemaRef}${schemaPath}` : data;\n    const valCxt = [\n        [names_1.default.instancePath, (0, codegen_1.strConcat)(names_1.default.instancePath, errorPath)],\n        [names_1.default.parentData, it.parentData],\n        [names_1.default.parentDataProperty, it.parentDataProperty],\n        [names_1.default.rootData, names_1.default.rootData],\n    ];\n    if (it.opts.dynamicRef)\n        valCxt.push([names_1.default.dynamicAnchors, names_1.default.dynamicAnchors]);\n    const args = (0, codegen_1._) `${dataAndSchema}, ${gen.object(...valCxt)}`;\n    return context !== codegen_1.nil ? (0, codegen_1._) `${func}.call(${context}, ${args})` : (0, codegen_1._) `${func}(${args})`;\n}\nexports.callValidateCode = callValidateCode;\nconst newRegExp = (0, codegen_1._) `new RegExp`;\nfunction usePattern({ gen, it: { opts } }, pattern) {\n    const u = opts.unicodeRegExp ? \"u\" : \"\";\n    const { regExp } = opts.code;\n    const rx = regExp(pattern, u);\n    return gen.scopeValue(\"pattern\", {\n        key: rx.toString(),\n        ref: rx,\n        code: (0, codegen_1._) `${regExp.code === \"new RegExp\" ? newRegExp : (0, util_2.useFunc)(gen, regExp)}(${pattern}, ${u})`,\n    });\n}\nexports.usePattern = usePattern;\nfunction validateArray(cxt) {\n    const { gen, data, keyword, it } = cxt;\n    const valid = gen.name(\"valid\");\n    if (it.allErrors) {\n        const validArr = gen.let(\"valid\", true);\n        validateItems(() => gen.assign(validArr, false));\n        return validArr;\n    }\n    gen.var(valid, true);\n    validateItems(() => gen.break());\n    return valid;\n    function validateItems(notValid) {\n        const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n        gen.forRange(\"i\", 0, len, (i) => {\n            cxt.subschema({\n                keyword,\n                dataProp: i,\n                dataPropType: util_1.Type.Num,\n            }, valid);\n            gen.if((0, codegen_1.not)(valid), notValid);\n        });\n    }\n}\nexports.validateArray = validateArray;\nfunction validateUnion(cxt) {\n    const { gen, schema, keyword, it } = cxt;\n    /* istanbul ignore if */\n    if (!Array.isArray(schema))\n        throw new Error(\"ajv implementation error\");\n    const alwaysValid = schema.some((sch) => (0, util_1.alwaysValidSchema)(it, sch));\n    if (alwaysValid && !it.opts.unevaluated)\n        return;\n    const valid = gen.let(\"valid\", false);\n    const schValid = gen.name(\"_valid\");\n    gen.block(() => schema.forEach((_sch, i) => {\n        const schCxt = cxt.subschema({\n            keyword,\n            schemaProp: i,\n            compositeRule: true,\n        }, schValid);\n        gen.assign(valid, (0, codegen_1._) `${valid} || ${schValid}`);\n        const merged = cxt.mergeValidEvaluated(schCxt, schValid);\n        // can short-circuit if `unevaluatedProperties/Items` not supported (opts.unevaluated !== true)\n        // or if all properties and items were evaluated (it.props === true && it.items === true)\n        if (!merged)\n            gen.if((0, codegen_1.not)(valid));\n    }));\n    cxt.result(valid, () => cxt.reset(), () => cxt.error(true));\n}\nexports.validateUnion = validateUnion;\n//# sourceMappingURL=code.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateKeywordUsage = exports.validSchemaType = exports.funcKeywordCode = exports.macroKeywordCode = void 0;\nconst codegen_1 = require(\"../codegen\");\nconst names_1 = require(\"../names\");\nconst code_1 = require(\"../../vocabularies/code\");\nconst errors_1 = require(\"../errors\");\nfunction macroKeywordCode(cxt, def) {\n    const { gen, keyword, schema, parentSchema, it } = cxt;\n    const macroSchema = def.macro.call(it.self, schema, parentSchema, it);\n    const schemaRef = useKeyword(gen, keyword, macroSchema);\n    if (it.opts.validateSchema !== false)\n        it.self.validateSchema(macroSchema, true);\n    const valid = gen.name(\"valid\");\n    cxt.subschema({\n        schema: macroSchema,\n        schemaPath: codegen_1.nil,\n        errSchemaPath: `${it.errSchemaPath}/${keyword}`,\n        topSchemaRef: schemaRef,\n        compositeRule: true,\n    }, valid);\n    cxt.pass(valid, () => cxt.error(true));\n}\nexports.macroKeywordCode = macroKeywordCode;\nfunction funcKeywordCode(cxt, def) {\n    var _a;\n    const { gen, keyword, schema, parentSchema, $data, it } = cxt;\n    checkAsyncKeyword(it, def);\n    const validate = !$data && def.compile ? def.compile.call(it.self, schema, parentSchema, it) : def.validate;\n    const validateRef = useKeyword(gen, keyword, validate);\n    const valid = gen.let(\"valid\");\n    cxt.block$data(valid, validateKeyword);\n    cxt.ok((_a = def.valid) !== null && _a !== void 0 ? _a : valid);\n    function validateKeyword() {\n        if (def.errors === false) {\n            assignValid();\n            if (def.modifying)\n                modifyData(cxt);\n            reportErrs(() => cxt.error());\n        }\n        else {\n            const ruleErrs = def.async ? validateAsync() : validateSync();\n            if (def.modifying)\n                modifyData(cxt);\n            reportErrs(() => addErrs(cxt, ruleErrs));\n        }\n    }\n    function validateAsync() {\n        const ruleErrs = gen.let(\"ruleErrs\", null);\n        gen.try(() => assignValid((0, codegen_1._) `await `), (e) => gen.assign(valid, false).if((0, codegen_1._) `${e} instanceof ${it.ValidationError}`, () => gen.assign(ruleErrs, (0, codegen_1._) `${e}.errors`), () => gen.throw(e)));\n        return ruleErrs;\n    }\n    function validateSync() {\n        const validateErrs = (0, codegen_1._) `${validateRef}.errors`;\n        gen.assign(validateErrs, null);\n        assignValid(codegen_1.nil);\n        return validateErrs;\n    }\n    function assignValid(_await = def.async ? (0, codegen_1._) `await ` : codegen_1.nil) {\n        const passCxt = it.opts.passContext ? names_1.default.this : names_1.default.self;\n        const passSchema = !((\"compile\" in def && !$data) || def.schema === false);\n        gen.assign(valid, (0, codegen_1._) `${_await}${(0, code_1.callValidateCode)(cxt, validateRef, passCxt, passSchema)}`, def.modifying);\n    }\n    function reportErrs(errors) {\n        var _a;\n        gen.if((0, codegen_1.not)((_a = def.valid) !== null && _a !== void 0 ? _a : valid), errors);\n    }\n}\nexports.funcKeywordCode = funcKeywordCode;\nfunction modifyData(cxt) {\n    const { gen, data, it } = cxt;\n    gen.if(it.parentData, () => gen.assign(data, (0, codegen_1._) `${it.parentData}[${it.parentDataProperty}]`));\n}\nfunction addErrs(cxt, errs) {\n    const { gen } = cxt;\n    gen.if((0, codegen_1._) `Array.isArray(${errs})`, () => {\n        gen\n            .assign(names_1.default.vErrors, (0, codegen_1._) `${names_1.default.vErrors} === null ? ${errs} : ${names_1.default.vErrors}.concat(${errs})`)\n            .assign(names_1.default.errors, (0, codegen_1._) `${names_1.default.vErrors}.length`);\n        (0, errors_1.extendErrors)(cxt);\n    }, () => cxt.error());\n}\nfunction checkAsyncKeyword({ schemaEnv }, def) {\n    if (def.async && !schemaEnv.$async)\n        throw new Error(\"async keyword in sync schema\");\n}\nfunction useKeyword(gen, keyword, result) {\n    if (result === undefined)\n        throw new Error(`keyword \"${keyword}\" failed to compile`);\n    return gen.scopeValue(\"keyword\", typeof result == \"function\" ? { ref: result } : { ref: result, code: (0, codegen_1.stringify)(result) });\n}\nfunction validSchemaType(schema, schemaType, allowUndefined = false) {\n    // TODO add tests\n    return (!schemaType.length ||\n        schemaType.some((st) => st === \"array\"\n            ? Array.isArray(schema)\n            : st === \"object\"\n                ? schema && typeof schema == \"object\" && !Array.isArray(schema)\n                : typeof schema == st || (allowUndefined && typeof schema == \"undefined\")));\n}\nexports.validSchemaType = validSchemaType;\nfunction validateKeywordUsage({ schema, opts, self, errSchemaPath }, def, keyword) {\n    /* istanbul ignore if */\n    if (Array.isArray(def.keyword) ? !def.keyword.includes(keyword) : def.keyword !== keyword) {\n        throw new Error(\"ajv implementation error\");\n    }\n    const deps = def.dependencies;\n    if (deps === null || deps === void 0 ? void 0 : deps.some((kwd) => !Object.prototype.hasOwnProperty.call(schema, kwd))) {\n        throw new Error(`parent schema must have dependencies of ${keyword}: ${deps.join(\",\")}`);\n    }\n    if (def.validateSchema) {\n        const valid = def.validateSchema(schema[keyword]);\n        if (!valid) {\n            const msg = `keyword \"${keyword}\" value is invalid at path \"${errSchemaPath}\": ` +\n                self.errorsText(def.validateSchema.errors);\n            if (opts.validateSchema === \"log\")\n                self.logger.error(msg);\n            else\n                throw new Error(msg);\n        }\n    }\n}\nexports.validateKeywordUsage = validateKeywordUsage;\n//# sourceMappingURL=keyword.js.map","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","'use strict';\n\nvar traverse = module.exports = function (schema, opts, cb) {\n  // Legacy support for v0.3.1 and earlier.\n  if (typeof opts == 'function') {\n    cb = opts;\n    opts = {};\n  }\n\n  cb = opts.cb || cb;\n  var pre = (typeof cb == 'function') ? cb : cb.pre || function() {};\n  var post = cb.post || function() {};\n\n  _traverse(opts, pre, post, schema, '', schema);\n};\n\n\ntraverse.keywords = {\n  additionalItems: true,\n  items: true,\n  contains: true,\n  additionalProperties: true,\n  propertyNames: true,\n  not: true,\n  if: true,\n  then: true,\n  else: true\n};\n\ntraverse.arrayKeywords = {\n  items: true,\n  allOf: true,\n  anyOf: true,\n  oneOf: true\n};\n\ntraverse.propsKeywords = {\n  $defs: true,\n  definitions: true,\n  properties: true,\n  patternProperties: true,\n  dependencies: true\n};\n\ntraverse.skipKeywords = {\n  default: true,\n  enum: true,\n  const: true,\n  required: true,\n  maximum: true,\n  minimum: true,\n  exclusiveMaximum: true,\n  exclusiveMinimum: true,\n  multipleOf: true,\n  maxLength: true,\n  minLength: true,\n  pattern: true,\n  format: true,\n  maxItems: true,\n  minItems: true,\n  uniqueItems: true,\n  maxProperties: true,\n  minProperties: true\n};\n\n\nfunction _traverse(opts, pre, post, schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex) {\n  if (schema && typeof schema == 'object' && !Array.isArray(schema)) {\n    pre(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n    for (var key in schema) {\n      var sch = schema[key];\n      if (Array.isArray(sch)) {\n        if (key in traverse.arrayKeywords) {\n          for (var i=0; i<sch.length; i++)\n            _traverse(opts, pre, post, sch[i], jsonPtr + '/' + key + '/' + i, rootSchema, jsonPtr, key, schema, i);\n        }\n      } else if (key in traverse.propsKeywords) {\n        if (sch && typeof sch == 'object') {\n          for (var prop in sch)\n            _traverse(opts, pre, post, sch[prop], jsonPtr + '/' + key + '/' + escapeJsonPtr(prop), rootSchema, jsonPtr, key, schema, prop);\n        }\n      } else if (key in traverse.keywords || (opts.allKeys && !(key in traverse.skipKeywords))) {\n        _traverse(opts, pre, post, sch, jsonPtr + '/' + key, rootSchema, jsonPtr, key, schema);\n      }\n    }\n    post(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n  }\n}\n\n\nfunction escapeJsonPtr(str) {\n  return str.replace(/~/g, '~0').replace(/\\//g, '~1');\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getSchemaRefs = exports.resolveUrl = exports.normalizeId = exports._getFullPath = exports.getFullPath = exports.inlineRef = void 0;\nconst util_1 = require(\"./util\");\nconst equal = require(\"fast-deep-equal\");\nconst traverse = require(\"json-schema-traverse\");\n// TODO refactor to use keyword definitions\nconst SIMPLE_INLINED = new Set([\n    \"type\",\n    \"format\",\n    \"pattern\",\n    \"maxLength\",\n    \"minLength\",\n    \"maxProperties\",\n    \"minProperties\",\n    \"maxItems\",\n    \"minItems\",\n    \"maximum\",\n    \"minimum\",\n    \"uniqueItems\",\n    \"multipleOf\",\n    \"required\",\n    \"enum\",\n    \"const\",\n]);\nfunction inlineRef(schema, limit = true) {\n    if (typeof schema == \"boolean\")\n        return true;\n    if (limit === true)\n        return !hasRef(schema);\n    if (!limit)\n        return false;\n    return countKeys(schema) <= limit;\n}\nexports.inlineRef = inlineRef;\nconst REF_KEYWORDS = new Set([\n    \"$ref\",\n    \"$recursiveRef\",\n    \"$recursiveAnchor\",\n    \"$dynamicRef\",\n    \"$dynamicAnchor\",\n]);\nfunction hasRef(schema) {\n    for (const key in schema) {\n        if (REF_KEYWORDS.has(key))\n            return true;\n        const sch = schema[key];\n        if (Array.isArray(sch) && sch.some(hasRef))\n            return true;\n        if (typeof sch == \"object\" && hasRef(sch))\n            return true;\n    }\n    return false;\n}\nfunction countKeys(schema) {\n    let count = 0;\n    for (const key in schema) {\n        if (key === \"$ref\")\n            return Infinity;\n        count++;\n        if (SIMPLE_INLINED.has(key))\n            continue;\n        if (typeof schema[key] == \"object\") {\n            (0, util_1.eachItem)(schema[key], (sch) => (count += countKeys(sch)));\n        }\n        if (count === Infinity)\n            return Infinity;\n    }\n    return count;\n}\nfunction getFullPath(resolver, id = \"\", normalize) {\n    if (normalize !== false)\n        id = normalizeId(id);\n    const p = resolver.parse(id);\n    return _getFullPath(resolver, p);\n}\nexports.getFullPath = getFullPath;\nfunction _getFullPath(resolver, p) {\n    const serialized = resolver.serialize(p);\n    return serialized.split(\"#\")[0] + \"#\";\n}\nexports._getFullPath = _getFullPath;\nconst TRAILING_SLASH_HASH = /#\\/?$/;\nfunction normalizeId(id) {\n    return id ? id.replace(TRAILING_SLASH_HASH, \"\") : \"\";\n}\nexports.normalizeId = normalizeId;\nfunction resolveUrl(resolver, baseId, id) {\n    id = normalizeId(id);\n    return resolver.resolve(baseId, id);\n}\nexports.resolveUrl = resolveUrl;\nconst ANCHOR = /^[a-z_][-a-z0-9._]*$/i;\nfunction getSchemaRefs(schema, baseId) {\n    if (typeof schema == \"boolean\")\n        return {};\n    const { schemaId, uriResolver } = this.opts;\n    const schId = normalizeId(schema[schemaId] || baseId);\n    const baseIds = { \"\": schId };\n    const pathPrefix = getFullPath(uriResolver, schId, false);\n    const localRefs = {};\n    const schemaRefs = new Set();\n    traverse(schema, { allKeys: true }, (sch, jsonPtr, _, parentJsonPtr) => {\n        if (parentJsonPtr === undefined)\n            return;\n        const fullPath = pathPrefix + jsonPtr;\n        let innerBaseId = baseIds[parentJsonPtr];\n        if (typeof sch[schemaId] == \"string\")\n            innerBaseId = addRef.call(this, sch[schemaId]);\n        addAnchor.call(this, sch.$anchor);\n        addAnchor.call(this, sch.$dynamicAnchor);\n        baseIds[jsonPtr] = innerBaseId;\n        function addRef(ref) {\n            // eslint-disable-next-line @typescript-eslint/unbound-method\n            const _resolve = this.opts.uriResolver.resolve;\n            ref = normalizeId(innerBaseId ? _resolve(innerBaseId, ref) : ref);\n            if (schemaRefs.has(ref))\n                throw ambiguos(ref);\n            schemaRefs.add(ref);\n            let schOrRef = this.refs[ref];\n            if (typeof schOrRef == \"string\")\n                schOrRef = this.refs[schOrRef];\n            if (typeof schOrRef == \"object\") {\n                checkAmbiguosRef(sch, schOrRef.schema, ref);\n            }\n            else if (ref !== normalizeId(fullPath)) {\n                if (ref[0] === \"#\") {\n                    checkAmbiguosRef(sch, localRefs[ref], ref);\n                    localRefs[ref] = sch;\n                }\n                else {\n                    this.refs[ref] = fullPath;\n                }\n            }\n            return ref;\n        }\n        function addAnchor(anchor) {\n            if (typeof anchor == \"string\") {\n                if (!ANCHOR.test(anchor))\n                    throw new Error(`invalid anchor \"${anchor}\"`);\n                addRef.call(this, `#${anchor}`);\n            }\n        }\n    });\n    return localRefs;\n    function checkAmbiguosRef(sch1, sch2, ref) {\n        if (sch2 !== undefined && !equal(sch1, sch2))\n            throw ambiguos(ref);\n    }\n    function ambiguos(ref) {\n        return new Error(`reference \"${ref}\" resolves to more than one schema`);\n    }\n}\nexports.getSchemaRefs = getSchemaRefs;\n//# sourceMappingURL=resolve.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getData = exports.KeywordCxt = exports.validateFunctionCode = void 0;\nconst boolSchema_1 = require(\"./boolSchema\");\nconst dataType_1 = require(\"./dataType\");\nconst applicability_1 = require(\"./applicability\");\nconst dataType_2 = require(\"./dataType\");\nconst defaults_1 = require(\"./defaults\");\nconst keyword_1 = require(\"./keyword\");\nconst subschema_1 = require(\"./subschema\");\nconst codegen_1 = require(\"../codegen\");\nconst names_1 = require(\"../names\");\nconst resolve_1 = require(\"../resolve\");\nconst util_1 = require(\"../util\");\nconst errors_1 = require(\"../errors\");\n// schema compilation - generates validation function, subschemaCode (below) is used for subschemas\nfunction validateFunctionCode(it) {\n    if (isSchemaObj(it)) {\n        checkKeywords(it);\n        if (schemaCxtHasRules(it)) {\n            topSchemaObjCode(it);\n            return;\n        }\n    }\n    validateFunction(it, () => (0, boolSchema_1.topBoolOrEmptySchema)(it));\n}\nexports.validateFunctionCode = validateFunctionCode;\nfunction validateFunction({ gen, validateName, schema, schemaEnv, opts }, body) {\n    if (opts.code.es5) {\n        gen.func(validateName, (0, codegen_1._) `${names_1.default.data}, ${names_1.default.valCxt}`, schemaEnv.$async, () => {\n            gen.code((0, codegen_1._) `\"use strict\"; ${funcSourceUrl(schema, opts)}`);\n            destructureValCxtES5(gen, opts);\n            gen.code(body);\n        });\n    }\n    else {\n        gen.func(validateName, (0, codegen_1._) `${names_1.default.data}, ${destructureValCxt(opts)}`, schemaEnv.$async, () => gen.code(funcSourceUrl(schema, opts)).code(body));\n    }\n}\nfunction destructureValCxt(opts) {\n    return (0, codegen_1._) `{${names_1.default.instancePath}=\"\", ${names_1.default.parentData}, ${names_1.default.parentDataProperty}, ${names_1.default.rootData}=${names_1.default.data}${opts.dynamicRef ? (0, codegen_1._) `, ${names_1.default.dynamicAnchors}={}` : codegen_1.nil}}={}`;\n}\nfunction destructureValCxtES5(gen, opts) {\n    gen.if(names_1.default.valCxt, () => {\n        gen.var(names_1.default.instancePath, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.instancePath}`);\n        gen.var(names_1.default.parentData, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.parentData}`);\n        gen.var(names_1.default.parentDataProperty, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.parentDataProperty}`);\n        gen.var(names_1.default.rootData, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.rootData}`);\n        if (opts.dynamicRef)\n            gen.var(names_1.default.dynamicAnchors, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.dynamicAnchors}`);\n    }, () => {\n        gen.var(names_1.default.instancePath, (0, codegen_1._) `\"\"`);\n        gen.var(names_1.default.parentData, (0, codegen_1._) `undefined`);\n        gen.var(names_1.default.parentDataProperty, (0, codegen_1._) `undefined`);\n        gen.var(names_1.default.rootData, names_1.default.data);\n        if (opts.dynamicRef)\n            gen.var(names_1.default.dynamicAnchors, (0, codegen_1._) `{}`);\n    });\n}\nfunction topSchemaObjCode(it) {\n    const { schema, opts, gen } = it;\n    validateFunction(it, () => {\n        if (opts.$comment && schema.$comment)\n            commentKeyword(it);\n        checkNoDefault(it);\n        gen.let(names_1.default.vErrors, null);\n        gen.let(names_1.default.errors, 0);\n        if (opts.unevaluated)\n            resetEvaluated(it);\n        typeAndKeywords(it);\n        returnResults(it);\n    });\n    return;\n}\nfunction resetEvaluated(it) {\n    // TODO maybe some hook to execute it in the end to check whether props/items are Name, as in assignEvaluated\n    const { gen, validateName } = it;\n    it.evaluated = gen.const(\"evaluated\", (0, codegen_1._) `${validateName}.evaluated`);\n    gen.if((0, codegen_1._) `${it.evaluated}.dynamicProps`, () => gen.assign((0, codegen_1._) `${it.evaluated}.props`, (0, codegen_1._) `undefined`));\n    gen.if((0, codegen_1._) `${it.evaluated}.dynamicItems`, () => gen.assign((0, codegen_1._) `${it.evaluated}.items`, (0, codegen_1._) `undefined`));\n}\nfunction funcSourceUrl(schema, opts) {\n    const schId = typeof schema == \"object\" && schema[opts.schemaId];\n    return schId && (opts.code.source || opts.code.process) ? (0, codegen_1._) `/*# sourceURL=${schId} */` : codegen_1.nil;\n}\n// schema compilation - this function is used recursively to generate code for sub-schemas\nfunction subschemaCode(it, valid) {\n    if (isSchemaObj(it)) {\n        checkKeywords(it);\n        if (schemaCxtHasRules(it)) {\n            subSchemaObjCode(it, valid);\n            return;\n        }\n    }\n    (0, boolSchema_1.boolOrEmptySchema)(it, valid);\n}\nfunction schemaCxtHasRules({ schema, self }) {\n    if (typeof schema == \"boolean\")\n        return !schema;\n    for (const key in schema)\n        if (self.RULES.all[key])\n            return true;\n    return false;\n}\nfunction isSchemaObj(it) {\n    return typeof it.schema != \"boolean\";\n}\nfunction subSchemaObjCode(it, valid) {\n    const { schema, gen, opts } = it;\n    if (opts.$comment && schema.$comment)\n        commentKeyword(it);\n    updateContext(it);\n    checkAsyncSchema(it);\n    const errsCount = gen.const(\"_errs\", names_1.default.errors);\n    typeAndKeywords(it, errsCount);\n    // TODO var\n    gen.var(valid, (0, codegen_1._) `${errsCount} === ${names_1.default.errors}`);\n}\nfunction checkKeywords(it) {\n    (0, util_1.checkUnknownRules)(it);\n    checkRefsAndKeywords(it);\n}\nfunction typeAndKeywords(it, errsCount) {\n    if (it.opts.jtd)\n        return schemaKeywords(it, [], false, errsCount);\n    const types = (0, dataType_1.getSchemaTypes)(it.schema);\n    const checkedTypes = (0, dataType_1.coerceAndCheckDataType)(it, types);\n    schemaKeywords(it, types, !checkedTypes, errsCount);\n}\nfunction checkRefsAndKeywords(it) {\n    const { schema, errSchemaPath, opts, self } = it;\n    if (schema.$ref && opts.ignoreKeywordsWithRef && (0, util_1.schemaHasRulesButRef)(schema, self.RULES)) {\n        self.logger.warn(`$ref: keywords ignored in schema at path \"${errSchemaPath}\"`);\n    }\n}\nfunction checkNoDefault(it) {\n    const { schema, opts } = it;\n    if (schema.default !== undefined && opts.useDefaults && opts.strictSchema) {\n        (0, util_1.checkStrictMode)(it, \"default is ignored in the schema root\");\n    }\n}\nfunction updateContext(it) {\n    const schId = it.schema[it.opts.schemaId];\n    if (schId)\n        it.baseId = (0, resolve_1.resolveUrl)(it.opts.uriResolver, it.baseId, schId);\n}\nfunction checkAsyncSchema(it) {\n    if (it.schema.$async && !it.schemaEnv.$async)\n        throw new Error(\"async schema in sync schema\");\n}\nfunction commentKeyword({ gen, schemaEnv, schema, errSchemaPath, opts }) {\n    const msg = schema.$comment;\n    if (opts.$comment === true) {\n        gen.code((0, codegen_1._) `${names_1.default.self}.logger.log(${msg})`);\n    }\n    else if (typeof opts.$comment == \"function\") {\n        const schemaPath = (0, codegen_1.str) `${errSchemaPath}/$comment`;\n        const rootName = gen.scopeValue(\"root\", { ref: schemaEnv.root });\n        gen.code((0, codegen_1._) `${names_1.default.self}.opts.$comment(${msg}, ${schemaPath}, ${rootName}.schema)`);\n    }\n}\nfunction returnResults(it) {\n    const { gen, schemaEnv, validateName, ValidationError, opts } = it;\n    if (schemaEnv.$async) {\n        // TODO assign unevaluated\n        gen.if((0, codegen_1._) `${names_1.default.errors} === 0`, () => gen.return(names_1.default.data), () => gen.throw((0, codegen_1._) `new ${ValidationError}(${names_1.default.vErrors})`));\n    }\n    else {\n        gen.assign((0, codegen_1._) `${validateName}.errors`, names_1.default.vErrors);\n        if (opts.unevaluated)\n            assignEvaluated(it);\n        gen.return((0, codegen_1._) `${names_1.default.errors} === 0`);\n    }\n}\nfunction assignEvaluated({ gen, evaluated, props, items }) {\n    if (props instanceof codegen_1.Name)\n        gen.assign((0, codegen_1._) `${evaluated}.props`, props);\n    if (items instanceof codegen_1.Name)\n        gen.assign((0, codegen_1._) `${evaluated}.items`, items);\n}\nfunction schemaKeywords(it, types, typeErrors, errsCount) {\n    const { gen, schema, data, allErrors, opts, self } = it;\n    const { RULES } = self;\n    if (schema.$ref && (opts.ignoreKeywordsWithRef || !(0, util_1.schemaHasRulesButRef)(schema, RULES))) {\n        gen.block(() => keywordCode(it, \"$ref\", RULES.all.$ref.definition)); // TODO typecast\n        return;\n    }\n    if (!opts.jtd)\n        checkStrictTypes(it, types);\n    gen.block(() => {\n        for (const group of RULES.rules)\n            groupKeywords(group);\n        groupKeywords(RULES.post);\n    });\n    function groupKeywords(group) {\n        if (!(0, applicability_1.shouldUseGroup)(schema, group))\n            return;\n        if (group.type) {\n            gen.if((0, dataType_2.checkDataType)(group.type, data, opts.strictNumbers));\n            iterateKeywords(it, group);\n            if (types.length === 1 && types[0] === group.type && typeErrors) {\n                gen.else();\n                (0, dataType_2.reportTypeError)(it);\n            }\n            gen.endIf();\n        }\n        else {\n            iterateKeywords(it, group);\n        }\n        // TODO make it \"ok\" call?\n        if (!allErrors)\n            gen.if((0, codegen_1._) `${names_1.default.errors} === ${errsCount || 0}`);\n    }\n}\nfunction iterateKeywords(it, group) {\n    const { gen, schema, opts: { useDefaults }, } = it;\n    if (useDefaults)\n        (0, defaults_1.assignDefaults)(it, group.type);\n    gen.block(() => {\n        for (const rule of group.rules) {\n            if ((0, applicability_1.shouldUseRule)(schema, rule)) {\n                keywordCode(it, rule.keyword, rule.definition, group.type);\n            }\n        }\n    });\n}\nfunction checkStrictTypes(it, types) {\n    if (it.schemaEnv.meta || !it.opts.strictTypes)\n        return;\n    checkContextTypes(it, types);\n    if (!it.opts.allowUnionTypes)\n        checkMultipleTypes(it, types);\n    checkKeywordTypes(it, it.dataTypes);\n}\nfunction checkContextTypes(it, types) {\n    if (!types.length)\n        return;\n    if (!it.dataTypes.length) {\n        it.dataTypes = types;\n        return;\n    }\n    types.forEach((t) => {\n        if (!includesType(it.dataTypes, t)) {\n            strictTypesError(it, `type \"${t}\" not allowed by context \"${it.dataTypes.join(\",\")}\"`);\n        }\n    });\n    narrowSchemaTypes(it, types);\n}\nfunction checkMultipleTypes(it, ts) {\n    if (ts.length > 1 && !(ts.length === 2 && ts.includes(\"null\"))) {\n        strictTypesError(it, \"use allowUnionTypes to allow union type keyword\");\n    }\n}\nfunction checkKeywordTypes(it, ts) {\n    const rules = it.self.RULES.all;\n    for (const keyword in rules) {\n        const rule = rules[keyword];\n        if (typeof rule == \"object\" && (0, applicability_1.shouldUseRule)(it.schema, rule)) {\n            const { type } = rule.definition;\n            if (type.length && !type.some((t) => hasApplicableType(ts, t))) {\n                strictTypesError(it, `missing type \"${type.join(\",\")}\" for keyword \"${keyword}\"`);\n            }\n        }\n    }\n}\nfunction hasApplicableType(schTs, kwdT) {\n    return schTs.includes(kwdT) || (kwdT === \"number\" && schTs.includes(\"integer\"));\n}\nfunction includesType(ts, t) {\n    return ts.includes(t) || (t === \"integer\" && ts.includes(\"number\"));\n}\nfunction narrowSchemaTypes(it, withTypes) {\n    const ts = [];\n    for (const t of it.dataTypes) {\n        if (includesType(withTypes, t))\n            ts.push(t);\n        else if (withTypes.includes(\"integer\") && t === \"number\")\n            ts.push(\"integer\");\n    }\n    it.dataTypes = ts;\n}\nfunction strictTypesError(it, msg) {\n    const schemaPath = it.schemaEnv.baseId + it.errSchemaPath;\n    msg += ` at \"${schemaPath}\" (strictTypes)`;\n    (0, util_1.checkStrictMode)(it, msg, it.opts.strictTypes);\n}\nclass KeywordCxt {\n    constructor(it, def, keyword) {\n        (0, keyword_1.validateKeywordUsage)(it, def, keyword);\n        this.gen = it.gen;\n        this.allErrors = it.allErrors;\n        this.keyword = keyword;\n        this.data = it.data;\n        this.schema = it.schema[keyword];\n        this.$data = def.$data && it.opts.$data && this.schema && this.schema.$data;\n        this.schemaValue = (0, util_1.schemaRefOrVal)(it, this.schema, keyword, this.$data);\n        this.schemaType = def.schemaType;\n        this.parentSchema = it.schema;\n        this.params = {};\n        this.it = it;\n        this.def = def;\n        if (this.$data) {\n            this.schemaCode = it.gen.const(\"vSchema\", getData(this.$data, it));\n        }\n        else {\n            this.schemaCode = this.schemaValue;\n            if (!(0, keyword_1.validSchemaType)(this.schema, def.schemaType, def.allowUndefined)) {\n                throw new Error(`${keyword} value must be ${JSON.stringify(def.schemaType)}`);\n            }\n        }\n        if (\"code\" in def ? def.trackErrors : def.errors !== false) {\n            this.errsCount = it.gen.const(\"_errs\", names_1.default.errors);\n        }\n    }\n    result(condition, successAction, failAction) {\n        this.failResult((0, codegen_1.not)(condition), successAction, failAction);\n    }\n    failResult(condition, successAction, failAction) {\n        this.gen.if(condition);\n        if (failAction)\n            failAction();\n        else\n            this.error();\n        if (successAction) {\n            this.gen.else();\n            successAction();\n            if (this.allErrors)\n                this.gen.endIf();\n        }\n        else {\n            if (this.allErrors)\n                this.gen.endIf();\n            else\n                this.gen.else();\n        }\n    }\n    pass(condition, failAction) {\n        this.failResult((0, codegen_1.not)(condition), undefined, failAction);\n    }\n    fail(condition) {\n        if (condition === undefined) {\n            this.error();\n            if (!this.allErrors)\n                this.gen.if(false); // this branch will be removed by gen.optimize\n            return;\n        }\n        this.gen.if(condition);\n        this.error();\n        if (this.allErrors)\n            this.gen.endIf();\n        else\n            this.gen.else();\n    }\n    fail$data(condition) {\n        if (!this.$data)\n            return this.fail(condition);\n        const { schemaCode } = this;\n        this.fail((0, codegen_1._) `${schemaCode} !== undefined && (${(0, codegen_1.or)(this.invalid$data(), condition)})`);\n    }\n    error(append, errorParams, errorPaths) {\n        if (errorParams) {\n            this.setParams(errorParams);\n            this._error(append, errorPaths);\n            this.setParams({});\n            return;\n        }\n        this._error(append, errorPaths);\n    }\n    _error(append, errorPaths) {\n        ;\n        (append ? errors_1.reportExtraError : errors_1.reportError)(this, this.def.error, errorPaths);\n    }\n    $dataError() {\n        (0, errors_1.reportError)(this, this.def.$dataError || errors_1.keyword$DataError);\n    }\n    reset() {\n        if (this.errsCount === undefined)\n            throw new Error('add \"trackErrors\" to keyword definition');\n        (0, errors_1.resetErrorsCount)(this.gen, this.errsCount);\n    }\n    ok(cond) {\n        if (!this.allErrors)\n            this.gen.if(cond);\n    }\n    setParams(obj, assign) {\n        if (assign)\n            Object.assign(this.params, obj);\n        else\n            this.params = obj;\n    }\n    block$data(valid, codeBlock, $dataValid = codegen_1.nil) {\n        this.gen.block(() => {\n            this.check$data(valid, $dataValid);\n            codeBlock();\n        });\n    }\n    check$data(valid = codegen_1.nil, $dataValid = codegen_1.nil) {\n        if (!this.$data)\n            return;\n        const { gen, schemaCode, schemaType, def } = this;\n        gen.if((0, codegen_1.or)((0, codegen_1._) `${schemaCode} === undefined`, $dataValid));\n        if (valid !== codegen_1.nil)\n            gen.assign(valid, true);\n        if (schemaType.length || def.validateSchema) {\n            gen.elseIf(this.invalid$data());\n            this.$dataError();\n            if (valid !== codegen_1.nil)\n                gen.assign(valid, false);\n        }\n        gen.else();\n    }\n    invalid$data() {\n        const { gen, schemaCode, schemaType, def, it } = this;\n        return (0, codegen_1.or)(wrong$DataType(), invalid$DataSchema());\n        function wrong$DataType() {\n            if (schemaType.length) {\n                /* istanbul ignore if */\n                if (!(schemaCode instanceof codegen_1.Name))\n                    throw new Error(\"ajv implementation error\");\n                const st = Array.isArray(schemaType) ? schemaType : [schemaType];\n                return (0, codegen_1._) `${(0, dataType_2.checkDataTypes)(st, schemaCode, it.opts.strictNumbers, dataType_2.DataType.Wrong)}`;\n            }\n            return codegen_1.nil;\n        }\n        function invalid$DataSchema() {\n            if (def.validateSchema) {\n                const validateSchemaRef = gen.scopeValue(\"validate$data\", { ref: def.validateSchema }); // TODO value.code for standalone\n                return (0, codegen_1._) `!${validateSchemaRef}(${schemaCode})`;\n            }\n            return codegen_1.nil;\n        }\n    }\n    subschema(appl, valid) {\n        const subschema = (0, subschema_1.getSubschema)(this.it, appl);\n        (0, subschema_1.extendSubschemaData)(subschema, this.it, appl);\n        (0, subschema_1.extendSubschemaMode)(subschema, appl);\n        const nextContext = { ...this.it, ...subschema, items: undefined, props: undefined };\n        subschemaCode(nextContext, valid);\n        return nextContext;\n    }\n    mergeEvaluated(schemaCxt, toName) {\n        const { it, gen } = this;\n        if (!it.opts.unevaluated)\n            return;\n        if (it.props !== true && schemaCxt.props !== undefined) {\n            it.props = util_1.mergeEvaluated.props(gen, schemaCxt.props, it.props, toName);\n        }\n        if (it.items !== true && schemaCxt.items !== undefined) {\n            it.items = util_1.mergeEvaluated.items(gen, schemaCxt.items, it.items, toName);\n        }\n    }\n    mergeValidEvaluated(schemaCxt, valid) {\n        const { it, gen } = this;\n        if (it.opts.unevaluated && (it.props !== true || it.items !== true)) {\n            gen.if(valid, () => this.mergeEvaluated(schemaCxt, codegen_1.Name));\n            return true;\n        }\n    }\n}\nexports.KeywordCxt = KeywordCxt;\nfunction keywordCode(it, keyword, def, ruleType) {\n    const cxt = new KeywordCxt(it, def, keyword);\n    if (\"code\" in def) {\n        def.code(cxt, ruleType);\n    }\n    else if (cxt.$data && def.validate) {\n        (0, keyword_1.funcKeywordCode)(cxt, def);\n    }\n    else if (\"macro\" in def) {\n        (0, keyword_1.macroKeywordCode)(cxt, def);\n    }\n    else if (def.compile || def.validate) {\n        (0, keyword_1.funcKeywordCode)(cxt, def);\n    }\n}\nconst JSON_POINTER = /^\\/(?:[^~]|~0|~1)*$/;\nconst RELATIVE_JSON_POINTER = /^([0-9]+)(#|\\/(?:[^~]|~0|~1)*)?$/;\nfunction getData($data, { dataLevel, dataNames, dataPathArr }) {\n    let jsonPointer;\n    let data;\n    if ($data === \"\")\n        return names_1.default.rootData;\n    if ($data[0] === \"/\") {\n        if (!JSON_POINTER.test($data))\n            throw new Error(`Invalid JSON-pointer: ${$data}`);\n        jsonPointer = $data;\n        data = names_1.default.rootData;\n    }\n    else {\n        const matches = RELATIVE_JSON_POINTER.exec($data);\n        if (!matches)\n            throw new Error(`Invalid JSON-pointer: ${$data}`);\n        const up = +matches[1];\n        jsonPointer = matches[2];\n        if (jsonPointer === \"#\") {\n            if (up >= dataLevel)\n                throw new Error(errorMsg(\"property/index\", up));\n            return dataPathArr[dataLevel - up];\n        }\n        if (up > dataLevel)\n            throw new Error(errorMsg(\"data\", up));\n        data = dataNames[dataLevel - up];\n        if (!jsonPointer)\n            return data;\n    }\n    let expr = data;\n    const segments = jsonPointer.split(\"/\");\n    for (const segment of segments) {\n        if (segment) {\n            data = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)((0, util_1.unescapeJsonPointer)(segment))}`;\n            expr = (0, codegen_1._) `${expr} && ${data}`;\n        }\n    }\n    return expr;\n    function errorMsg(pointerType, up) {\n        return `Cannot access ${pointerType} ${up} levels up, current level is ${dataLevel}`;\n    }\n}\nexports.getData = getData;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.boolOrEmptySchema = exports.topBoolOrEmptySchema = void 0;\nconst errors_1 = require(\"../errors\");\nconst codegen_1 = require(\"../codegen\");\nconst names_1 = require(\"../names\");\nconst boolError = {\n    message: \"boolean schema is false\",\n};\nfunction topBoolOrEmptySchema(it) {\n    const { gen, schema, validateName } = it;\n    if (schema === false) {\n        falseSchemaError(it, false);\n    }\n    else if (typeof schema == \"object\" && schema.$async === true) {\n        gen.return(names_1.default.data);\n    }\n    else {\n        gen.assign((0, codegen_1._) `${validateName}.errors`, null);\n        gen.return(true);\n    }\n}\nexports.topBoolOrEmptySchema = topBoolOrEmptySchema;\nfunction boolOrEmptySchema(it, valid) {\n    const { gen, schema } = it;\n    if (schema === false) {\n        gen.var(valid, false); // TODO var\n        falseSchemaError(it);\n    }\n    else {\n        gen.var(valid, true); // TODO var\n    }\n}\nexports.boolOrEmptySchema = boolOrEmptySchema;\nfunction falseSchemaError(it, overrideAllErrors) {\n    const { gen, data } = it;\n    // TODO maybe some other interface should be used for non-keyword validation errors...\n    const cxt = {\n        gen,\n        keyword: \"false schema\",\n        data,\n        schema: false,\n        schemaCode: false,\n        schemaValue: false,\n        params: {},\n        it,\n    };\n    (0, errors_1.reportError)(cxt, boolError, undefined, overrideAllErrors);\n}\n//# sourceMappingURL=boolSchema.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.assignDefaults = void 0;\nconst codegen_1 = require(\"../codegen\");\nconst util_1 = require(\"../util\");\nfunction assignDefaults(it, ty) {\n    const { properties, items } = it.schema;\n    if (ty === \"object\" && properties) {\n        for (const key in properties) {\n            assignDefault(it, key, properties[key].default);\n        }\n    }\n    else if (ty === \"array\" && Array.isArray(items)) {\n        items.forEach((sch, i) => assignDefault(it, i, sch.default));\n    }\n}\nexports.assignDefaults = assignDefaults;\nfunction assignDefault(it, prop, defaultValue) {\n    const { gen, compositeRule, data, opts } = it;\n    if (defaultValue === undefined)\n        return;\n    const childData = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(prop)}`;\n    if (compositeRule) {\n        (0, util_1.checkStrictMode)(it, `default is ignored for: ${childData}`);\n        return;\n    }\n    let condition = (0, codegen_1._) `${childData} === undefined`;\n    if (opts.useDefaults === \"empty\") {\n        condition = (0, codegen_1._) `${condition} || ${childData} === null || ${childData} === \"\"`;\n    }\n    // `${childData} === undefined` +\n    // (opts.useDefaults === \"empty\" ? ` || ${childData} === null || ${childData} === \"\"` : \"\")\n    gen.if(condition, (0, codegen_1._) `${childData} = ${(0, codegen_1.stringify)(defaultValue)}`);\n}\n//# sourceMappingURL=defaults.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.extendSubschemaMode = exports.extendSubschemaData = exports.getSubschema = void 0;\nconst codegen_1 = require(\"../codegen\");\nconst util_1 = require(\"../util\");\nfunction getSubschema(it, { keyword, schemaProp, schema, schemaPath, errSchemaPath, topSchemaRef }) {\n    if (keyword !== undefined && schema !== undefined) {\n        throw new Error('both \"keyword\" and \"schema\" passed, only one allowed');\n    }\n    if (keyword !== undefined) {\n        const sch = it.schema[keyword];\n        return schemaProp === undefined\n            ? {\n                schema: sch,\n                schemaPath: (0, codegen_1._) `${it.schemaPath}${(0, codegen_1.getProperty)(keyword)}`,\n                errSchemaPath: `${it.errSchemaPath}/${keyword}`,\n            }\n            : {\n                schema: sch[schemaProp],\n                schemaPath: (0, codegen_1._) `${it.schemaPath}${(0, codegen_1.getProperty)(keyword)}${(0, codegen_1.getProperty)(schemaProp)}`,\n                errSchemaPath: `${it.errSchemaPath}/${keyword}/${(0, util_1.escapeFragment)(schemaProp)}`,\n            };\n    }\n    if (schema !== undefined) {\n        if (schemaPath === undefined || errSchemaPath === undefined || topSchemaRef === undefined) {\n            throw new Error('\"schemaPath\", \"errSchemaPath\" and \"topSchemaRef\" are required with \"schema\"');\n        }\n        return {\n            schema,\n            schemaPath,\n            topSchemaRef,\n            errSchemaPath,\n        };\n    }\n    throw new Error('either \"keyword\" or \"schema\" must be passed');\n}\nexports.getSubschema = getSubschema;\nfunction extendSubschemaData(subschema, it, { dataProp, dataPropType: dpType, data, dataTypes, propertyName }) {\n    if (data !== undefined && dataProp !== undefined) {\n        throw new Error('both \"data\" and \"dataProp\" passed, only one allowed');\n    }\n    const { gen } = it;\n    if (dataProp !== undefined) {\n        const { errorPath, dataPathArr, opts } = it;\n        const nextData = gen.let(\"data\", (0, codegen_1._) `${it.data}${(0, codegen_1.getProperty)(dataProp)}`, true);\n        dataContextProps(nextData);\n        subschema.errorPath = (0, codegen_1.str) `${errorPath}${(0, util_1.getErrorPath)(dataProp, dpType, opts.jsPropertySyntax)}`;\n        subschema.parentDataProperty = (0, codegen_1._) `${dataProp}`;\n        subschema.dataPathArr = [...dataPathArr, subschema.parentDataProperty];\n    }\n    if (data !== undefined) {\n        const nextData = data instanceof codegen_1.Name ? data : gen.let(\"data\", data, true); // replaceable if used once?\n        dataContextProps(nextData);\n        if (propertyName !== undefined)\n            subschema.propertyName = propertyName;\n        // TODO something is possibly wrong here with not changing parentDataProperty and not appending dataPathArr\n    }\n    if (dataTypes)\n        subschema.dataTypes = dataTypes;\n    function dataContextProps(_nextData) {\n        subschema.data = _nextData;\n        subschema.dataLevel = it.dataLevel + 1;\n        subschema.dataTypes = [];\n        it.definedProperties = new Set();\n        subschema.parentData = it.data;\n        subschema.dataNames = [...it.dataNames, _nextData];\n    }\n}\nexports.extendSubschemaData = extendSubschemaData;\nfunction extendSubschemaMode(subschema, { jtdDiscriminator, jtdMetadata, compositeRule, createErrors, allErrors }) {\n    if (compositeRule !== undefined)\n        subschema.compositeRule = compositeRule;\n    if (createErrors !== undefined)\n        subschema.createErrors = createErrors;\n    if (allErrors !== undefined)\n        subschema.allErrors = allErrors;\n    subschema.jtdDiscriminator = jtdDiscriminator; // not inherited\n    subschema.jtdMetadata = jtdMetadata; // not inherited\n}\nexports.extendSubschemaMode = extendSubschemaMode;\n//# sourceMappingURL=subschema.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass ValidationError extends Error {\n    constructor(errors) {\n        super(\"validation failed\");\n        this.errors = errors;\n        this.ajv = this.validation = true;\n    }\n}\nexports.default = ValidationError;\n//# sourceMappingURL=validation_error.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst resolve_1 = require(\"./resolve\");\nclass MissingRefError extends Error {\n    constructor(resolver, baseId, ref, msg) {\n        super(msg || `can't resolve reference ${ref} from id ${baseId}`);\n        this.missingRef = (0, resolve_1.resolveUrl)(resolver, baseId, ref);\n        this.missingSchema = (0, resolve_1.normalizeId)((0, resolve_1.getFullPath)(resolver, this.missingRef));\n    }\n}\nexports.default = MissingRefError;\n//# sourceMappingURL=ref_error.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.resolveSchema = exports.getCompilingSchema = exports.resolveRef = exports.compileSchema = exports.SchemaEnv = void 0;\nconst codegen_1 = require(\"./codegen\");\nconst validation_error_1 = require(\"../runtime/validation_error\");\nconst names_1 = require(\"./names\");\nconst resolve_1 = require(\"./resolve\");\nconst util_1 = require(\"./util\");\nconst validate_1 = require(\"./validate\");\nclass SchemaEnv {\n    constructor(env) {\n        var _a;\n        this.refs = {};\n        this.dynamicAnchors = {};\n        let schema;\n        if (typeof env.schema == \"object\")\n            schema = env.schema;\n        this.schema = env.schema;\n        this.schemaId = env.schemaId;\n        this.root = env.root || this;\n        this.baseId = (_a = env.baseId) !== null && _a !== void 0 ? _a : (0, resolve_1.normalizeId)(schema === null || schema === void 0 ? void 0 : schema[env.schemaId || \"$id\"]);\n        this.schemaPath = env.schemaPath;\n        this.localRefs = env.localRefs;\n        this.meta = env.meta;\n        this.$async = schema === null || schema === void 0 ? void 0 : schema.$async;\n        this.refs = {};\n    }\n}\nexports.SchemaEnv = SchemaEnv;\n// let codeSize = 0\n// let nodeCount = 0\n// Compiles schema in SchemaEnv\nfunction compileSchema(sch) {\n    // TODO refactor - remove compilations\n    const _sch = getCompilingSchema.call(this, sch);\n    if (_sch)\n        return _sch;\n    const rootId = (0, resolve_1.getFullPath)(this.opts.uriResolver, sch.root.baseId); // TODO if getFullPath removed 1 tests fails\n    const { es5, lines } = this.opts.code;\n    const { ownProperties } = this.opts;\n    const gen = new codegen_1.CodeGen(this.scope, { es5, lines, ownProperties });\n    let _ValidationError;\n    if (sch.$async) {\n        _ValidationError = gen.scopeValue(\"Error\", {\n            ref: validation_error_1.default,\n            code: (0, codegen_1._) `require(\"ajv/dist/runtime/validation_error\").default`,\n        });\n    }\n    const validateName = gen.scopeName(\"validate\");\n    sch.validateName = validateName;\n    const schemaCxt = {\n        gen,\n        allErrors: this.opts.allErrors,\n        data: names_1.default.data,\n        parentData: names_1.default.parentData,\n        parentDataProperty: names_1.default.parentDataProperty,\n        dataNames: [names_1.default.data],\n        dataPathArr: [codegen_1.nil], // TODO can its length be used as dataLevel if nil is removed?\n        dataLevel: 0,\n        dataTypes: [],\n        definedProperties: new Set(),\n        topSchemaRef: gen.scopeValue(\"schema\", this.opts.code.source === true\n            ? { ref: sch.schema, code: (0, codegen_1.stringify)(sch.schema) }\n            : { ref: sch.schema }),\n        validateName,\n        ValidationError: _ValidationError,\n        schema: sch.schema,\n        schemaEnv: sch,\n        rootId,\n        baseId: sch.baseId || rootId,\n        schemaPath: codegen_1.nil,\n        errSchemaPath: sch.schemaPath || (this.opts.jtd ? \"\" : \"#\"),\n        errorPath: (0, codegen_1._) `\"\"`,\n        opts: this.opts,\n        self: this,\n    };\n    let sourceCode;\n    try {\n        this._compilations.add(sch);\n        (0, validate_1.validateFunctionCode)(schemaCxt);\n        gen.optimize(this.opts.code.optimize);\n        // gen.optimize(1)\n        const validateCode = gen.toString();\n        sourceCode = `${gen.scopeRefs(names_1.default.scope)}return ${validateCode}`;\n        // console.log((codeSize += sourceCode.length), (nodeCount += gen.nodeCount))\n        if (this.opts.code.process)\n            sourceCode = this.opts.code.process(sourceCode, sch);\n        // console.log(\"\\n\\n\\n *** \\n\", sourceCode)\n        const makeValidate = new Function(`${names_1.default.self}`, `${names_1.default.scope}`, sourceCode);\n        const validate = makeValidate(this, this.scope.get());\n        this.scope.value(validateName, { ref: validate });\n        validate.errors = null;\n        validate.schema = sch.schema;\n        validate.schemaEnv = sch;\n        if (sch.$async)\n            validate.$async = true;\n        if (this.opts.code.source === true) {\n            validate.source = { validateName, validateCode, scopeValues: gen._values };\n        }\n        if (this.opts.unevaluated) {\n            const { props, items } = schemaCxt;\n            validate.evaluated = {\n                props: props instanceof codegen_1.Name ? undefined : props,\n                items: items instanceof codegen_1.Name ? undefined : items,\n                dynamicProps: props instanceof codegen_1.Name,\n                dynamicItems: items instanceof codegen_1.Name,\n            };\n            if (validate.source)\n                validate.source.evaluated = (0, codegen_1.stringify)(validate.evaluated);\n        }\n        sch.validate = validate;\n        return sch;\n    }\n    catch (e) {\n        delete sch.validate;\n        delete sch.validateName;\n        if (sourceCode)\n            this.logger.error(\"Error compiling schema, function code:\", sourceCode);\n        // console.log(\"\\n\\n\\n *** \\n\", sourceCode, this.opts)\n        throw e;\n    }\n    finally {\n        this._compilations.delete(sch);\n    }\n}\nexports.compileSchema = compileSchema;\nfunction resolveRef(root, baseId, ref) {\n    var _a;\n    ref = (0, resolve_1.resolveUrl)(this.opts.uriResolver, baseId, ref);\n    const schOrFunc = root.refs[ref];\n    if (schOrFunc)\n        return schOrFunc;\n    let _sch = resolve.call(this, root, ref);\n    if (_sch === undefined) {\n        const schema = (_a = root.localRefs) === null || _a === void 0 ? void 0 : _a[ref]; // TODO maybe localRefs should hold SchemaEnv\n        const { schemaId } = this.opts;\n        if (schema)\n            _sch = new SchemaEnv({ schema, schemaId, root, baseId });\n    }\n    if (_sch === undefined)\n        return;\n    return (root.refs[ref] = inlineOrCompile.call(this, _sch));\n}\nexports.resolveRef = resolveRef;\nfunction inlineOrCompile(sch) {\n    if ((0, resolve_1.inlineRef)(sch.schema, this.opts.inlineRefs))\n        return sch.schema;\n    return sch.validate ? sch : compileSchema.call(this, sch);\n}\n// Index of schema compilation in the currently compiled list\nfunction getCompilingSchema(schEnv) {\n    for (const sch of this._compilations) {\n        if (sameSchemaEnv(sch, schEnv))\n            return sch;\n    }\n}\nexports.getCompilingSchema = getCompilingSchema;\nfunction sameSchemaEnv(s1, s2) {\n    return s1.schema === s2.schema && s1.root === s2.root && s1.baseId === s2.baseId;\n}\n// resolve and compile the references ($ref)\n// TODO returns AnySchemaObject (if the schema can be inlined) or validation function\nfunction resolve(root, // information about the root schema for the current schema\nref // reference to resolve\n) {\n    let sch;\n    while (typeof (sch = this.refs[ref]) == \"string\")\n        ref = sch;\n    return sch || this.schemas[ref] || resolveSchema.call(this, root, ref);\n}\n// Resolve schema, its root and baseId\nfunction resolveSchema(root, // root object with properties schema, refs TODO below SchemaEnv is assigned to it\nref // reference to resolve\n) {\n    const p = this.opts.uriResolver.parse(ref);\n    const refPath = (0, resolve_1._getFullPath)(this.opts.uriResolver, p);\n    let baseId = (0, resolve_1.getFullPath)(this.opts.uriResolver, root.baseId, undefined);\n    // TODO `Object.keys(root.schema).length > 0` should not be needed - but removing breaks 2 tests\n    if (Object.keys(root.schema).length > 0 && refPath === baseId) {\n        return getJsonPointer.call(this, p, root);\n    }\n    const id = (0, resolve_1.normalizeId)(refPath);\n    const schOrRef = this.refs[id] || this.schemas[id];\n    if (typeof schOrRef == \"string\") {\n        const sch = resolveSchema.call(this, root, schOrRef);\n        if (typeof (sch === null || sch === void 0 ? void 0 : sch.schema) !== \"object\")\n            return;\n        return getJsonPointer.call(this, p, sch);\n    }\n    if (typeof (schOrRef === null || schOrRef === void 0 ? void 0 : schOrRef.schema) !== \"object\")\n        return;\n    if (!schOrRef.validate)\n        compileSchema.call(this, schOrRef);\n    if (id === (0, resolve_1.normalizeId)(ref)) {\n        const { schema } = schOrRef;\n        const { schemaId } = this.opts;\n        const schId = schema[schemaId];\n        if (schId)\n            baseId = (0, resolve_1.resolveUrl)(this.opts.uriResolver, baseId, schId);\n        return new SchemaEnv({ schema, schemaId, root, baseId });\n    }\n    return getJsonPointer.call(this, p, schOrRef);\n}\nexports.resolveSchema = resolveSchema;\nconst PREVENT_SCOPE_CHANGE = new Set([\n    \"properties\",\n    \"patternProperties\",\n    \"enum\",\n    \"dependencies\",\n    \"definitions\",\n]);\nfunction getJsonPointer(parsedRef, { baseId, schema, root }) {\n    var _a;\n    if (((_a = parsedRef.fragment) === null || _a === void 0 ? void 0 : _a[0]) !== \"/\")\n        return;\n    for (const part of parsedRef.fragment.slice(1).split(\"/\")) {\n        if (typeof schema === \"boolean\")\n            return;\n        const partSchema = schema[(0, util_1.unescapeFragment)(part)];\n        if (partSchema === undefined)\n            return;\n        schema = partSchema;\n        // TODO PREVENT_SCOPE_CHANGE could be defined in keyword def?\n        const schId = typeof schema === \"object\" && schema[this.opts.schemaId];\n        if (!PREVENT_SCOPE_CHANGE.has(part) && schId) {\n            baseId = (0, resolve_1.resolveUrl)(this.opts.uriResolver, baseId, schId);\n        }\n    }\n    let env;\n    if (typeof schema != \"boolean\" && schema.$ref && !(0, util_1.schemaHasRulesButRef)(schema, this.RULES)) {\n        const $ref = (0, resolve_1.resolveUrl)(this.opts.uriResolver, baseId, schema.$ref);\n        env = resolveSchema.call(this, root, $ref);\n    }\n    // even though resolution failed we need to return SchemaEnv to throw exception\n    // so that compileAsync loads missing schema.\n    const { schemaId } = this.opts;\n    env = env || new SchemaEnv({ schema, schemaId, root, baseId });\n    if (env.schema !== env.root.schema)\n        return env;\n    return undefined;\n}\n//# sourceMappingURL=index.js.map","'use strict'\n\n/** @type {(value: string) => boolean} */\nconst isUUID = RegExp.prototype.test.bind(/^[\\da-f]{8}-[\\da-f]{4}-[\\da-f]{4}-[\\da-f]{4}-[\\da-f]{12}$/iu)\n\n/** @type {(value: string) => boolean} */\nconst isIPv4 = RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\\d|1\\d{2}|[1-9]\\d|\\d)\\.){3}(?:25[0-5]|2[0-4]\\d|1\\d{2}|[1-9]\\d|\\d)$/u)\n\n/**\n * @param {Array<string>} input\n * @returns {string}\n */\nfunction stringArrayToHexStripped (input) {\n  let acc = ''\n  let code = 0\n  let i = 0\n\n  for (i = 0; i < input.length; i++) {\n    code = input[i].charCodeAt(0)\n    if (code === 48) {\n      continue\n    }\n    if (!((code >= 48 && code <= 57) || (code >= 65 && code <= 70) || (code >= 97 && code <= 102))) {\n      return ''\n    }\n    acc += input[i]\n    break\n  }\n\n  for (i += 1; i < input.length; i++) {\n    code = input[i].charCodeAt(0)\n    if (!((code >= 48 && code <= 57) || (code >= 65 && code <= 70) || (code >= 97 && code <= 102))) {\n      return ''\n    }\n    acc += input[i]\n  }\n  return acc\n}\n\n/**\n * @typedef {Object} GetIPV6Result\n * @property {boolean} error - Indicates if there was an error parsing the IPv6 address.\n * @property {string} address - The parsed IPv6 address.\n * @property {string} [zone] - The zone identifier, if present.\n */\n\n/**\n * @param {string} value\n * @returns {boolean}\n */\nconst nonSimpleDomain = RegExp.prototype.test.bind(/[^!\"$&'()*+,\\-.;=_`a-z{}~]/u)\n\n/**\n * @param {Array<string>} buffer\n * @returns {boolean}\n */\nfunction consumeIsZone (buffer) {\n  buffer.length = 0\n  return true\n}\n\n/**\n * @param {Array<string>} buffer\n * @param {Array<string>} address\n * @param {GetIPV6Result} output\n * @returns {boolean}\n */\nfunction consumeHextets (buffer, address, output) {\n  if (buffer.length) {\n    const hex = stringArrayToHexStripped(buffer)\n    if (hex !== '') {\n      address.push(hex)\n    } else {\n      output.error = true\n      return false\n    }\n    buffer.length = 0\n  }\n  return true\n}\n\n/**\n * @param {string} input\n * @returns {GetIPV6Result}\n */\nfunction getIPV6 (input) {\n  let tokenCount = 0\n  const output = { error: false, address: '', zone: '' }\n  /** @type {Array<string>} */\n  const address = []\n  /** @type {Array<string>} */\n  const buffer = []\n  let endipv6Encountered = false\n  let endIpv6 = false\n\n  let consume = consumeHextets\n\n  for (let i = 0; i < input.length; i++) {\n    const cursor = input[i]\n    if (cursor === '[' || cursor === ']') { continue }\n    if (cursor === ':') {\n      if (endipv6Encountered === true) {\n        endIpv6 = true\n      }\n      if (!consume(buffer, address, output)) { break }\n      if (++tokenCount > 7) {\n        // not valid\n        output.error = true\n        break\n      }\n      if (i > 0 && input[i - 1] === ':') {\n        endipv6Encountered = true\n      }\n      address.push(':')\n      continue\n    } else if (cursor === '%') {\n      if (!consume(buffer, address, output)) { break }\n      // switch to zone detection\n      consume = consumeIsZone\n    } else {\n      buffer.push(cursor)\n      continue\n    }\n  }\n  if (buffer.length) {\n    if (consume === consumeIsZone) {\n      output.zone = buffer.join('')\n    } else if (endIpv6) {\n      address.push(buffer.join(''))\n    } else {\n      address.push(stringArrayToHexStripped(buffer))\n    }\n  }\n  output.address = address.join('')\n  return output\n}\n\n/**\n * @typedef {Object} NormalizeIPv6Result\n * @property {string} host - The normalized host.\n * @property {string} [escapedHost] - The escaped host.\n * @property {boolean} isIPV6 - Indicates if the host is an IPv6 address.\n */\n\n/**\n * @param {string} host\n * @returns {NormalizeIPv6Result}\n */\nfunction normalizeIPv6 (host) {\n  if (findToken(host, ':') < 2) { return { host, isIPV6: false } }\n  const ipv6 = getIPV6(host)\n\n  if (!ipv6.error) {\n    let newHost = ipv6.address\n    let escapedHost = ipv6.address\n    if (ipv6.zone) {\n      newHost += '%' + ipv6.zone\n      escapedHost += '%25' + ipv6.zone\n    }\n    return { host: newHost, isIPV6: true, escapedHost }\n  } else {\n    return { host, isIPV6: false }\n  }\n}\n\n/**\n * @param {string} str\n * @param {string} token\n * @returns {number}\n */\nfunction findToken (str, token) {\n  let ind = 0\n  for (let i = 0; i < str.length; i++) {\n    if (str[i] === token) ind++\n  }\n  return ind\n}\n\n/**\n * @param {string} path\n * @returns {string}\n *\n * @see https://datatracker.ietf.org/doc/html/rfc3986#section-5.2.4\n */\nfunction removeDotSegments (path) {\n  let input = path\n  const output = []\n  let nextSlash = -1\n  let len = 0\n\n  // eslint-disable-next-line no-cond-assign\n  while (len = input.length) {\n    if (len === 1) {\n      if (input === '.') {\n        break\n      } else if (input === '/') {\n        output.push('/')\n        break\n      } else {\n        output.push(input)\n        break\n      }\n    } else if (len === 2) {\n      if (input[0] === '.') {\n        if (input[1] === '.') {\n          break\n        } else if (input[1] === '/') {\n          input = input.slice(2)\n          continue\n        }\n      } else if (input[0] === '/') {\n        if (input[1] === '.' || input[1] === '/') {\n          output.push('/')\n          break\n        }\n      }\n    } else if (len === 3) {\n      if (input === '/..') {\n        if (output.length !== 0) {\n          output.pop()\n        }\n        output.push('/')\n        break\n      }\n    }\n    if (input[0] === '.') {\n      if (input[1] === '.') {\n        if (input[2] === '/') {\n          input = input.slice(3)\n          continue\n        }\n      } else if (input[1] === '/') {\n        input = input.slice(2)\n        continue\n      }\n    } else if (input[0] === '/') {\n      if (input[1] === '.') {\n        if (input[2] === '/') {\n          input = input.slice(2)\n          continue\n        } else if (input[2] === '.') {\n          if (input[3] === '/') {\n            input = input.slice(3)\n            if (output.length !== 0) {\n              output.pop()\n            }\n            continue\n          }\n        }\n      }\n    }\n\n    // Rule 2E: Move normal path segment to output\n    if ((nextSlash = input.indexOf('/', 1)) === -1) {\n      output.push(input)\n      break\n    } else {\n      output.push(input.slice(0, nextSlash))\n      input = input.slice(nextSlash)\n    }\n  }\n\n  return output.join('')\n}\n\n/**\n * @param {import('../types/index').URIComponent} component\n * @param {boolean} esc\n * @returns {import('../types/index').URIComponent}\n */\nfunction normalizeComponentEncoding (component, esc) {\n  const func = esc !== true ? escape : unescape\n  if (component.scheme !== undefined) {\n    component.scheme = func(component.scheme)\n  }\n  if (component.userinfo !== undefined) {\n    component.userinfo = func(component.userinfo)\n  }\n  if (component.host !== undefined) {\n    component.host = func(component.host)\n  }\n  if (component.path !== undefined) {\n    component.path = func(component.path)\n  }\n  if (component.query !== undefined) {\n    component.query = func(component.query)\n  }\n  if (component.fragment !== undefined) {\n    component.fragment = func(component.fragment)\n  }\n  return component\n}\n\n/**\n * @param {import('../types/index').URIComponent} component\n * @returns {string|undefined}\n */\nfunction recomposeAuthority (component) {\n  const uriTokens = []\n\n  if (component.userinfo !== undefined) {\n    uriTokens.push(component.userinfo)\n    uriTokens.push('@')\n  }\n\n  if (component.host !== undefined) {\n    let host = unescape(component.host)\n    if (!isIPv4(host)) {\n      const ipV6res = normalizeIPv6(host)\n      if (ipV6res.isIPV6 === true) {\n        host = `[${ipV6res.escapedHost}]`\n      } else {\n        host = component.host\n      }\n    }\n    uriTokens.push(host)\n  }\n\n  if (typeof component.port === 'number' || typeof component.port === 'string') {\n    uriTokens.push(':')\n    uriTokens.push(String(component.port))\n  }\n\n  return uriTokens.length ? uriTokens.join('') : undefined\n};\n\nmodule.exports = {\n  nonSimpleDomain,\n  recomposeAuthority,\n  normalizeComponentEncoding,\n  removeDotSegments,\n  isIPv4,\n  isUUID,\n  normalizeIPv6,\n  stringArrayToHexStripped\n}\n","'use strict'\n\nconst { normalizeIPv6, removeDotSegments, recomposeAuthority, normalizeComponentEncoding, isIPv4, nonSimpleDomain } = require('./lib/utils')\nconst { SCHEMES, getSchemeHandler } = require('./lib/schemes')\n\n/**\n * @template {import('./types/index').URIComponent|string} T\n * @param {T} uri\n * @param {import('./types/index').Options} [options]\n * @returns {T}\n */\nfunction normalize (uri, options) {\n  if (typeof uri === 'string') {\n    uri = /** @type {T} */ (serialize(parse(uri, options), options))\n  } else if (typeof uri === 'object') {\n    uri = /** @type {T} */ (parse(serialize(uri, options), options))\n  }\n  return uri\n}\n\n/**\n * @param {string} baseURI\n * @param {string} relativeURI\n * @param {import('./types/index').Options} [options]\n * @returns {string}\n */\nfunction resolve (baseURI, relativeURI, options) {\n  const schemelessOptions = options ? Object.assign({ scheme: 'null' }, options) : { scheme: 'null' }\n  const resolved = resolveComponent(parse(baseURI, schemelessOptions), parse(relativeURI, schemelessOptions), schemelessOptions, true)\n  schemelessOptions.skipEscape = true\n  return serialize(resolved, schemelessOptions)\n}\n\n/**\n * @param {import ('./types/index').URIComponent} base\n * @param {import ('./types/index').URIComponent} relative\n * @param {import('./types/index').Options} [options]\n * @param {boolean} [skipNormalization=false]\n * @returns {import ('./types/index').URIComponent}\n */\nfunction resolveComponent (base, relative, options, skipNormalization) {\n  /** @type {import('./types/index').URIComponent} */\n  const target = {}\n  if (!skipNormalization) {\n    base = parse(serialize(base, options), options) // normalize base component\n    relative = parse(serialize(relative, options), options) // normalize relative component\n  }\n  options = options || {}\n\n  if (!options.tolerant && relative.scheme) {\n    target.scheme = relative.scheme\n    // target.authority = relative.authority;\n    target.userinfo = relative.userinfo\n    target.host = relative.host\n    target.port = relative.port\n    target.path = removeDotSegments(relative.path || '')\n    target.query = relative.query\n  } else {\n    if (relative.userinfo !== undefined || relative.host !== undefined || relative.port !== undefined) {\n      // target.authority = relative.authority;\n      target.userinfo = relative.userinfo\n      target.host = relative.host\n      target.port = relative.port\n      target.path = removeDotSegments(relative.path || '')\n      target.query = relative.query\n    } else {\n      if (!relative.path) {\n        target.path = base.path\n        if (relative.query !== undefined) {\n          target.query = relative.query\n        } else {\n          target.query = base.query\n        }\n      } else {\n        if (relative.path[0] === '/') {\n          target.path = removeDotSegments(relative.path)\n        } else {\n          if ((base.userinfo !== undefined || base.host !== undefined || base.port !== undefined) && !base.path) {\n            target.path = '/' + relative.path\n          } else if (!base.path) {\n            target.path = relative.path\n          } else {\n            target.path = base.path.slice(0, base.path.lastIndexOf('/') + 1) + relative.path\n          }\n          target.path = removeDotSegments(target.path)\n        }\n        target.query = relative.query\n      }\n      // target.authority = base.authority;\n      target.userinfo = base.userinfo\n      target.host = base.host\n      target.port = base.port\n    }\n    target.scheme = base.scheme\n  }\n\n  target.fragment = relative.fragment\n\n  return target\n}\n\n/**\n * @param {import ('./types/index').URIComponent|string} uriA\n * @param {import ('./types/index').URIComponent|string} uriB\n * @param {import ('./types/index').Options} options\n * @returns {boolean}\n */\nfunction equal (uriA, uriB, options) {\n  if (typeof uriA === 'string') {\n    uriA = unescape(uriA)\n    uriA = serialize(normalizeComponentEncoding(parse(uriA, options), true), { ...options, skipEscape: true })\n  } else if (typeof uriA === 'object') {\n    uriA = serialize(normalizeComponentEncoding(uriA, true), { ...options, skipEscape: true })\n  }\n\n  if (typeof uriB === 'string') {\n    uriB = unescape(uriB)\n    uriB = serialize(normalizeComponentEncoding(parse(uriB, options), true), { ...options, skipEscape: true })\n  } else if (typeof uriB === 'object') {\n    uriB = serialize(normalizeComponentEncoding(uriB, true), { ...options, skipEscape: true })\n  }\n\n  return uriA.toLowerCase() === uriB.toLowerCase()\n}\n\n/**\n * @param {Readonly<import('./types/index').URIComponent>} cmpts\n * @param {import('./types/index').Options} [opts]\n * @returns {string}\n */\nfunction serialize (cmpts, opts) {\n  const component = {\n    host: cmpts.host,\n    scheme: cmpts.scheme,\n    userinfo: cmpts.userinfo,\n    port: cmpts.port,\n    path: cmpts.path,\n    query: cmpts.query,\n    nid: cmpts.nid,\n    nss: cmpts.nss,\n    uuid: cmpts.uuid,\n    fragment: cmpts.fragment,\n    reference: cmpts.reference,\n    resourceName: cmpts.resourceName,\n    secure: cmpts.secure,\n    error: ''\n  }\n  const options = Object.assign({}, opts)\n  const uriTokens = []\n\n  // find scheme handler\n  const schemeHandler = getSchemeHandler(options.scheme || component.scheme)\n\n  // perform scheme specific serialization\n  if (schemeHandler && schemeHandler.serialize) schemeHandler.serialize(component, options)\n\n  if (component.path !== undefined) {\n    if (!options.skipEscape) {\n      component.path = escape(component.path)\n\n      if (component.scheme !== undefined) {\n        component.path = component.path.split('%3A').join(':')\n      }\n    } else {\n      component.path = unescape(component.path)\n    }\n  }\n\n  if (options.reference !== 'suffix' && component.scheme) {\n    uriTokens.push(component.scheme, ':')\n  }\n\n  const authority = recomposeAuthority(component)\n  if (authority !== undefined) {\n    if (options.reference !== 'suffix') {\n      uriTokens.push('//')\n    }\n\n    uriTokens.push(authority)\n\n    if (component.path && component.path[0] !== '/') {\n      uriTokens.push('/')\n    }\n  }\n  if (component.path !== undefined) {\n    let s = component.path\n\n    if (!options.absolutePath && (!schemeHandler || !schemeHandler.absolutePath)) {\n      s = removeDotSegments(s)\n    }\n\n    if (\n      authority === undefined &&\n      s[0] === '/' &&\n      s[1] === '/'\n    ) {\n      // don't allow the path to start with \"//\"\n      s = '/%2F' + s.slice(2)\n    }\n\n    uriTokens.push(s)\n  }\n\n  if (component.query !== undefined) {\n    uriTokens.push('?', component.query)\n  }\n\n  if (component.fragment !== undefined) {\n    uriTokens.push('#', component.fragment)\n  }\n  return uriTokens.join('')\n}\n\nconst URI_PARSE = /^(?:([^#/:?]+):)?(?:\\/\\/((?:([^#/?@]*)@)?(\\[[^#/?\\]]+\\]|[^#/:?]*)(?::(\\d*))?))?([^#?]*)(?:\\?([^#]*))?(?:#((?:.|[\\n\\r])*))?/u\n\n/**\n * @param {string} uri\n * @param {import('./types/index').Options} [opts]\n * @returns\n */\nfunction parse (uri, opts) {\n  const options = Object.assign({}, opts)\n  /** @type {import('./types/index').URIComponent} */\n  const parsed = {\n    scheme: undefined,\n    userinfo: undefined,\n    host: '',\n    port: undefined,\n    path: '',\n    query: undefined,\n    fragment: undefined\n  }\n\n  let isIP = false\n  if (options.reference === 'suffix') {\n    if (options.scheme) {\n      uri = options.scheme + ':' + uri\n    } else {\n      uri = '//' + uri\n    }\n  }\n\n  const matches = uri.match(URI_PARSE)\n\n  if (matches) {\n    // store each component\n    parsed.scheme = matches[1]\n    parsed.userinfo = matches[3]\n    parsed.host = matches[4]\n    parsed.port = parseInt(matches[5], 10)\n    parsed.path = matches[6] || ''\n    parsed.query = matches[7]\n    parsed.fragment = matches[8]\n\n    // fix port number\n    if (isNaN(parsed.port)) {\n      parsed.port = matches[5]\n    }\n    if (parsed.host) {\n      const ipv4result = isIPv4(parsed.host)\n      if (ipv4result === false) {\n        const ipv6result = normalizeIPv6(parsed.host)\n        parsed.host = ipv6result.host.toLowerCase()\n        isIP = ipv6result.isIPV6\n      } else {\n        isIP = true\n      }\n    }\n    if (parsed.scheme === undefined && parsed.userinfo === undefined && parsed.host === undefined && parsed.port === undefined && parsed.query === undefined && !parsed.path) {\n      parsed.reference = 'same-document'\n    } else if (parsed.scheme === undefined) {\n      parsed.reference = 'relative'\n    } else if (parsed.fragment === undefined) {\n      parsed.reference = 'absolute'\n    } else {\n      parsed.reference = 'uri'\n    }\n\n    // check for reference errors\n    if (options.reference && options.reference !== 'suffix' && options.reference !== parsed.reference) {\n      parsed.error = parsed.error || 'URI is not a ' + options.reference + ' reference.'\n    }\n\n    // find scheme handler\n    const schemeHandler = getSchemeHandler(options.scheme || parsed.scheme)\n\n    // check if scheme can't handle IRIs\n    if (!options.unicodeSupport && (!schemeHandler || !schemeHandler.unicodeSupport)) {\n      // if host component is a domain name\n      if (parsed.host && (options.domainHost || (schemeHandler && schemeHandler.domainHost)) && isIP === false && nonSimpleDomain(parsed.host)) {\n        // convert Unicode IDN -> ASCII IDN\n        try {\n          parsed.host = URL.domainToASCII(parsed.host.toLowerCase())\n        } catch (e) {\n          parsed.error = parsed.error || \"Host's domain name can not be converted to ASCII: \" + e\n        }\n      }\n      // convert IRI -> URI\n    }\n\n    if (!schemeHandler || (schemeHandler && !schemeHandler.skipNormalize)) {\n      if (uri.indexOf('%') !== -1) {\n        if (parsed.scheme !== undefined) {\n          parsed.scheme = unescape(parsed.scheme)\n        }\n        if (parsed.host !== undefined) {\n          parsed.host = unescape(parsed.host)\n        }\n      }\n      if (parsed.path) {\n        parsed.path = escape(unescape(parsed.path))\n      }\n      if (parsed.fragment) {\n        parsed.fragment = encodeURI(decodeURIComponent(parsed.fragment))\n      }\n    }\n\n    // perform scheme specific parsing\n    if (schemeHandler && schemeHandler.parse) {\n      schemeHandler.parse(parsed, options)\n    }\n  } else {\n    parsed.error = parsed.error || 'URI can not be parsed.'\n  }\n  return parsed\n}\n\nconst fastUri = {\n  SCHEMES,\n  normalize,\n  resolve,\n  resolveComponent,\n  equal,\n  serialize,\n  parse\n}\n\nmodule.exports = fastUri\nmodule.exports.default = fastUri\nmodule.exports.fastUri = fastUri\n","'use strict'\n\nconst { isUUID } = require('./utils')\nconst URN_REG = /([\\da-z][\\d\\-a-z]{0,31}):((?:[\\w!$'()*+,\\-.:;=@]|%[\\da-f]{2})+)/iu\n\nconst supportedSchemeNames = /** @type {const} */ (['http', 'https', 'ws',\n  'wss', 'urn', 'urn:uuid'])\n\n/** @typedef {supportedSchemeNames[number]} SchemeName */\n\n/**\n * @param {string} name\n * @returns {name is SchemeName}\n */\nfunction isValidSchemeName (name) {\n  return supportedSchemeNames.indexOf(/** @type {*} */ (name)) !== -1\n}\n\n/**\n * @callback SchemeFn\n * @param {import('../types/index').URIComponent} component\n * @param {import('../types/index').Options} options\n * @returns {import('../types/index').URIComponent}\n */\n\n/**\n * @typedef {Object} SchemeHandler\n * @property {SchemeName} scheme - The scheme name.\n * @property {boolean} [domainHost] - Indicates if the scheme supports domain hosts.\n * @property {SchemeFn} parse - Function to parse the URI component for this scheme.\n * @property {SchemeFn} serialize - Function to serialize the URI component for this scheme.\n * @property {boolean} [skipNormalize] - Indicates if normalization should be skipped for this scheme.\n * @property {boolean} [absolutePath] - Indicates if the scheme uses absolute paths.\n * @property {boolean} [unicodeSupport] - Indicates if the scheme supports Unicode.\n */\n\n/**\n * @param {import('../types/index').URIComponent} wsComponent\n * @returns {boolean}\n */\nfunction wsIsSecure (wsComponent) {\n  if (wsComponent.secure === true) {\n    return true\n  } else if (wsComponent.secure === false) {\n    return false\n  } else if (wsComponent.scheme) {\n    return (\n      wsComponent.scheme.length === 3 &&\n      (wsComponent.scheme[0] === 'w' || wsComponent.scheme[0] === 'W') &&\n      (wsComponent.scheme[1] === 's' || wsComponent.scheme[1] === 'S') &&\n      (wsComponent.scheme[2] === 's' || wsComponent.scheme[2] === 'S')\n    )\n  } else {\n    return false\n  }\n}\n\n/** @type {SchemeFn} */\nfunction httpParse (component) {\n  if (!component.host) {\n    component.error = component.error || 'HTTP URIs must have a host.'\n  }\n\n  return component\n}\n\n/** @type {SchemeFn} */\nfunction httpSerialize (component) {\n  const secure = String(component.scheme).toLowerCase() === 'https'\n\n  // normalize the default port\n  if (component.port === (secure ? 443 : 80) || component.port === '') {\n    component.port = undefined\n  }\n\n  // normalize the empty path\n  if (!component.path) {\n    component.path = '/'\n  }\n\n  // NOTE: We do not parse query strings for HTTP URIs\n  // as WWW Form Url Encoded query strings are part of the HTML4+ spec,\n  // and not the HTTP spec.\n\n  return component\n}\n\n/** @type {SchemeFn} */\nfunction wsParse (wsComponent) {\n// indicate if the secure flag is set\n  wsComponent.secure = wsIsSecure(wsComponent)\n\n  // construct resouce name\n  wsComponent.resourceName = (wsComponent.path || '/') + (wsComponent.query ? '?' + wsComponent.query : '')\n  wsComponent.path = undefined\n  wsComponent.query = undefined\n\n  return wsComponent\n}\n\n/** @type {SchemeFn} */\nfunction wsSerialize (wsComponent) {\n// normalize the default port\n  if (wsComponent.port === (wsIsSecure(wsComponent) ? 443 : 80) || wsComponent.port === '') {\n    wsComponent.port = undefined\n  }\n\n  // ensure scheme matches secure flag\n  if (typeof wsComponent.secure === 'boolean') {\n    wsComponent.scheme = (wsComponent.secure ? 'wss' : 'ws')\n    wsComponent.secure = undefined\n  }\n\n  // reconstruct path from resource name\n  if (wsComponent.resourceName) {\n    const [path, query] = wsComponent.resourceName.split('?')\n    wsComponent.path = (path && path !== '/' ? path : undefined)\n    wsComponent.query = query\n    wsComponent.resourceName = undefined\n  }\n\n  // forbid fragment component\n  wsComponent.fragment = undefined\n\n  return wsComponent\n}\n\n/** @type {SchemeFn} */\nfunction urnParse (urnComponent, options) {\n  if (!urnComponent.path) {\n    urnComponent.error = 'URN can not be parsed'\n    return urnComponent\n  }\n  const matches = urnComponent.path.match(URN_REG)\n  if (matches) {\n    const scheme = options.scheme || urnComponent.scheme || 'urn'\n    urnComponent.nid = matches[1].toLowerCase()\n    urnComponent.nss = matches[2]\n    const urnScheme = `${scheme}:${options.nid || urnComponent.nid}`\n    const schemeHandler = getSchemeHandler(urnScheme)\n    urnComponent.path = undefined\n\n    if (schemeHandler) {\n      urnComponent = schemeHandler.parse(urnComponent, options)\n    }\n  } else {\n    urnComponent.error = urnComponent.error || 'URN can not be parsed.'\n  }\n\n  return urnComponent\n}\n\n/** @type {SchemeFn} */\nfunction urnSerialize (urnComponent, options) {\n  if (urnComponent.nid === undefined) {\n    throw new Error('URN without nid cannot be serialized')\n  }\n  const scheme = options.scheme || urnComponent.scheme || 'urn'\n  const nid = urnComponent.nid.toLowerCase()\n  const urnScheme = `${scheme}:${options.nid || nid}`\n  const schemeHandler = getSchemeHandler(urnScheme)\n\n  if (schemeHandler) {\n    urnComponent = schemeHandler.serialize(urnComponent, options)\n  }\n\n  const uriComponent = urnComponent\n  const nss = urnComponent.nss\n  uriComponent.path = `${nid || options.nid}:${nss}`\n\n  options.skipEscape = true\n  return uriComponent\n}\n\n/** @type {SchemeFn} */\nfunction urnuuidParse (urnComponent, options) {\n  const uuidComponent = urnComponent\n  uuidComponent.uuid = uuidComponent.nss\n  uuidComponent.nss = undefined\n\n  if (!options.tolerant && (!uuidComponent.uuid || !isUUID(uuidComponent.uuid))) {\n    uuidComponent.error = uuidComponent.error || 'UUID is not valid.'\n  }\n\n  return uuidComponent\n}\n\n/** @type {SchemeFn} */\nfunction urnuuidSerialize (uuidComponent) {\n  const urnComponent = uuidComponent\n  // normalize UUID\n  urnComponent.nss = (uuidComponent.uuid || '').toLowerCase()\n  return urnComponent\n}\n\nconst http = /** @type {SchemeHandler} */ ({\n  scheme: 'http',\n  domainHost: true,\n  parse: httpParse,\n  serialize: httpSerialize\n})\n\nconst https = /** @type {SchemeHandler} */ ({\n  scheme: 'https',\n  domainHost: http.domainHost,\n  parse: httpParse,\n  serialize: httpSerialize\n})\n\nconst ws = /** @type {SchemeHandler} */ ({\n  scheme: 'ws',\n  domainHost: true,\n  parse: wsParse,\n  serialize: wsSerialize\n})\n\nconst wss = /** @type {SchemeHandler} */ ({\n  scheme: 'wss',\n  domainHost: ws.domainHost,\n  parse: ws.parse,\n  serialize: ws.serialize\n})\n\nconst urn = /** @type {SchemeHandler} */ ({\n  scheme: 'urn',\n  parse: urnParse,\n  serialize: urnSerialize,\n  skipNormalize: true\n})\n\nconst urnuuid = /** @type {SchemeHandler} */ ({\n  scheme: 'urn:uuid',\n  parse: urnuuidParse,\n  serialize: urnuuidSerialize,\n  skipNormalize: true\n})\n\nconst SCHEMES = /** @type {Record<SchemeName, SchemeHandler>} */ ({\n  http,\n  https,\n  ws,\n  wss,\n  urn,\n  'urn:uuid': urnuuid\n})\n\nObject.setPrototypeOf(SCHEMES, null)\n\n/**\n * @param {string|undefined} scheme\n * @returns {SchemeHandler|undefined}\n */\nfunction getSchemeHandler (scheme) {\n  return (\n    scheme && (\n      SCHEMES[/** @type {SchemeName} */ (scheme)] ||\n      SCHEMES[/** @type {SchemeName} */(scheme.toLowerCase())])\n  ) ||\n    undefined\n}\n\nmodule.exports = {\n  wsIsSecure,\n  SCHEMES,\n  isValidSchemeName,\n  getSchemeHandler,\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CodeGen = exports.Name = exports.nil = exports.stringify = exports.str = exports._ = exports.KeywordCxt = void 0;\nvar validate_1 = require(\"./compile/validate\");\nObject.defineProperty(exports, \"KeywordCxt\", { enumerable: true, get: function () { return validate_1.KeywordCxt; } });\nvar codegen_1 = require(\"./compile/codegen\");\nObject.defineProperty(exports, \"_\", { enumerable: true, get: function () { return codegen_1._; } });\nObject.defineProperty(exports, \"str\", { enumerable: true, get: function () { return codegen_1.str; } });\nObject.defineProperty(exports, \"stringify\", { enumerable: true, get: function () { return codegen_1.stringify; } });\nObject.defineProperty(exports, \"nil\", { enumerable: true, get: function () { return codegen_1.nil; } });\nObject.defineProperty(exports, \"Name\", { enumerable: true, get: function () { return codegen_1.Name; } });\nObject.defineProperty(exports, \"CodeGen\", { enumerable: true, get: function () { return codegen_1.CodeGen; } });\nconst validation_error_1 = require(\"./runtime/validation_error\");\nconst ref_error_1 = require(\"./compile/ref_error\");\nconst rules_1 = require(\"./compile/rules\");\nconst compile_1 = require(\"./compile\");\nconst codegen_2 = require(\"./compile/codegen\");\nconst resolve_1 = require(\"./compile/resolve\");\nconst dataType_1 = require(\"./compile/validate/dataType\");\nconst util_1 = require(\"./compile/util\");\nconst $dataRefSchema = require(\"./refs/data.json\");\nconst uri_1 = require(\"./runtime/uri\");\nconst defaultRegExp = (str, flags) => new RegExp(str, flags);\ndefaultRegExp.code = \"new RegExp\";\nconst META_IGNORE_OPTIONS = [\"removeAdditional\", \"useDefaults\", \"coerceTypes\"];\nconst EXT_SCOPE_NAMES = new Set([\n    \"validate\",\n    \"serialize\",\n    \"parse\",\n    \"wrapper\",\n    \"root\",\n    \"schema\",\n    \"keyword\",\n    \"pattern\",\n    \"formats\",\n    \"validate$data\",\n    \"func\",\n    \"obj\",\n    \"Error\",\n]);\nconst removedOptions = {\n    errorDataPath: \"\",\n    format: \"`validateFormats: false` can be used instead.\",\n    nullable: '\"nullable\" keyword is supported by default.',\n    jsonPointers: \"Deprecated jsPropertySyntax can be used instead.\",\n    extendRefs: \"Deprecated ignoreKeywordsWithRef can be used instead.\",\n    missingRefs: \"Pass empty schema with $id that should be ignored to ajv.addSchema.\",\n    processCode: \"Use option `code: {process: (code, schemaEnv: object) => string}`\",\n    sourceCode: \"Use option `code: {source: true}`\",\n    strictDefaults: \"It is default now, see option `strict`.\",\n    strictKeywords: \"It is default now, see option `strict`.\",\n    uniqueItems: '\"uniqueItems\" keyword is always validated.',\n    unknownFormats: \"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).\",\n    cache: \"Map is used as cache, schema object as key.\",\n    serialize: \"Map is used as cache, schema object as key.\",\n    ajvErrors: \"It is default now.\",\n};\nconst deprecatedOptions = {\n    ignoreKeywordsWithRef: \"\",\n    jsPropertySyntax: \"\",\n    unicode: '\"minLength\"/\"maxLength\" account for unicode characters by default.',\n};\nconst MAX_EXPRESSION = 200;\n// eslint-disable-next-line complexity\nfunction requiredOptions(o) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0;\n    const s = o.strict;\n    const _optz = (_a = o.code) === null || _a === void 0 ? void 0 : _a.optimize;\n    const optimize = _optz === true || _optz === undefined ? 1 : _optz || 0;\n    const regExp = (_c = (_b = o.code) === null || _b === void 0 ? void 0 : _b.regExp) !== null && _c !== void 0 ? _c : defaultRegExp;\n    const uriResolver = (_d = o.uriResolver) !== null && _d !== void 0 ? _d : uri_1.default;\n    return {\n        strictSchema: (_f = (_e = o.strictSchema) !== null && _e !== void 0 ? _e : s) !== null && _f !== void 0 ? _f : true,\n        strictNumbers: (_h = (_g = o.strictNumbers) !== null && _g !== void 0 ? _g : s) !== null && _h !== void 0 ? _h : true,\n        strictTypes: (_k = (_j = o.strictTypes) !== null && _j !== void 0 ? _j : s) !== null && _k !== void 0 ? _k : \"log\",\n        strictTuples: (_m = (_l = o.strictTuples) !== null && _l !== void 0 ? _l : s) !== null && _m !== void 0 ? _m : \"log\",\n        strictRequired: (_p = (_o = o.strictRequired) !== null && _o !== void 0 ? _o : s) !== null && _p !== void 0 ? _p : false,\n        code: o.code ? { ...o.code, optimize, regExp } : { optimize, regExp },\n        loopRequired: (_q = o.loopRequired) !== null && _q !== void 0 ? _q : MAX_EXPRESSION,\n        loopEnum: (_r = o.loopEnum) !== null && _r !== void 0 ? _r : MAX_EXPRESSION,\n        meta: (_s = o.meta) !== null && _s !== void 0 ? _s : true,\n        messages: (_t = o.messages) !== null && _t !== void 0 ? _t : true,\n        inlineRefs: (_u = o.inlineRefs) !== null && _u !== void 0 ? _u : true,\n        schemaId: (_v = o.schemaId) !== null && _v !== void 0 ? _v : \"$id\",\n        addUsedSchema: (_w = o.addUsedSchema) !== null && _w !== void 0 ? _w : true,\n        validateSchema: (_x = o.validateSchema) !== null && _x !== void 0 ? _x : true,\n        validateFormats: (_y = o.validateFormats) !== null && _y !== void 0 ? _y : true,\n        unicodeRegExp: (_z = o.unicodeRegExp) !== null && _z !== void 0 ? _z : true,\n        int32range: (_0 = o.int32range) !== null && _0 !== void 0 ? _0 : true,\n        uriResolver: uriResolver,\n    };\n}\nclass Ajv {\n    constructor(opts = {}) {\n        this.schemas = {};\n        this.refs = {};\n        this.formats = {};\n        this._compilations = new Set();\n        this._loading = {};\n        this._cache = new Map();\n        opts = this.opts = { ...opts, ...requiredOptions(opts) };\n        const { es5, lines } = this.opts.code;\n        this.scope = new codegen_2.ValueScope({ scope: {}, prefixes: EXT_SCOPE_NAMES, es5, lines });\n        this.logger = getLogger(opts.logger);\n        const formatOpt = opts.validateFormats;\n        opts.validateFormats = false;\n        this.RULES = (0, rules_1.getRules)();\n        checkOptions.call(this, removedOptions, opts, \"NOT SUPPORTED\");\n        checkOptions.call(this, deprecatedOptions, opts, \"DEPRECATED\", \"warn\");\n        this._metaOpts = getMetaSchemaOptions.call(this);\n        if (opts.formats)\n            addInitialFormats.call(this);\n        this._addVocabularies();\n        this._addDefaultMetaSchema();\n        if (opts.keywords)\n            addInitialKeywords.call(this, opts.keywords);\n        if (typeof opts.meta == \"object\")\n            this.addMetaSchema(opts.meta);\n        addInitialSchemas.call(this);\n        opts.validateFormats = formatOpt;\n    }\n    _addVocabularies() {\n        this.addKeyword(\"$async\");\n    }\n    _addDefaultMetaSchema() {\n        const { $data, meta, schemaId } = this.opts;\n        let _dataRefSchema = $dataRefSchema;\n        if (schemaId === \"id\") {\n            _dataRefSchema = { ...$dataRefSchema };\n            _dataRefSchema.id = _dataRefSchema.$id;\n            delete _dataRefSchema.$id;\n        }\n        if (meta && $data)\n            this.addMetaSchema(_dataRefSchema, _dataRefSchema[schemaId], false);\n    }\n    defaultMeta() {\n        const { meta, schemaId } = this.opts;\n        return (this.opts.defaultMeta = typeof meta == \"object\" ? meta[schemaId] || meta : undefined);\n    }\n    validate(schemaKeyRef, // key, ref or schema object\n    // eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\n    data // to be validated\n    ) {\n        let v;\n        if (typeof schemaKeyRef == \"string\") {\n            v = this.getSchema(schemaKeyRef);\n            if (!v)\n                throw new Error(`no schema with key or ref \"${schemaKeyRef}\"`);\n        }\n        else {\n            v = this.compile(schemaKeyRef);\n        }\n        const valid = v(data);\n        if (!(\"$async\" in v))\n            this.errors = v.errors;\n        return valid;\n    }\n    compile(schema, _meta) {\n        const sch = this._addSchema(schema, _meta);\n        return (sch.validate || this._compileSchemaEnv(sch));\n    }\n    compileAsync(schema, meta) {\n        if (typeof this.opts.loadSchema != \"function\") {\n            throw new Error(\"options.loadSchema should be a function\");\n        }\n        const { loadSchema } = this.opts;\n        return runCompileAsync.call(this, schema, meta);\n        async function runCompileAsync(_schema, _meta) {\n            await loadMetaSchema.call(this, _schema.$schema);\n            const sch = this._addSchema(_schema, _meta);\n            return sch.validate || _compileAsync.call(this, sch);\n        }\n        async function loadMetaSchema($ref) {\n            if ($ref && !this.getSchema($ref)) {\n                await runCompileAsync.call(this, { $ref }, true);\n            }\n        }\n        async function _compileAsync(sch) {\n            try {\n                return this._compileSchemaEnv(sch);\n            }\n            catch (e) {\n                if (!(e instanceof ref_error_1.default))\n                    throw e;\n                checkLoaded.call(this, e);\n                await loadMissingSchema.call(this, e.missingSchema);\n                return _compileAsync.call(this, sch);\n            }\n        }\n        function checkLoaded({ missingSchema: ref, missingRef }) {\n            if (this.refs[ref]) {\n                throw new Error(`AnySchema ${ref} is loaded but ${missingRef} cannot be resolved`);\n            }\n        }\n        async function loadMissingSchema(ref) {\n            const _schema = await _loadSchema.call(this, ref);\n            if (!this.refs[ref])\n                await loadMetaSchema.call(this, _schema.$schema);\n            if (!this.refs[ref])\n                this.addSchema(_schema, ref, meta);\n        }\n        async function _loadSchema(ref) {\n            const p = this._loading[ref];\n            if (p)\n                return p;\n            try {\n                return await (this._loading[ref] = loadSchema(ref));\n            }\n            finally {\n                delete this._loading[ref];\n            }\n        }\n    }\n    // Adds schema to the instance\n    addSchema(schema, // If array is passed, `key` will be ignored\n    key, // Optional schema key. Can be passed to `validate` method instead of schema object or id/ref. One schema per instance can have empty `id` and `key`.\n    _meta, // true if schema is a meta-schema. Used internally, addMetaSchema should be used instead.\n    _validateSchema = this.opts.validateSchema // false to skip schema validation. Used internally, option validateSchema should be used instead.\n    ) {\n        if (Array.isArray(schema)) {\n            for (const sch of schema)\n                this.addSchema(sch, undefined, _meta, _validateSchema);\n            return this;\n        }\n        let id;\n        if (typeof schema === \"object\") {\n            const { schemaId } = this.opts;\n            id = schema[schemaId];\n            if (id !== undefined && typeof id != \"string\") {\n                throw new Error(`schema ${schemaId} must be string`);\n            }\n        }\n        key = (0, resolve_1.normalizeId)(key || id);\n        this._checkUnique(key);\n        this.schemas[key] = this._addSchema(schema, _meta, key, _validateSchema, true);\n        return this;\n    }\n    // Add schema that will be used to validate other schemas\n    // options in META_IGNORE_OPTIONS are alway set to false\n    addMetaSchema(schema, key, // schema key\n    _validateSchema = this.opts.validateSchema // false to skip schema validation, can be used to override validateSchema option for meta-schema\n    ) {\n        this.addSchema(schema, key, true, _validateSchema);\n        return this;\n    }\n    //  Validate schema against its meta-schema\n    validateSchema(schema, throwOrLogError) {\n        if (typeof schema == \"boolean\")\n            return true;\n        let $schema;\n        $schema = schema.$schema;\n        if ($schema !== undefined && typeof $schema != \"string\") {\n            throw new Error(\"$schema must be a string\");\n        }\n        $schema = $schema || this.opts.defaultMeta || this.defaultMeta();\n        if (!$schema) {\n            this.logger.warn(\"meta-schema not available\");\n            this.errors = null;\n            return true;\n        }\n        const valid = this.validate($schema, schema);\n        if (!valid && throwOrLogError) {\n            const message = \"schema is invalid: \" + this.errorsText();\n            if (this.opts.validateSchema === \"log\")\n                this.logger.error(message);\n            else\n                throw new Error(message);\n        }\n        return valid;\n    }\n    // Get compiled schema by `key` or `ref`.\n    // (`key` that was passed to `addSchema` or full schema reference - `schema.$id` or resolved id)\n    getSchema(keyRef) {\n        let sch;\n        while (typeof (sch = getSchEnv.call(this, keyRef)) == \"string\")\n            keyRef = sch;\n        if (sch === undefined) {\n            const { schemaId } = this.opts;\n            const root = new compile_1.SchemaEnv({ schema: {}, schemaId });\n            sch = compile_1.resolveSchema.call(this, root, keyRef);\n            if (!sch)\n                return;\n            this.refs[keyRef] = sch;\n        }\n        return (sch.validate || this._compileSchemaEnv(sch));\n    }\n    // Remove cached schema(s).\n    // If no parameter is passed all schemas but meta-schemas are removed.\n    // If RegExp is passed all schemas with key/id matching pattern but meta-schemas are removed.\n    // Even if schema is referenced by other schemas it still can be removed as other schemas have local references.\n    removeSchema(schemaKeyRef) {\n        if (schemaKeyRef instanceof RegExp) {\n            this._removeAllSchemas(this.schemas, schemaKeyRef);\n            this._removeAllSchemas(this.refs, schemaKeyRef);\n            return this;\n        }\n        switch (typeof schemaKeyRef) {\n            case \"undefined\":\n                this._removeAllSchemas(this.schemas);\n                this._removeAllSchemas(this.refs);\n                this._cache.clear();\n                return this;\n            case \"string\": {\n                const sch = getSchEnv.call(this, schemaKeyRef);\n                if (typeof sch == \"object\")\n                    this._cache.delete(sch.schema);\n                delete this.schemas[schemaKeyRef];\n                delete this.refs[schemaKeyRef];\n                return this;\n            }\n            case \"object\": {\n                const cacheKey = schemaKeyRef;\n                this._cache.delete(cacheKey);\n                let id = schemaKeyRef[this.opts.schemaId];\n                if (id) {\n                    id = (0, resolve_1.normalizeId)(id);\n                    delete this.schemas[id];\n                    delete this.refs[id];\n                }\n                return this;\n            }\n            default:\n                throw new Error(\"ajv.removeSchema: invalid parameter\");\n        }\n    }\n    // add \"vocabulary\" - a collection of keywords\n    addVocabulary(definitions) {\n        for (const def of definitions)\n            this.addKeyword(def);\n        return this;\n    }\n    addKeyword(kwdOrDef, def // deprecated\n    ) {\n        let keyword;\n        if (typeof kwdOrDef == \"string\") {\n            keyword = kwdOrDef;\n            if (typeof def == \"object\") {\n                this.logger.warn(\"these parameters are deprecated, see docs for addKeyword\");\n                def.keyword = keyword;\n            }\n        }\n        else if (typeof kwdOrDef == \"object\" && def === undefined) {\n            def = kwdOrDef;\n            keyword = def.keyword;\n            if (Array.isArray(keyword) && !keyword.length) {\n                throw new Error(\"addKeywords: keyword must be string or non-empty array\");\n            }\n        }\n        else {\n            throw new Error(\"invalid addKeywords parameters\");\n        }\n        checkKeyword.call(this, keyword, def);\n        if (!def) {\n            (0, util_1.eachItem)(keyword, (kwd) => addRule.call(this, kwd));\n            return this;\n        }\n        keywordMetaschema.call(this, def);\n        const definition = {\n            ...def,\n            type: (0, dataType_1.getJSONTypes)(def.type),\n            schemaType: (0, dataType_1.getJSONTypes)(def.schemaType),\n        };\n        (0, util_1.eachItem)(keyword, definition.type.length === 0\n            ? (k) => addRule.call(this, k, definition)\n            : (k) => definition.type.forEach((t) => addRule.call(this, k, definition, t)));\n        return this;\n    }\n    getKeyword(keyword) {\n        const rule = this.RULES.all[keyword];\n        return typeof rule == \"object\" ? rule.definition : !!rule;\n    }\n    // Remove keyword\n    removeKeyword(keyword) {\n        // TODO return type should be Ajv\n        const { RULES } = this;\n        delete RULES.keywords[keyword];\n        delete RULES.all[keyword];\n        for (const group of RULES.rules) {\n            const i = group.rules.findIndex((rule) => rule.keyword === keyword);\n            if (i >= 0)\n                group.rules.splice(i, 1);\n        }\n        return this;\n    }\n    // Add format\n    addFormat(name, format) {\n        if (typeof format == \"string\")\n            format = new RegExp(format);\n        this.formats[name] = format;\n        return this;\n    }\n    errorsText(errors = this.errors, // optional array of validation errors\n    { separator = \", \", dataVar = \"data\" } = {} // optional options with properties `separator` and `dataVar`\n    ) {\n        if (!errors || errors.length === 0)\n            return \"No errors\";\n        return errors\n            .map((e) => `${dataVar}${e.instancePath} ${e.message}`)\n            .reduce((text, msg) => text + separator + msg);\n    }\n    $dataMetaSchema(metaSchema, keywordsJsonPointers) {\n        const rules = this.RULES.all;\n        metaSchema = JSON.parse(JSON.stringify(metaSchema));\n        for (const jsonPointer of keywordsJsonPointers) {\n            const segments = jsonPointer.split(\"/\").slice(1); // first segment is an empty string\n            let keywords = metaSchema;\n            for (const seg of segments)\n                keywords = keywords[seg];\n            for (const key in rules) {\n                const rule = rules[key];\n                if (typeof rule != \"object\")\n                    continue;\n                const { $data } = rule.definition;\n                const schema = keywords[key];\n                if ($data && schema)\n                    keywords[key] = schemaOrData(schema);\n            }\n        }\n        return metaSchema;\n    }\n    _removeAllSchemas(schemas, regex) {\n        for (const keyRef in schemas) {\n            const sch = schemas[keyRef];\n            if (!regex || regex.test(keyRef)) {\n                if (typeof sch == \"string\") {\n                    delete schemas[keyRef];\n                }\n                else if (sch && !sch.meta) {\n                    this._cache.delete(sch.schema);\n                    delete schemas[keyRef];\n                }\n            }\n        }\n    }\n    _addSchema(schema, meta, baseId, validateSchema = this.opts.validateSchema, addSchema = this.opts.addUsedSchema) {\n        let id;\n        const { schemaId } = this.opts;\n        if (typeof schema == \"object\") {\n            id = schema[schemaId];\n        }\n        else {\n            if (this.opts.jtd)\n                throw new Error(\"schema must be object\");\n            else if (typeof schema != \"boolean\")\n                throw new Error(\"schema must be object or boolean\");\n        }\n        let sch = this._cache.get(schema);\n        if (sch !== undefined)\n            return sch;\n        baseId = (0, resolve_1.normalizeId)(id || baseId);\n        const localRefs = resolve_1.getSchemaRefs.call(this, schema, baseId);\n        sch = new compile_1.SchemaEnv({ schema, schemaId, meta, baseId, localRefs });\n        this._cache.set(sch.schema, sch);\n        if (addSchema && !baseId.startsWith(\"#\")) {\n            // TODO atm it is allowed to overwrite schemas without id (instead of not adding them)\n            if (baseId)\n                this._checkUnique(baseId);\n            this.refs[baseId] = sch;\n        }\n        if (validateSchema)\n            this.validateSchema(schema, true);\n        return sch;\n    }\n    _checkUnique(id) {\n        if (this.schemas[id] || this.refs[id]) {\n            throw new Error(`schema with key or id \"${id}\" already exists`);\n        }\n    }\n    _compileSchemaEnv(sch) {\n        if (sch.meta)\n            this._compileMetaSchema(sch);\n        else\n            compile_1.compileSchema.call(this, sch);\n        /* istanbul ignore if */\n        if (!sch.validate)\n            throw new Error(\"ajv implementation error\");\n        return sch.validate;\n    }\n    _compileMetaSchema(sch) {\n        const currentOpts = this.opts;\n        this.opts = this._metaOpts;\n        try {\n            compile_1.compileSchema.call(this, sch);\n        }\n        finally {\n            this.opts = currentOpts;\n        }\n    }\n}\nAjv.ValidationError = validation_error_1.default;\nAjv.MissingRefError = ref_error_1.default;\nexports.default = Ajv;\nfunction checkOptions(checkOpts, options, msg, log = \"error\") {\n    for (const key in checkOpts) {\n        const opt = key;\n        if (opt in options)\n            this.logger[log](`${msg}: option ${key}. ${checkOpts[opt]}`);\n    }\n}\nfunction getSchEnv(keyRef) {\n    keyRef = (0, resolve_1.normalizeId)(keyRef); // TODO tests fail without this line\n    return this.schemas[keyRef] || this.refs[keyRef];\n}\nfunction addInitialSchemas() {\n    const optsSchemas = this.opts.schemas;\n    if (!optsSchemas)\n        return;\n    if (Array.isArray(optsSchemas))\n        this.addSchema(optsSchemas);\n    else\n        for (const key in optsSchemas)\n            this.addSchema(optsSchemas[key], key);\n}\nfunction addInitialFormats() {\n    for (const name in this.opts.formats) {\n        const format = this.opts.formats[name];\n        if (format)\n            this.addFormat(name, format);\n    }\n}\nfunction addInitialKeywords(defs) {\n    if (Array.isArray(defs)) {\n        this.addVocabulary(defs);\n        return;\n    }\n    this.logger.warn(\"keywords option as map is deprecated, pass array\");\n    for (const keyword in defs) {\n        const def = defs[keyword];\n        if (!def.keyword)\n            def.keyword = keyword;\n        this.addKeyword(def);\n    }\n}\nfunction getMetaSchemaOptions() {\n    const metaOpts = { ...this.opts };\n    for (const opt of META_IGNORE_OPTIONS)\n        delete metaOpts[opt];\n    return metaOpts;\n}\nconst noLogs = { log() { }, warn() { }, error() { } };\nfunction getLogger(logger) {\n    if (logger === false)\n        return noLogs;\n    if (logger === undefined)\n        return console;\n    if (logger.log && logger.warn && logger.error)\n        return logger;\n    throw new Error(\"logger must implement log, warn and error methods\");\n}\nconst KEYWORD_NAME = /^[a-z_$][a-z0-9_$:-]*$/i;\nfunction checkKeyword(keyword, def) {\n    const { RULES } = this;\n    (0, util_1.eachItem)(keyword, (kwd) => {\n        if (RULES.keywords[kwd])\n            throw new Error(`Keyword ${kwd} is already defined`);\n        if (!KEYWORD_NAME.test(kwd))\n            throw new Error(`Keyword ${kwd} has invalid name`);\n    });\n    if (!def)\n        return;\n    if (def.$data && !(\"code\" in def || \"validate\" in def)) {\n        throw new Error('$data keyword must have \"code\" or \"validate\" function');\n    }\n}\nfunction addRule(keyword, definition, dataType) {\n    var _a;\n    const post = definition === null || definition === void 0 ? void 0 : definition.post;\n    if (dataType && post)\n        throw new Error('keyword with \"post\" flag cannot have \"type\"');\n    const { RULES } = this;\n    let ruleGroup = post ? RULES.post : RULES.rules.find(({ type: t }) => t === dataType);\n    if (!ruleGroup) {\n        ruleGroup = { type: dataType, rules: [] };\n        RULES.rules.push(ruleGroup);\n    }\n    RULES.keywords[keyword] = true;\n    if (!definition)\n        return;\n    const rule = {\n        keyword,\n        definition: {\n            ...definition,\n            type: (0, dataType_1.getJSONTypes)(definition.type),\n            schemaType: (0, dataType_1.getJSONTypes)(definition.schemaType),\n        },\n    };\n    if (definition.before)\n        addBeforeRule.call(this, ruleGroup, rule, definition.before);\n    else\n        ruleGroup.rules.push(rule);\n    RULES.all[keyword] = rule;\n    (_a = definition.implements) === null || _a === void 0 ? void 0 : _a.forEach((kwd) => this.addKeyword(kwd));\n}\nfunction addBeforeRule(ruleGroup, rule, before) {\n    const i = ruleGroup.rules.findIndex((_rule) => _rule.keyword === before);\n    if (i >= 0) {\n        ruleGroup.rules.splice(i, 0, rule);\n    }\n    else {\n        ruleGroup.rules.push(rule);\n        this.logger.warn(`rule ${before} is not defined`);\n    }\n}\nfunction keywordMetaschema(def) {\n    let { metaSchema } = def;\n    if (metaSchema === undefined)\n        return;\n    if (def.$data && this.opts.$data)\n        metaSchema = schemaOrData(metaSchema);\n    def.validateSchema = this.compile(metaSchema, true);\n}\nconst $dataRef = {\n    $ref: \"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#\",\n};\nfunction schemaOrData(schema) {\n    return { anyOf: [schema, $dataRef] };\n}\n//# sourceMappingURL=core.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst uri = require(\"fast-uri\");\nuri.code = 'require(\"ajv/dist/runtime/uri\").default';\nexports.default = uri;\n//# sourceMappingURL=uri.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst id_1 = require(\"./id\");\nconst ref_1 = require(\"./ref\");\nconst core = [\n    \"$schema\",\n    \"$id\",\n    \"$defs\",\n    \"$vocabulary\",\n    { keyword: \"$comment\" },\n    \"definitions\",\n    id_1.default,\n    ref_1.default,\n];\nexports.default = core;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst def = {\n    keyword: \"id\",\n    code() {\n        throw new Error('NOT SUPPORTED: keyword \"id\", use \"$id\" for schema ID');\n    },\n};\nexports.default = def;\n//# sourceMappingURL=id.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.callRef = exports.getValidate = void 0;\nconst ref_error_1 = require(\"../../compile/ref_error\");\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst names_1 = require(\"../../compile/names\");\nconst compile_1 = require(\"../../compile\");\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"$ref\",\n    schemaType: \"string\",\n    code(cxt) {\n        const { gen, schema: $ref, it } = cxt;\n        const { baseId, schemaEnv: env, validateName, opts, self } = it;\n        const { root } = env;\n        if (($ref === \"#\" || $ref === \"#/\") && baseId === root.baseId)\n            return callRootRef();\n        const schOrEnv = compile_1.resolveRef.call(self, root, baseId, $ref);\n        if (schOrEnv === undefined)\n            throw new ref_error_1.default(it.opts.uriResolver, baseId, $ref);\n        if (schOrEnv instanceof compile_1.SchemaEnv)\n            return callValidate(schOrEnv);\n        return inlineRefSchema(schOrEnv);\n        function callRootRef() {\n            if (env === root)\n                return callRef(cxt, validateName, env, env.$async);\n            const rootName = gen.scopeValue(\"root\", { ref: root });\n            return callRef(cxt, (0, codegen_1._) `${rootName}.validate`, root, root.$async);\n        }\n        function callValidate(sch) {\n            const v = getValidate(cxt, sch);\n            callRef(cxt, v, sch, sch.$async);\n        }\n        function inlineRefSchema(sch) {\n            const schName = gen.scopeValue(\"schema\", opts.code.source === true ? { ref: sch, code: (0, codegen_1.stringify)(sch) } : { ref: sch });\n            const valid = gen.name(\"valid\");\n            const schCxt = cxt.subschema({\n                schema: sch,\n                dataTypes: [],\n                schemaPath: codegen_1.nil,\n                topSchemaRef: schName,\n                errSchemaPath: $ref,\n            }, valid);\n            cxt.mergeEvaluated(schCxt);\n            cxt.ok(valid);\n        }\n    },\n};\nfunction getValidate(cxt, sch) {\n    const { gen } = cxt;\n    return sch.validate\n        ? gen.scopeValue(\"validate\", { ref: sch.validate })\n        : (0, codegen_1._) `${gen.scopeValue(\"wrapper\", { ref: sch })}.validate`;\n}\nexports.getValidate = getValidate;\nfunction callRef(cxt, v, sch, $async) {\n    const { gen, it } = cxt;\n    const { allErrors, schemaEnv: env, opts } = it;\n    const passCxt = opts.passContext ? names_1.default.this : codegen_1.nil;\n    if ($async)\n        callAsyncRef();\n    else\n        callSyncRef();\n    function callAsyncRef() {\n        if (!env.$async)\n            throw new Error(\"async schema referenced by sync schema\");\n        const valid = gen.let(\"valid\");\n        gen.try(() => {\n            gen.code((0, codegen_1._) `await ${(0, code_1.callValidateCode)(cxt, v, passCxt)}`);\n            addEvaluatedFrom(v); // TODO will not work with async, it has to be returned with the result\n            if (!allErrors)\n                gen.assign(valid, true);\n        }, (e) => {\n            gen.if((0, codegen_1._) `!(${e} instanceof ${it.ValidationError})`, () => gen.throw(e));\n            addErrorsFrom(e);\n            if (!allErrors)\n                gen.assign(valid, false);\n        });\n        cxt.ok(valid);\n    }\n    function callSyncRef() {\n        cxt.result((0, code_1.callValidateCode)(cxt, v, passCxt), () => addEvaluatedFrom(v), () => addErrorsFrom(v));\n    }\n    function addErrorsFrom(source) {\n        const errs = (0, codegen_1._) `${source}.errors`;\n        gen.assign(names_1.default.vErrors, (0, codegen_1._) `${names_1.default.vErrors} === null ? ${errs} : ${names_1.default.vErrors}.concat(${errs})`); // TODO tagged\n        gen.assign(names_1.default.errors, (0, codegen_1._) `${names_1.default.vErrors}.length`);\n    }\n    function addEvaluatedFrom(source) {\n        var _a;\n        if (!it.opts.unevaluated)\n            return;\n        const schEvaluated = (_a = sch === null || sch === void 0 ? void 0 : sch.validate) === null || _a === void 0 ? void 0 : _a.evaluated;\n        // TODO refactor\n        if (it.props !== true) {\n            if (schEvaluated && !schEvaluated.dynamicProps) {\n                if (schEvaluated.props !== undefined) {\n                    it.props = util_1.mergeEvaluated.props(gen, schEvaluated.props, it.props);\n                }\n            }\n            else {\n                const props = gen.var(\"props\", (0, codegen_1._) `${source}.evaluated.props`);\n                it.props = util_1.mergeEvaluated.props(gen, props, it.props, codegen_1.Name);\n            }\n        }\n        if (it.items !== true) {\n            if (schEvaluated && !schEvaluated.dynamicItems) {\n                if (schEvaluated.items !== undefined) {\n                    it.items = util_1.mergeEvaluated.items(gen, schEvaluated.items, it.items);\n                }\n            }\n            else {\n                const items = gen.var(\"items\", (0, codegen_1._) `${source}.evaluated.items`);\n                it.items = util_1.mergeEvaluated.items(gen, items, it.items, codegen_1.Name);\n            }\n        }\n    }\n}\nexports.callRef = callRef;\nexports.default = def;\n//# sourceMappingURL=ref.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst ucs2length_1 = require(\"../../runtime/ucs2length\");\nconst error = {\n    message({ keyword, schemaCode }) {\n        const comp = keyword === \"maxLength\" ? \"more\" : \"fewer\";\n        return (0, codegen_1.str) `must NOT have ${comp} than ${schemaCode} characters`;\n    },\n    params: ({ schemaCode }) => (0, codegen_1._) `{limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: [\"maxLength\", \"minLength\"],\n    type: \"string\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode, it } = cxt;\n        const op = keyword === \"maxLength\" ? codegen_1.operators.GT : codegen_1.operators.LT;\n        const len = it.opts.unicode === false ? (0, codegen_1._) `${data}.length` : (0, codegen_1._) `${(0, util_1.useFunc)(cxt.gen, ucs2length_1.default)}(${data})`;\n        cxt.fail$data((0, codegen_1._) `${len} ${op} ${schemaCode}`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitLength.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// https://mathiasbynens.be/notes/javascript-encoding\n// https://github.com/bestiejs/punycode.js - punycode.ucs2.decode\nfunction ucs2length(str) {\n    const len = str.length;\n    let length = 0;\n    let pos = 0;\n    let value;\n    while (pos < len) {\n        length++;\n        value = str.charCodeAt(pos++);\n        if (value >= 0xd800 && value <= 0xdbff && pos < len) {\n            // high surrogate, and there is a next character\n            value = str.charCodeAt(pos);\n            if ((value & 0xfc00) === 0xdc00)\n                pos++; // low surrogate\n        }\n    }\n    return length;\n}\nexports.default = ucs2length;\nucs2length.code = 'require(\"ajv/dist/runtime/ucs2length\").default';\n//# sourceMappingURL=ucs2length.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { missingProperty } }) => (0, codegen_1.str) `must have required property '${missingProperty}'`,\n    params: ({ params: { missingProperty } }) => (0, codegen_1._) `{missingProperty: ${missingProperty}}`,\n};\nconst def = {\n    keyword: \"required\",\n    type: \"object\",\n    schemaType: \"array\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, schema, schemaCode, data, $data, it } = cxt;\n        const { opts } = it;\n        if (!$data && schema.length === 0)\n            return;\n        const useLoop = schema.length >= opts.loopRequired;\n        if (it.allErrors)\n            allErrorsMode();\n        else\n            exitOnErrorMode();\n        if (opts.strictRequired) {\n            const props = cxt.parentSchema.properties;\n            const { definedProperties } = cxt.it;\n            for (const requiredKey of schema) {\n                if ((props === null || props === void 0 ? void 0 : props[requiredKey]) === undefined && !definedProperties.has(requiredKey)) {\n                    const schemaPath = it.schemaEnv.baseId + it.errSchemaPath;\n                    const msg = `required property \"${requiredKey}\" is not defined at \"${schemaPath}\" (strictRequired)`;\n                    (0, util_1.checkStrictMode)(it, msg, it.opts.strictRequired);\n                }\n            }\n        }\n        function allErrorsMode() {\n            if (useLoop || $data) {\n                cxt.block$data(codegen_1.nil, loopAllRequired);\n            }\n            else {\n                for (const prop of schema) {\n                    (0, code_1.checkReportMissingProp)(cxt, prop);\n                }\n            }\n        }\n        function exitOnErrorMode() {\n            const missing = gen.let(\"missing\");\n            if (useLoop || $data) {\n                const valid = gen.let(\"valid\", true);\n                cxt.block$data(valid, () => loopUntilMissing(missing, valid));\n                cxt.ok(valid);\n            }\n            else {\n                gen.if((0, code_1.checkMissingProp)(cxt, schema, missing));\n                (0, code_1.reportMissingProp)(cxt, missing);\n                gen.else();\n            }\n        }\n        function loopAllRequired() {\n            gen.forOf(\"prop\", schemaCode, (prop) => {\n                cxt.setParams({ missingProperty: prop });\n                gen.if((0, code_1.noPropertyInData)(gen, data, prop, opts.ownProperties), () => cxt.error());\n            });\n        }\n        function loopUntilMissing(missing, valid) {\n            cxt.setParams({ missingProperty: missing });\n            gen.forOf(missing, schemaCode, () => {\n                gen.assign(valid, (0, code_1.propertyInData)(gen, data, missing, opts.ownProperties));\n                gen.if((0, codegen_1.not)(valid), () => {\n                    cxt.error();\n                    gen.break();\n                });\n            }, codegen_1.nil);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=required.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// https://github.com/ajv-validator/ajv/issues/889\nconst equal = require(\"fast-deep-equal\");\nequal.code = 'require(\"ajv/dist/runtime/equal\").default';\nexports.default = equal;\n//# sourceMappingURL=equal.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst dataType_1 = require(\"../../compile/validate/dataType\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst equal_1 = require(\"../../runtime/equal\");\nconst error = {\n    message: ({ params: { i, j } }) => (0, codegen_1.str) `must NOT have duplicate items (items ## ${j} and ${i} are identical)`,\n    params: ({ params: { i, j } }) => (0, codegen_1._) `{i: ${i}, j: ${j}}`,\n};\nconst def = {\n    keyword: \"uniqueItems\",\n    type: \"array\",\n    schemaType: \"boolean\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, $data, schema, parentSchema, schemaCode, it } = cxt;\n        if (!$data && !schema)\n            return;\n        const valid = gen.let(\"valid\");\n        const itemTypes = parentSchema.items ? (0, dataType_1.getSchemaTypes)(parentSchema.items) : [];\n        cxt.block$data(valid, validateUniqueItems, (0, codegen_1._) `${schemaCode} === false`);\n        cxt.ok(valid);\n        function validateUniqueItems() {\n            const i = gen.let(\"i\", (0, codegen_1._) `${data}.length`);\n            const j = gen.let(\"j\");\n            cxt.setParams({ i, j });\n            gen.assign(valid, true);\n            gen.if((0, codegen_1._) `${i} > 1`, () => (canOptimize() ? loopN : loopN2)(i, j));\n        }\n        function canOptimize() {\n            return itemTypes.length > 0 && !itemTypes.some((t) => t === \"object\" || t === \"array\");\n        }\n        function loopN(i, j) {\n            const item = gen.name(\"item\");\n            const wrongType = (0, dataType_1.checkDataTypes)(itemTypes, item, it.opts.strictNumbers, dataType_1.DataType.Wrong);\n            const indices = gen.const(\"indices\", (0, codegen_1._) `{}`);\n            gen.for((0, codegen_1._) `;${i}--;`, () => {\n                gen.let(item, (0, codegen_1._) `${data}[${i}]`);\n                gen.if(wrongType, (0, codegen_1._) `continue`);\n                if (itemTypes.length > 1)\n                    gen.if((0, codegen_1._) `typeof ${item} == \"string\"`, (0, codegen_1._) `${item} += \"_\"`);\n                gen\n                    .if((0, codegen_1._) `typeof ${indices}[${item}] == \"number\"`, () => {\n                    gen.assign(j, (0, codegen_1._) `${indices}[${item}]`);\n                    cxt.error();\n                    gen.assign(valid, false).break();\n                })\n                    .code((0, codegen_1._) `${indices}[${item}] = ${i}`);\n            });\n        }\n        function loopN2(i, j) {\n            const eql = (0, util_1.useFunc)(gen, equal_1.default);\n            const outer = gen.name(\"outer\");\n            gen.label(outer).for((0, codegen_1._) `;${i}--;`, () => gen.for((0, codegen_1._) `${j} = ${i}; ${j}--;`, () => gen.if((0, codegen_1._) `${eql}(${data}[${i}], ${data}[${j}])`, () => {\n                cxt.error();\n                gen.assign(valid, false).break(outer);\n            })));\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=uniqueItems.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst equal_1 = require(\"../../runtime/equal\");\nconst error = {\n    message: \"must be equal to one of the allowed values\",\n    params: ({ schemaCode }) => (0, codegen_1._) `{allowedValues: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"enum\",\n    schemaType: \"array\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, $data, schema, schemaCode, it } = cxt;\n        if (!$data && schema.length === 0)\n            throw new Error(\"enum must have non-empty array\");\n        const useLoop = schema.length >= it.opts.loopEnum;\n        let eql;\n        const getEql = () => (eql !== null && eql !== void 0 ? eql : (eql = (0, util_1.useFunc)(gen, equal_1.default)));\n        let valid;\n        if (useLoop || $data) {\n            valid = gen.let(\"valid\");\n            cxt.block$data(valid, loopEnum);\n        }\n        else {\n            /* istanbul ignore if */\n            if (!Array.isArray(schema))\n                throw new Error(\"ajv implementation error\");\n            const vSchema = gen.const(\"vSchema\", schemaCode);\n            valid = (0, codegen_1.or)(...schema.map((_x, i) => equalCode(vSchema, i)));\n        }\n        cxt.pass(valid);\n        function loopEnum() {\n            gen.assign(valid, false);\n            gen.forOf(\"v\", schemaCode, (v) => gen.if((0, codegen_1._) `${getEql()}(${data}, ${v})`, () => gen.assign(valid, true).break()));\n        }\n        function equalCode(vSchema, i) {\n            const sch = schema[i];\n            return typeof sch === \"object\" && sch !== null\n                ? (0, codegen_1._) `${getEql()}(${data}, ${vSchema}[${i}])`\n                : (0, codegen_1._) `${data} === ${sch}`;\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=enum.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst limitNumber_1 = require(\"./limitNumber\");\nconst multipleOf_1 = require(\"./multipleOf\");\nconst limitLength_1 = require(\"./limitLength\");\nconst pattern_1 = require(\"./pattern\");\nconst limitProperties_1 = require(\"./limitProperties\");\nconst required_1 = require(\"./required\");\nconst limitItems_1 = require(\"./limitItems\");\nconst uniqueItems_1 = require(\"./uniqueItems\");\nconst const_1 = require(\"./const\");\nconst enum_1 = require(\"./enum\");\nconst validation = [\n    // number\n    limitNumber_1.default,\n    multipleOf_1.default,\n    // string\n    limitLength_1.default,\n    pattern_1.default,\n    // object\n    limitProperties_1.default,\n    required_1.default,\n    // array\n    limitItems_1.default,\n    uniqueItems_1.default,\n    // any\n    { keyword: \"type\", schemaType: [\"string\", \"array\"] },\n    { keyword: \"nullable\", schemaType: \"boolean\" },\n    const_1.default,\n    enum_1.default,\n];\nexports.default = validation;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst ops = codegen_1.operators;\nconst KWDs = {\n    maximum: { okStr: \"<=\", ok: ops.LTE, fail: ops.GT },\n    minimum: { okStr: \">=\", ok: ops.GTE, fail: ops.LT },\n    exclusiveMaximum: { okStr: \"<\", ok: ops.LT, fail: ops.GTE },\n    exclusiveMinimum: { okStr: \">\", ok: ops.GT, fail: ops.LTE },\n};\nconst error = {\n    message: ({ keyword, schemaCode }) => (0, codegen_1.str) `must be ${KWDs[keyword].okStr} ${schemaCode}`,\n    params: ({ keyword, schemaCode }) => (0, codegen_1._) `{comparison: ${KWDs[keyword].okStr}, limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: Object.keys(KWDs),\n    type: \"number\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode } = cxt;\n        cxt.fail$data((0, codegen_1._) `${data} ${KWDs[keyword].fail} ${schemaCode} || isNaN(${data})`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitNumber.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message: ({ schemaCode }) => (0, codegen_1.str) `must be multiple of ${schemaCode}`,\n    params: ({ schemaCode }) => (0, codegen_1._) `{multipleOf: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"multipleOf\",\n    type: \"number\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, schemaCode, it } = cxt;\n        // const bdt = bad$DataType(schemaCode, <string>def.schemaType, $data)\n        const prec = it.opts.multipleOfPrecision;\n        const res = gen.let(\"res\");\n        const invalid = prec\n            ? (0, codegen_1._) `Math.abs(Math.round(${res}) - ${res}) > 1e-${prec}`\n            : (0, codegen_1._) `${res} !== parseInt(${res})`;\n        cxt.fail$data((0, codegen_1._) `(${schemaCode} === 0 || (${res} = ${data}/${schemaCode}, ${invalid}))`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=multipleOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message: ({ schemaCode }) => (0, codegen_1.str) `must match pattern \"${schemaCode}\"`,\n    params: ({ schemaCode }) => (0, codegen_1._) `{pattern: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"pattern\",\n    type: \"string\",\n    schemaType: \"string\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { data, $data, schema, schemaCode, it } = cxt;\n        // TODO regexp should be wrapped in try/catchs\n        const u = it.opts.unicodeRegExp ? \"u\" : \"\";\n        const regExp = $data ? (0, codegen_1._) `(new RegExp(${schemaCode}, ${u}))` : (0, code_1.usePattern)(cxt, schema);\n        cxt.fail$data((0, codegen_1._) `!${regExp}.test(${data})`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=pattern.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message({ keyword, schemaCode }) {\n        const comp = keyword === \"maxProperties\" ? \"more\" : \"fewer\";\n        return (0, codegen_1.str) `must NOT have ${comp} than ${schemaCode} properties`;\n    },\n    params: ({ schemaCode }) => (0, codegen_1._) `{limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: [\"maxProperties\", \"minProperties\"],\n    type: \"object\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode } = cxt;\n        const op = keyword === \"maxProperties\" ? codegen_1.operators.GT : codegen_1.operators.LT;\n        cxt.fail$data((0, codegen_1._) `Object.keys(${data}).length ${op} ${schemaCode}`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitProperties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message({ keyword, schemaCode }) {\n        const comp = keyword === \"maxItems\" ? \"more\" : \"fewer\";\n        return (0, codegen_1.str) `must NOT have ${comp} than ${schemaCode} items`;\n    },\n    params: ({ schemaCode }) => (0, codegen_1._) `{limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: [\"maxItems\", \"minItems\"],\n    type: \"array\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode } = cxt;\n        const op = keyword === \"maxItems\" ? codegen_1.operators.GT : codegen_1.operators.LT;\n        cxt.fail$data((0, codegen_1._) `${data}.length ${op} ${schemaCode}`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitItems.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst equal_1 = require(\"../../runtime/equal\");\nconst error = {\n    message: \"must be equal to constant\",\n    params: ({ schemaCode }) => (0, codegen_1._) `{allowedValue: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"const\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, $data, schemaCode, schema } = cxt;\n        if ($data || (schema && typeof schema == \"object\")) {\n            cxt.fail$data((0, codegen_1._) `!${(0, util_1.useFunc)(gen, equal_1.default)}(${data}, ${schemaCode})`);\n        }\n        else {\n            cxt.fail((0, codegen_1._) `${schema} !== ${data}`);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=const.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateAdditionalItems = void 0;\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { len } }) => (0, codegen_1.str) `must NOT have more than ${len} items`,\n    params: ({ params: { len } }) => (0, codegen_1._) `{limit: ${len}}`,\n};\nconst def = {\n    keyword: \"additionalItems\",\n    type: \"array\",\n    schemaType: [\"boolean\", \"object\"],\n    before: \"uniqueItems\",\n    error,\n    code(cxt) {\n        const { parentSchema, it } = cxt;\n        const { items } = parentSchema;\n        if (!Array.isArray(items)) {\n            (0, util_1.checkStrictMode)(it, '\"additionalItems\" is ignored when \"items\" is not an array of schemas');\n            return;\n        }\n        validateAdditionalItems(cxt, items);\n    },\n};\nfunction validateAdditionalItems(cxt, items) {\n    const { gen, schema, data, keyword, it } = cxt;\n    it.items = true;\n    const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n    if (schema === false) {\n        cxt.setParams({ len: items.length });\n        cxt.pass((0, codegen_1._) `${len} <= ${items.length}`);\n    }\n    else if (typeof schema == \"object\" && !(0, util_1.alwaysValidSchema)(it, schema)) {\n        const valid = gen.var(\"valid\", (0, codegen_1._) `${len} <= ${items.length}`); // TODO var\n        gen.if((0, codegen_1.not)(valid), () => validateItems(valid));\n        cxt.ok(valid);\n    }\n    function validateItems(valid) {\n        gen.forRange(\"i\", items.length, len, (i) => {\n            cxt.subschema({ keyword, dataProp: i, dataPropType: util_1.Type.Num }, valid);\n            if (!it.allErrors)\n                gen.if((0, codegen_1.not)(valid), () => gen.break());\n        });\n    }\n}\nexports.validateAdditionalItems = validateAdditionalItems;\nexports.default = def;\n//# sourceMappingURL=additionalItems.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateTuple = void 0;\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst code_1 = require(\"../code\");\nconst def = {\n    keyword: \"items\",\n    type: \"array\",\n    schemaType: [\"object\", \"array\", \"boolean\"],\n    before: \"uniqueItems\",\n    code(cxt) {\n        const { schema, it } = cxt;\n        if (Array.isArray(schema))\n            return validateTuple(cxt, \"additionalItems\", schema);\n        it.items = true;\n        if ((0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        cxt.ok((0, code_1.validateArray)(cxt));\n    },\n};\nfunction validateTuple(cxt, extraItems, schArr = cxt.schema) {\n    const { gen, parentSchema, data, keyword, it } = cxt;\n    checkStrictTuple(parentSchema);\n    if (it.opts.unevaluated && schArr.length && it.items !== true) {\n        it.items = util_1.mergeEvaluated.items(gen, schArr.length, it.items);\n    }\n    const valid = gen.name(\"valid\");\n    const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n    schArr.forEach((sch, i) => {\n        if ((0, util_1.alwaysValidSchema)(it, sch))\n            return;\n        gen.if((0, codegen_1._) `${len} > ${i}`, () => cxt.subschema({\n            keyword,\n            schemaProp: i,\n            dataProp: i,\n        }, valid));\n        cxt.ok(valid);\n    });\n    function checkStrictTuple(sch) {\n        const { opts, errSchemaPath } = it;\n        const l = schArr.length;\n        const fullTuple = l === sch.minItems && (l === sch.maxItems || sch[extraItems] === false);\n        if (opts.strictTuples && !fullTuple) {\n            const msg = `\"${keyword}\" is ${l}-tuple, but minItems or maxItems/${extraItems} are not specified or different at path \"${errSchemaPath}\"`;\n            (0, util_1.checkStrictMode)(it, msg, opts.strictTuples);\n        }\n    }\n}\nexports.validateTuple = validateTuple;\nexports.default = def;\n//# sourceMappingURL=items.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { min, max } }) => max === undefined\n        ? (0, codegen_1.str) `must contain at least ${min} valid item(s)`\n        : (0, codegen_1.str) `must contain at least ${min} and no more than ${max} valid item(s)`,\n    params: ({ params: { min, max } }) => max === undefined ? (0, codegen_1._) `{minContains: ${min}}` : (0, codegen_1._) `{minContains: ${min}, maxContains: ${max}}`,\n};\nconst def = {\n    keyword: \"contains\",\n    type: \"array\",\n    schemaType: [\"object\", \"boolean\"],\n    before: \"uniqueItems\",\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, schema, parentSchema, data, it } = cxt;\n        let min;\n        let max;\n        const { minContains, maxContains } = parentSchema;\n        if (it.opts.next) {\n            min = minContains === undefined ? 1 : minContains;\n            max = maxContains;\n        }\n        else {\n            min = 1;\n        }\n        const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n        cxt.setParams({ min, max });\n        if (max === undefined && min === 0) {\n            (0, util_1.checkStrictMode)(it, `\"minContains\" == 0 without \"maxContains\": \"contains\" keyword ignored`);\n            return;\n        }\n        if (max !== undefined && min > max) {\n            (0, util_1.checkStrictMode)(it, `\"minContains\" > \"maxContains\" is always invalid`);\n            cxt.fail();\n            return;\n        }\n        if ((0, util_1.alwaysValidSchema)(it, schema)) {\n            let cond = (0, codegen_1._) `${len} >= ${min}`;\n            if (max !== undefined)\n                cond = (0, codegen_1._) `${cond} && ${len} <= ${max}`;\n            cxt.pass(cond);\n            return;\n        }\n        it.items = true;\n        const valid = gen.name(\"valid\");\n        if (max === undefined && min === 1) {\n            validateItems(valid, () => gen.if(valid, () => gen.break()));\n        }\n        else if (min === 0) {\n            gen.let(valid, true);\n            if (max !== undefined)\n                gen.if((0, codegen_1._) `${data}.length > 0`, validateItemsWithCount);\n        }\n        else {\n            gen.let(valid, false);\n            validateItemsWithCount();\n        }\n        cxt.result(valid, () => cxt.reset());\n        function validateItemsWithCount() {\n            const schValid = gen.name(\"_valid\");\n            const count = gen.let(\"count\", 0);\n            validateItems(schValid, () => gen.if(schValid, () => checkLimits(count)));\n        }\n        function validateItems(_valid, block) {\n            gen.forRange(\"i\", 0, len, (i) => {\n                cxt.subschema({\n                    keyword: \"contains\",\n                    dataProp: i,\n                    dataPropType: util_1.Type.Num,\n                    compositeRule: true,\n                }, _valid);\n                block();\n            });\n        }\n        function checkLimits(count) {\n            gen.code((0, codegen_1._) `${count}++`);\n            if (max === undefined) {\n                gen.if((0, codegen_1._) `${count} >= ${min}`, () => gen.assign(valid, true).break());\n            }\n            else {\n                gen.if((0, codegen_1._) `${count} > ${max}`, () => gen.assign(valid, false).break());\n                if (min === 1)\n                    gen.assign(valid, true);\n                else\n                    gen.if((0, codegen_1._) `${count} >= ${min}`, () => gen.assign(valid, true));\n            }\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=contains.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateSchemaDeps = exports.validatePropertyDeps = exports.error = void 0;\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst code_1 = require(\"../code\");\nexports.error = {\n    message: ({ params: { property, depsCount, deps } }) => {\n        const property_ies = depsCount === 1 ? \"property\" : \"properties\";\n        return (0, codegen_1.str) `must have ${property_ies} ${deps} when property ${property} is present`;\n    },\n    params: ({ params: { property, depsCount, deps, missingProperty } }) => (0, codegen_1._) `{property: ${property},\n    missingProperty: ${missingProperty},\n    depsCount: ${depsCount},\n    deps: ${deps}}`, // TODO change to reference\n};\nconst def = {\n    keyword: \"dependencies\",\n    type: \"object\",\n    schemaType: \"object\",\n    error: exports.error,\n    code(cxt) {\n        const [propDeps, schDeps] = splitDependencies(cxt);\n        validatePropertyDeps(cxt, propDeps);\n        validateSchemaDeps(cxt, schDeps);\n    },\n};\nfunction splitDependencies({ schema }) {\n    const propertyDeps = {};\n    const schemaDeps = {};\n    for (const key in schema) {\n        if (key === \"__proto__\")\n            continue;\n        const deps = Array.isArray(schema[key]) ? propertyDeps : schemaDeps;\n        deps[key] = schema[key];\n    }\n    return [propertyDeps, schemaDeps];\n}\nfunction validatePropertyDeps(cxt, propertyDeps = cxt.schema) {\n    const { gen, data, it } = cxt;\n    if (Object.keys(propertyDeps).length === 0)\n        return;\n    const missing = gen.let(\"missing\");\n    for (const prop in propertyDeps) {\n        const deps = propertyDeps[prop];\n        if (deps.length === 0)\n            continue;\n        const hasProperty = (0, code_1.propertyInData)(gen, data, prop, it.opts.ownProperties);\n        cxt.setParams({\n            property: prop,\n            depsCount: deps.length,\n            deps: deps.join(\", \"),\n        });\n        if (it.allErrors) {\n            gen.if(hasProperty, () => {\n                for (const depProp of deps) {\n                    (0, code_1.checkReportMissingProp)(cxt, depProp);\n                }\n            });\n        }\n        else {\n            gen.if((0, codegen_1._) `${hasProperty} && (${(0, code_1.checkMissingProp)(cxt, deps, missing)})`);\n            (0, code_1.reportMissingProp)(cxt, missing);\n            gen.else();\n        }\n    }\n}\nexports.validatePropertyDeps = validatePropertyDeps;\nfunction validateSchemaDeps(cxt, schemaDeps = cxt.schema) {\n    const { gen, data, keyword, it } = cxt;\n    const valid = gen.name(\"valid\");\n    for (const prop in schemaDeps) {\n        if ((0, util_1.alwaysValidSchema)(it, schemaDeps[prop]))\n            continue;\n        gen.if((0, code_1.propertyInData)(gen, data, prop, it.opts.ownProperties), () => {\n            const schCxt = cxt.subschema({ keyword, schemaProp: prop }, valid);\n            cxt.mergeValidEvaluated(schCxt, valid);\n        }, () => gen.var(valid, true) // TODO var\n        );\n        cxt.ok(valid);\n    }\n}\nexports.validateSchemaDeps = validateSchemaDeps;\nexports.default = def;\n//# sourceMappingURL=dependencies.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst names_1 = require(\"../../compile/names\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: \"must NOT have additional properties\",\n    params: ({ params }) => (0, codegen_1._) `{additionalProperty: ${params.additionalProperty}}`,\n};\nconst def = {\n    keyword: \"additionalProperties\",\n    type: [\"object\"],\n    schemaType: [\"boolean\", \"object\"],\n    allowUndefined: true,\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, schema, parentSchema, data, errsCount, it } = cxt;\n        /* istanbul ignore if */\n        if (!errsCount)\n            throw new Error(\"ajv implementation error\");\n        const { allErrors, opts } = it;\n        it.props = true;\n        if (opts.removeAdditional !== \"all\" && (0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        const props = (0, code_1.allSchemaProperties)(parentSchema.properties);\n        const patProps = (0, code_1.allSchemaProperties)(parentSchema.patternProperties);\n        checkAdditionalProperties();\n        cxt.ok((0, codegen_1._) `${errsCount} === ${names_1.default.errors}`);\n        function checkAdditionalProperties() {\n            gen.forIn(\"key\", data, (key) => {\n                if (!props.length && !patProps.length)\n                    additionalPropertyCode(key);\n                else\n                    gen.if(isAdditional(key), () => additionalPropertyCode(key));\n            });\n        }\n        function isAdditional(key) {\n            let definedProp;\n            if (props.length > 8) {\n                // TODO maybe an option instead of hard-coded 8?\n                const propsSchema = (0, util_1.schemaRefOrVal)(it, parentSchema.properties, \"properties\");\n                definedProp = (0, code_1.isOwnProperty)(gen, propsSchema, key);\n            }\n            else if (props.length) {\n                definedProp = (0, codegen_1.or)(...props.map((p) => (0, codegen_1._) `${key} === ${p}`));\n            }\n            else {\n                definedProp = codegen_1.nil;\n            }\n            if (patProps.length) {\n                definedProp = (0, codegen_1.or)(definedProp, ...patProps.map((p) => (0, codegen_1._) `${(0, code_1.usePattern)(cxt, p)}.test(${key})`));\n            }\n            return (0, codegen_1.not)(definedProp);\n        }\n        function deleteAdditional(key) {\n            gen.code((0, codegen_1._) `delete ${data}[${key}]`);\n        }\n        function additionalPropertyCode(key) {\n            if (opts.removeAdditional === \"all\" || (opts.removeAdditional && schema === false)) {\n                deleteAdditional(key);\n                return;\n            }\n            if (schema === false) {\n                cxt.setParams({ additionalProperty: key });\n                cxt.error();\n                if (!allErrors)\n                    gen.break();\n                return;\n            }\n            if (typeof schema == \"object\" && !(0, util_1.alwaysValidSchema)(it, schema)) {\n                const valid = gen.name(\"valid\");\n                if (opts.removeAdditional === \"failing\") {\n                    applyAdditionalSchema(key, valid, false);\n                    gen.if((0, codegen_1.not)(valid), () => {\n                        cxt.reset();\n                        deleteAdditional(key);\n                    });\n                }\n                else {\n                    applyAdditionalSchema(key, valid);\n                    if (!allErrors)\n                        gen.if((0, codegen_1.not)(valid), () => gen.break());\n                }\n            }\n        }\n        function applyAdditionalSchema(key, valid, errors) {\n            const subschema = {\n                keyword: \"additionalProperties\",\n                dataProp: key,\n                dataPropType: util_1.Type.Str,\n            };\n            if (errors === false) {\n                Object.assign(subschema, {\n                    compositeRule: true,\n                    createErrors: false,\n                    allErrors: false,\n                });\n            }\n            cxt.subschema(subschema, valid);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=additionalProperties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst additionalItems_1 = require(\"./additionalItems\");\nconst prefixItems_1 = require(\"./prefixItems\");\nconst items_1 = require(\"./items\");\nconst items2020_1 = require(\"./items2020\");\nconst contains_1 = require(\"./contains\");\nconst dependencies_1 = require(\"./dependencies\");\nconst propertyNames_1 = require(\"./propertyNames\");\nconst additionalProperties_1 = require(\"./additionalProperties\");\nconst properties_1 = require(\"./properties\");\nconst patternProperties_1 = require(\"./patternProperties\");\nconst not_1 = require(\"./not\");\nconst anyOf_1 = require(\"./anyOf\");\nconst oneOf_1 = require(\"./oneOf\");\nconst allOf_1 = require(\"./allOf\");\nconst if_1 = require(\"./if\");\nconst thenElse_1 = require(\"./thenElse\");\nfunction getApplicator(draft2020 = false) {\n    const applicator = [\n        // any\n        not_1.default,\n        anyOf_1.default,\n        oneOf_1.default,\n        allOf_1.default,\n        if_1.default,\n        thenElse_1.default,\n        // object\n        propertyNames_1.default,\n        additionalProperties_1.default,\n        dependencies_1.default,\n        properties_1.default,\n        patternProperties_1.default,\n    ];\n    // array\n    if (draft2020)\n        applicator.push(prefixItems_1.default, items2020_1.default);\n    else\n        applicator.push(additionalItems_1.default, items_1.default);\n    applicator.push(contains_1.default);\n    return applicator;\n}\nexports.default = getApplicator;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst items_1 = require(\"./items\");\nconst def = {\n    keyword: \"prefixItems\",\n    type: \"array\",\n    schemaType: [\"array\"],\n    before: \"uniqueItems\",\n    code: (cxt) => (0, items_1.validateTuple)(cxt, \"items\"),\n};\nexports.default = def;\n//# sourceMappingURL=prefixItems.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst code_1 = require(\"../code\");\nconst additionalItems_1 = require(\"./additionalItems\");\nconst error = {\n    message: ({ params: { len } }) => (0, codegen_1.str) `must NOT have more than ${len} items`,\n    params: ({ params: { len } }) => (0, codegen_1._) `{limit: ${len}}`,\n};\nconst def = {\n    keyword: \"items\",\n    type: \"array\",\n    schemaType: [\"object\", \"boolean\"],\n    before: \"uniqueItems\",\n    error,\n    code(cxt) {\n        const { schema, parentSchema, it } = cxt;\n        const { prefixItems } = parentSchema;\n        it.items = true;\n        if ((0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        if (prefixItems)\n            (0, additionalItems_1.validateAdditionalItems)(cxt, prefixItems);\n        else\n            cxt.ok((0, code_1.validateArray)(cxt));\n    },\n};\nexports.default = def;\n//# sourceMappingURL=items2020.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: \"property name must be valid\",\n    params: ({ params }) => (0, codegen_1._) `{propertyName: ${params.propertyName}}`,\n};\nconst def = {\n    keyword: \"propertyNames\",\n    type: \"object\",\n    schemaType: [\"object\", \"boolean\"],\n    error,\n    code(cxt) {\n        const { gen, schema, data, it } = cxt;\n        if ((0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        const valid = gen.name(\"valid\");\n        gen.forIn(\"key\", data, (key) => {\n            cxt.setParams({ propertyName: key });\n            cxt.subschema({\n                keyword: \"propertyNames\",\n                data: key,\n                dataTypes: [\"string\"],\n                propertyName: key,\n                compositeRule: true,\n            }, valid);\n            gen.if((0, codegen_1.not)(valid), () => {\n                cxt.error(true);\n                if (!it.allErrors)\n                    gen.break();\n            });\n        });\n        cxt.ok(valid);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=propertyNames.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst validate_1 = require(\"../../compile/validate\");\nconst code_1 = require(\"../code\");\nconst util_1 = require(\"../../compile/util\");\nconst additionalProperties_1 = require(\"./additionalProperties\");\nconst def = {\n    keyword: \"properties\",\n    type: \"object\",\n    schemaType: \"object\",\n    code(cxt) {\n        const { gen, schema, parentSchema, data, it } = cxt;\n        if (it.opts.removeAdditional === \"all\" && parentSchema.additionalProperties === undefined) {\n            additionalProperties_1.default.code(new validate_1.KeywordCxt(it, additionalProperties_1.default, \"additionalProperties\"));\n        }\n        const allProps = (0, code_1.allSchemaProperties)(schema);\n        for (const prop of allProps) {\n            it.definedProperties.add(prop);\n        }\n        if (it.opts.unevaluated && allProps.length && it.props !== true) {\n            it.props = util_1.mergeEvaluated.props(gen, (0, util_1.toHash)(allProps), it.props);\n        }\n        const properties = allProps.filter((p) => !(0, util_1.alwaysValidSchema)(it, schema[p]));\n        if (properties.length === 0)\n            return;\n        const valid = gen.name(\"valid\");\n        for (const prop of properties) {\n            if (hasDefault(prop)) {\n                applyPropertySchema(prop);\n            }\n            else {\n                gen.if((0, code_1.propertyInData)(gen, data, prop, it.opts.ownProperties));\n                applyPropertySchema(prop);\n                if (!it.allErrors)\n                    gen.else().var(valid, true);\n                gen.endIf();\n            }\n            cxt.it.definedProperties.add(prop);\n            cxt.ok(valid);\n        }\n        function hasDefault(prop) {\n            return it.opts.useDefaults && !it.compositeRule && schema[prop].default !== undefined;\n        }\n        function applyPropertySchema(prop) {\n            cxt.subschema({\n                keyword: \"properties\",\n                schemaProp: prop,\n                dataProp: prop,\n            }, valid);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=properties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst util_2 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"patternProperties\",\n    type: \"object\",\n    schemaType: \"object\",\n    code(cxt) {\n        const { gen, schema, data, parentSchema, it } = cxt;\n        const { opts } = it;\n        const patterns = (0, code_1.allSchemaProperties)(schema);\n        const alwaysValidPatterns = patterns.filter((p) => (0, util_1.alwaysValidSchema)(it, schema[p]));\n        if (patterns.length === 0 ||\n            (alwaysValidPatterns.length === patterns.length &&\n                (!it.opts.unevaluated || it.props === true))) {\n            return;\n        }\n        const checkProperties = opts.strictSchema && !opts.allowMatchingProperties && parentSchema.properties;\n        const valid = gen.name(\"valid\");\n        if (it.props !== true && !(it.props instanceof codegen_1.Name)) {\n            it.props = (0, util_2.evaluatedPropsToName)(gen, it.props);\n        }\n        const { props } = it;\n        validatePatternProperties();\n        function validatePatternProperties() {\n            for (const pat of patterns) {\n                if (checkProperties)\n                    checkMatchingProperties(pat);\n                if (it.allErrors) {\n                    validateProperties(pat);\n                }\n                else {\n                    gen.var(valid, true); // TODO var\n                    validateProperties(pat);\n                    gen.if(valid);\n                }\n            }\n        }\n        function checkMatchingProperties(pat) {\n            for (const prop in checkProperties) {\n                if (new RegExp(pat).test(prop)) {\n                    (0, util_1.checkStrictMode)(it, `property ${prop} matches pattern ${pat} (use allowMatchingProperties)`);\n                }\n            }\n        }\n        function validateProperties(pat) {\n            gen.forIn(\"key\", data, (key) => {\n                gen.if((0, codegen_1._) `${(0, code_1.usePattern)(cxt, pat)}.test(${key})`, () => {\n                    const alwaysValid = alwaysValidPatterns.includes(pat);\n                    if (!alwaysValid) {\n                        cxt.subschema({\n                            keyword: \"patternProperties\",\n                            schemaProp: pat,\n                            dataProp: key,\n                            dataPropType: util_2.Type.Str,\n                        }, valid);\n                    }\n                    if (it.opts.unevaluated && props !== true) {\n                        gen.assign((0, codegen_1._) `${props}[${key}]`, true);\n                    }\n                    else if (!alwaysValid && !it.allErrors) {\n                        // can short-circuit if `unevaluatedProperties` is not supported (opts.next === false)\n                        // or if all properties were evaluated (props === true)\n                        gen.if((0, codegen_1.not)(valid), () => gen.break());\n                    }\n                });\n            });\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=patternProperties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"not\",\n    schemaType: [\"object\", \"boolean\"],\n    trackErrors: true,\n    code(cxt) {\n        const { gen, schema, it } = cxt;\n        if ((0, util_1.alwaysValidSchema)(it, schema)) {\n            cxt.fail();\n            return;\n        }\n        const valid = gen.name(\"valid\");\n        cxt.subschema({\n            keyword: \"not\",\n            compositeRule: true,\n            createErrors: false,\n            allErrors: false,\n        }, valid);\n        cxt.failResult(valid, () => cxt.reset(), () => cxt.error());\n    },\n    error: { message: \"must NOT be valid\" },\n};\nexports.default = def;\n//# sourceMappingURL=not.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst def = {\n    keyword: \"anyOf\",\n    schemaType: \"array\",\n    trackErrors: true,\n    code: code_1.validateUnion,\n    error: { message: \"must match a schema in anyOf\" },\n};\nexports.default = def;\n//# sourceMappingURL=anyOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: \"must match exactly one schema in oneOf\",\n    params: ({ params }) => (0, codegen_1._) `{passingSchemas: ${params.passing}}`,\n};\nconst def = {\n    keyword: \"oneOf\",\n    schemaType: \"array\",\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, schema, parentSchema, it } = cxt;\n        /* istanbul ignore if */\n        if (!Array.isArray(schema))\n            throw new Error(\"ajv implementation error\");\n        if (it.opts.discriminator && parentSchema.discriminator)\n            return;\n        const schArr = schema;\n        const valid = gen.let(\"valid\", false);\n        const passing = gen.let(\"passing\", null);\n        const schValid = gen.name(\"_valid\");\n        cxt.setParams({ passing });\n        // TODO possibly fail straight away (with warning or exception) if there are two empty always valid schemas\n        gen.block(validateOneOf);\n        cxt.result(valid, () => cxt.reset(), () => cxt.error(true));\n        function validateOneOf() {\n            schArr.forEach((sch, i) => {\n                let schCxt;\n                if ((0, util_1.alwaysValidSchema)(it, sch)) {\n                    gen.var(schValid, true);\n                }\n                else {\n                    schCxt = cxt.subschema({\n                        keyword: \"oneOf\",\n                        schemaProp: i,\n                        compositeRule: true,\n                    }, schValid);\n                }\n                if (i > 0) {\n                    gen\n                        .if((0, codegen_1._) `${schValid} && ${valid}`)\n                        .assign(valid, false)\n                        .assign(passing, (0, codegen_1._) `[${passing}, ${i}]`)\n                        .else();\n                }\n                gen.if(schValid, () => {\n                    gen.assign(valid, true);\n                    gen.assign(passing, i);\n                    if (schCxt)\n                        cxt.mergeEvaluated(schCxt, codegen_1.Name);\n                });\n            });\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=oneOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"allOf\",\n    schemaType: \"array\",\n    code(cxt) {\n        const { gen, schema, it } = cxt;\n        /* istanbul ignore if */\n        if (!Array.isArray(schema))\n            throw new Error(\"ajv implementation error\");\n        const valid = gen.name(\"valid\");\n        schema.forEach((sch, i) => {\n            if ((0, util_1.alwaysValidSchema)(it, sch))\n                return;\n            const schCxt = cxt.subschema({ keyword: \"allOf\", schemaProp: i }, valid);\n            cxt.ok(valid);\n            cxt.mergeEvaluated(schCxt);\n        });\n    },\n};\nexports.default = def;\n//# sourceMappingURL=allOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params }) => (0, codegen_1.str) `must match \"${params.ifClause}\" schema`,\n    params: ({ params }) => (0, codegen_1._) `{failingKeyword: ${params.ifClause}}`,\n};\nconst def = {\n    keyword: \"if\",\n    schemaType: [\"object\", \"boolean\"],\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, parentSchema, it } = cxt;\n        if (parentSchema.then === undefined && parentSchema.else === undefined) {\n            (0, util_1.checkStrictMode)(it, '\"if\" without \"then\" and \"else\" is ignored');\n        }\n        const hasThen = hasSchema(it, \"then\");\n        const hasElse = hasSchema(it, \"else\");\n        if (!hasThen && !hasElse)\n            return;\n        const valid = gen.let(\"valid\", true);\n        const schValid = gen.name(\"_valid\");\n        validateIf();\n        cxt.reset();\n        if (hasThen && hasElse) {\n            const ifClause = gen.let(\"ifClause\");\n            cxt.setParams({ ifClause });\n            gen.if(schValid, validateClause(\"then\", ifClause), validateClause(\"else\", ifClause));\n        }\n        else if (hasThen) {\n            gen.if(schValid, validateClause(\"then\"));\n        }\n        else {\n            gen.if((0, codegen_1.not)(schValid), validateClause(\"else\"));\n        }\n        cxt.pass(valid, () => cxt.error(true));\n        function validateIf() {\n            const schCxt = cxt.subschema({\n                keyword: \"if\",\n                compositeRule: true,\n                createErrors: false,\n                allErrors: false,\n            }, schValid);\n            cxt.mergeEvaluated(schCxt);\n        }\n        function validateClause(keyword, ifClause) {\n            return () => {\n                const schCxt = cxt.subschema({ keyword }, schValid);\n                gen.assign(valid, schValid);\n                cxt.mergeValidEvaluated(schCxt, valid);\n                if (ifClause)\n                    gen.assign(ifClause, (0, codegen_1._) `${keyword}`);\n                else\n                    cxt.setParams({ ifClause: keyword });\n            };\n        }\n    },\n};\nfunction hasSchema(it, keyword) {\n    const schema = it.schema[keyword];\n    return schema !== undefined && !(0, util_1.alwaysValidSchema)(it, schema);\n}\nexports.default = def;\n//# sourceMappingURL=if.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: [\"then\", \"else\"],\n    schemaType: [\"object\", \"boolean\"],\n    code({ keyword, parentSchema, it }) {\n        if (parentSchema.if === undefined)\n            (0, util_1.checkStrictMode)(it, `\"${keyword}\" without \"if\" is ignored`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=thenElse.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message: ({ schemaCode }) => (0, codegen_1.str) `must match format \"${schemaCode}\"`,\n    params: ({ schemaCode }) => (0, codegen_1._) `{format: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"format\",\n    type: [\"number\", \"string\"],\n    schemaType: \"string\",\n    $data: true,\n    error,\n    code(cxt, ruleType) {\n        const { gen, data, $data, schema, schemaCode, it } = cxt;\n        const { opts, errSchemaPath, schemaEnv, self } = it;\n        if (!opts.validateFormats)\n            return;\n        if ($data)\n            validate$DataFormat();\n        else\n            validateFormat();\n        function validate$DataFormat() {\n            const fmts = gen.scopeValue(\"formats\", {\n                ref: self.formats,\n                code: opts.code.formats,\n            });\n            const fDef = gen.const(\"fDef\", (0, codegen_1._) `${fmts}[${schemaCode}]`);\n            const fType = gen.let(\"fType\");\n            const format = gen.let(\"format\");\n            // TODO simplify\n            gen.if((0, codegen_1._) `typeof ${fDef} == \"object\" && !(${fDef} instanceof RegExp)`, () => gen.assign(fType, (0, codegen_1._) `${fDef}.type || \"string\"`).assign(format, (0, codegen_1._) `${fDef}.validate`), () => gen.assign(fType, (0, codegen_1._) `\"string\"`).assign(format, fDef));\n            cxt.fail$data((0, codegen_1.or)(unknownFmt(), invalidFmt()));\n            function unknownFmt() {\n                if (opts.strictSchema === false)\n                    return codegen_1.nil;\n                return (0, codegen_1._) `${schemaCode} && !${format}`;\n            }\n            function invalidFmt() {\n                const callFormat = schemaEnv.$async\n                    ? (0, codegen_1._) `(${fDef}.async ? await ${format}(${data}) : ${format}(${data}))`\n                    : (0, codegen_1._) `${format}(${data})`;\n                const validData = (0, codegen_1._) `(typeof ${format} == \"function\" ? ${callFormat} : ${format}.test(${data}))`;\n                return (0, codegen_1._) `${format} && ${format} !== true && ${fType} === ${ruleType} && !${validData}`;\n            }\n        }\n        function validateFormat() {\n            const formatDef = self.formats[schema];\n            if (!formatDef) {\n                unknownFormat();\n                return;\n            }\n            if (formatDef === true)\n                return;\n            const [fmtType, format, fmtRef] = getFormat(formatDef);\n            if (fmtType === ruleType)\n                cxt.pass(validCondition());\n            function unknownFormat() {\n                if (opts.strictSchema === false) {\n                    self.logger.warn(unknownMsg());\n                    return;\n                }\n                throw new Error(unknownMsg());\n                function unknownMsg() {\n                    return `unknown format \"${schema}\" ignored in schema at path \"${errSchemaPath}\"`;\n                }\n            }\n            function getFormat(fmtDef) {\n                const code = fmtDef instanceof RegExp\n                    ? (0, codegen_1.regexpCode)(fmtDef)\n                    : opts.code.formats\n                        ? (0, codegen_1._) `${opts.code.formats}${(0, codegen_1.getProperty)(schema)}`\n                        : undefined;\n                const fmt = gen.scopeValue(\"formats\", { key: schema, ref: fmtDef, code });\n                if (typeof fmtDef == \"object\" && !(fmtDef instanceof RegExp)) {\n                    return [fmtDef.type || \"string\", fmtDef.validate, (0, codegen_1._) `${fmt}.validate`];\n                }\n                return [\"string\", fmtDef, fmt];\n            }\n            function validCondition() {\n                if (typeof formatDef == \"object\" && !(formatDef instanceof RegExp) && formatDef.async) {\n                    if (!schemaEnv.$async)\n                        throw new Error(\"async format in sync schema\");\n                    return (0, codegen_1._) `await ${fmtRef}(${data})`;\n                }\n                return typeof format == \"function\" ? (0, codegen_1._) `${fmtRef}(${data})` : (0, codegen_1._) `${fmtRef}.test(${data})`;\n            }\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=format.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst core_1 = require(\"./core\");\nconst validation_1 = require(\"./validation\");\nconst applicator_1 = require(\"./applicator\");\nconst format_1 = require(\"./format\");\nconst metadata_1 = require(\"./metadata\");\nconst draft7Vocabularies = [\n    core_1.default,\n    validation_1.default,\n    (0, applicator_1.default)(),\n    format_1.default,\n    metadata_1.metadataVocabulary,\n    metadata_1.contentVocabulary,\n];\nexports.default = draft7Vocabularies;\n//# sourceMappingURL=draft7.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst format_1 = require(\"./format\");\nconst format = [format_1.default];\nexports.default = format;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.contentVocabulary = exports.metadataVocabulary = void 0;\nexports.metadataVocabulary = [\n    \"title\",\n    \"description\",\n    \"default\",\n    \"deprecated\",\n    \"readOnly\",\n    \"writeOnly\",\n    \"examples\",\n];\nexports.contentVocabulary = [\n    \"contentMediaType\",\n    \"contentEncoding\",\n    \"contentSchema\",\n];\n//# sourceMappingURL=metadata.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst types_1 = require(\"../discriminator/types\");\nconst compile_1 = require(\"../../compile\");\nconst ref_error_1 = require(\"../../compile/ref_error\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { discrError, tagName } }) => discrError === types_1.DiscrError.Tag\n        ? `tag \"${tagName}\" must be string`\n        : `value of tag \"${tagName}\" must be in oneOf`,\n    params: ({ params: { discrError, tag, tagName } }) => (0, codegen_1._) `{error: ${discrError}, tag: ${tagName}, tagValue: ${tag}}`,\n};\nconst def = {\n    keyword: \"discriminator\",\n    type: \"object\",\n    schemaType: \"object\",\n    error,\n    code(cxt) {\n        const { gen, data, schema, parentSchema, it } = cxt;\n        const { oneOf } = parentSchema;\n        if (!it.opts.discriminator) {\n            throw new Error(\"discriminator: requires discriminator option\");\n        }\n        const tagName = schema.propertyName;\n        if (typeof tagName != \"string\")\n            throw new Error(\"discriminator: requires propertyName\");\n        if (schema.mapping)\n            throw new Error(\"discriminator: mapping is not supported\");\n        if (!oneOf)\n            throw new Error(\"discriminator: requires oneOf keyword\");\n        const valid = gen.let(\"valid\", false);\n        const tag = gen.const(\"tag\", (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(tagName)}`);\n        gen.if((0, codegen_1._) `typeof ${tag} == \"string\"`, () => validateMapping(), () => cxt.error(false, { discrError: types_1.DiscrError.Tag, tag, tagName }));\n        cxt.ok(valid);\n        function validateMapping() {\n            const mapping = getMapping();\n            gen.if(false);\n            for (const tagValue in mapping) {\n                gen.elseIf((0, codegen_1._) `${tag} === ${tagValue}`);\n                gen.assign(valid, applyTagSchema(mapping[tagValue]));\n            }\n            gen.else();\n            cxt.error(false, { discrError: types_1.DiscrError.Mapping, tag, tagName });\n            gen.endIf();\n        }\n        function applyTagSchema(schemaProp) {\n            const _valid = gen.name(\"valid\");\n            const schCxt = cxt.subschema({ keyword: \"oneOf\", schemaProp }, _valid);\n            cxt.mergeEvaluated(schCxt, codegen_1.Name);\n            return _valid;\n        }\n        function getMapping() {\n            var _a;\n            const oneOfMapping = {};\n            const topRequired = hasRequired(parentSchema);\n            let tagRequired = true;\n            for (let i = 0; i < oneOf.length; i++) {\n                let sch = oneOf[i];\n                if ((sch === null || sch === void 0 ? void 0 : sch.$ref) && !(0, util_1.schemaHasRulesButRef)(sch, it.self.RULES)) {\n                    const ref = sch.$ref;\n                    sch = compile_1.resolveRef.call(it.self, it.schemaEnv.root, it.baseId, ref);\n                    if (sch instanceof compile_1.SchemaEnv)\n                        sch = sch.schema;\n                    if (sch === undefined)\n                        throw new ref_error_1.default(it.opts.uriResolver, it.baseId, ref);\n                }\n                const propSch = (_a = sch === null || sch === void 0 ? void 0 : sch.properties) === null || _a === void 0 ? void 0 : _a[tagName];\n                if (typeof propSch != \"object\") {\n                    throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have \"properties/${tagName}\"`);\n                }\n                tagRequired = tagRequired && (topRequired || hasRequired(sch));\n                addMappings(propSch, i);\n            }\n            if (!tagRequired)\n                throw new Error(`discriminator: \"${tagName}\" must be required`);\n            return oneOfMapping;\n            function hasRequired({ required }) {\n                return Array.isArray(required) && required.includes(tagName);\n            }\n            function addMappings(sch, i) {\n                if (sch.const) {\n                    addMapping(sch.const, i);\n                }\n                else if (sch.enum) {\n                    for (const tagValue of sch.enum) {\n                        addMapping(tagValue, i);\n                    }\n                }\n                else {\n                    throw new Error(`discriminator: \"properties/${tagName}\" must have \"const\" or \"enum\"`);\n                }\n            }\n            function addMapping(tagValue, i) {\n                if (typeof tagValue != \"string\" || tagValue in oneOfMapping) {\n                    throw new Error(`discriminator: \"${tagName}\" values must be unique strings`);\n                }\n                oneOfMapping[tagValue] = i;\n            }\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DiscrError = void 0;\nvar DiscrError;\n(function (DiscrError) {\n    DiscrError[\"Tag\"] = \"tag\";\n    DiscrError[\"Mapping\"] = \"mapping\";\n})(DiscrError || (exports.DiscrError = DiscrError = {}));\n//# sourceMappingURL=types.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MissingRefError = exports.ValidationError = exports.CodeGen = exports.Name = exports.nil = exports.stringify = exports.str = exports._ = exports.KeywordCxt = exports.Ajv = void 0;\nconst core_1 = require(\"./core\");\nconst draft7_1 = require(\"./vocabularies/draft7\");\nconst discriminator_1 = require(\"./vocabularies/discriminator\");\nconst draft7MetaSchema = require(\"./refs/json-schema-draft-07.json\");\nconst META_SUPPORT_DATA = [\"/properties\"];\nconst META_SCHEMA_ID = \"http://json-schema.org/draft-07/schema\";\nclass Ajv extends core_1.default {\n    _addVocabularies() {\n        super._addVocabularies();\n        draft7_1.default.forEach((v) => this.addVocabulary(v));\n        if (this.opts.discriminator)\n            this.addKeyword(discriminator_1.default);\n    }\n    _addDefaultMetaSchema() {\n        super._addDefaultMetaSchema();\n        if (!this.opts.meta)\n            return;\n        const metaSchema = this.opts.$data\n            ? this.$dataMetaSchema(draft7MetaSchema, META_SUPPORT_DATA)\n            : draft7MetaSchema;\n        this.addMetaSchema(metaSchema, META_SCHEMA_ID, false);\n        this.refs[\"http://json-schema.org/schema\"] = META_SCHEMA_ID;\n    }\n    defaultMeta() {\n        return (this.opts.defaultMeta =\n            super.defaultMeta() || (this.getSchema(META_SCHEMA_ID) ? META_SCHEMA_ID : undefined));\n    }\n}\nexports.Ajv = Ajv;\nmodule.exports = exports = Ajv;\nmodule.exports.Ajv = Ajv;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = Ajv;\nvar validate_1 = require(\"./compile/validate\");\nObject.defineProperty(exports, \"KeywordCxt\", { enumerable: true, get: function () { return validate_1.KeywordCxt; } });\nvar codegen_1 = require(\"./compile/codegen\");\nObject.defineProperty(exports, \"_\", { enumerable: true, get: function () { return codegen_1._; } });\nObject.defineProperty(exports, \"str\", { enumerable: true, get: function () { return codegen_1.str; } });\nObject.defineProperty(exports, \"stringify\", { enumerable: true, get: function () { return codegen_1.stringify; } });\nObject.defineProperty(exports, \"nil\", { enumerable: true, get: function () { return codegen_1.nil; } });\nObject.defineProperty(exports, \"Name\", { enumerable: true, get: function () { return codegen_1.Name; } });\nObject.defineProperty(exports, \"CodeGen\", { enumerable: true, get: function () { return codegen_1.CodeGen; } });\nvar validation_error_1 = require(\"./runtime/validation_error\");\nObject.defineProperty(exports, \"ValidationError\", { enumerable: true, get: function () { return validation_error_1.default; } });\nvar ref_error_1 = require(\"./compile/ref_error\");\nObject.defineProperty(exports, \"MissingRefError\", { enumerable: true, get: function () { return ref_error_1.default; } });\n//# sourceMappingURL=ajv.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst formats_1 = require(\"./formats\");\nconst limit_1 = require(\"./limit\");\nconst codegen_1 = require(\"ajv/dist/compile/codegen\");\nconst fullName = new codegen_1.Name(\"fullFormats\");\nconst fastName = new codegen_1.Name(\"fastFormats\");\nconst formatsPlugin = (ajv, opts = { keywords: true }) => {\n    if (Array.isArray(opts)) {\n        addFormats(ajv, opts, formats_1.fullFormats, fullName);\n        return ajv;\n    }\n    const [formats, exportName] = opts.mode === \"fast\" ? [formats_1.fastFormats, fastName] : [formats_1.fullFormats, fullName];\n    const list = opts.formats || formats_1.formatNames;\n    addFormats(ajv, list, formats, exportName);\n    if (opts.keywords)\n        (0, limit_1.default)(ajv);\n    return ajv;\n};\nformatsPlugin.get = (name, mode = \"full\") => {\n    const formats = mode === \"fast\" ? formats_1.fastFormats : formats_1.fullFormats;\n    const f = formats[name];\n    if (!f)\n        throw new Error(`Unknown format \"${name}\"`);\n    return f;\n};\nfunction addFormats(ajv, list, fs, exportName) {\n    var _a;\n    var _b;\n    (_a = (_b = ajv.opts.code).formats) !== null && _a !== void 0 ? _a : (_b.formats = (0, codegen_1._) `require(\"ajv-formats/dist/formats\").${exportName}`);\n    for (const f of list)\n        ajv.addFormat(f, fs[f]);\n}\nmodule.exports = exports = formatsPlugin;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = formatsPlugin;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.formatNames = exports.fastFormats = exports.fullFormats = void 0;\nfunction fmtDef(validate, compare) {\n    return { validate, compare };\n}\nexports.fullFormats = {\n    // date: http://tools.ietf.org/html/rfc3339#section-5.6\n    date: fmtDef(date, compareDate),\n    // date-time: http://tools.ietf.org/html/rfc3339#section-5.6\n    time: fmtDef(getTime(true), compareTime),\n    \"date-time\": fmtDef(getDateTime(true), compareDateTime),\n    \"iso-time\": fmtDef(getTime(), compareIsoTime),\n    \"iso-date-time\": fmtDef(getDateTime(), compareIsoDateTime),\n    // duration: https://tools.ietf.org/html/rfc3339#appendix-A\n    duration: /^P(?!$)((\\d+Y)?(\\d+M)?(\\d+D)?(T(?=\\d)(\\d+H)?(\\d+M)?(\\d+S)?)?|(\\d+W)?)$/,\n    uri,\n    \"uri-reference\": /^(?:[a-z][a-z0-9+\\-.]*:)?(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'\"()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\\?(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,\n    // uri-template: https://tools.ietf.org/html/rfc6570\n    \"uri-template\": /^(?:(?:[^\\x00-\\x20\"'<>%\\\\^`{|}]|%[0-9a-f]{2})|\\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?)*\\})*$/i,\n    // For the source: https://gist.github.com/dperini/729294\n    // For test cases: https://mathiasbynens.be/demo/url-regex\n    url: /^(?:https?|ftp):\\/\\/(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z0-9\\u{00a1}-\\u{ffff}]+-)*[a-z0-9\\u{00a1}-\\u{ffff}]+)(?:\\.(?:[a-z0-9\\u{00a1}-\\u{ffff}]+-)*[a-z0-9\\u{00a1}-\\u{ffff}]+)*(?:\\.(?:[a-z\\u{00a1}-\\u{ffff}]{2,})))(?::\\d{2,5})?(?:\\/[^\\s]*)?$/iu,\n    email: /^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,\n    hostname: /^(?=.{1,253}\\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\\.?$/i,\n    // optimized https://www.safaribooksonline.com/library/view/regular-expressions-cookbook/9780596802837/ch07s16.html\n    ipv4: /^(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)\\.){3}(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)$/,\n    ipv6: /^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))$/i,\n    regex,\n    // uuid: http://tools.ietf.org/html/rfc4122\n    uuid: /^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,\n    // JSON-pointer: https://tools.ietf.org/html/rfc6901\n    // uri fragment: https://tools.ietf.org/html/rfc3986#appendix-A\n    \"json-pointer\": /^(?:\\/(?:[^~/]|~0|~1)*)*$/,\n    \"json-pointer-uri-fragment\": /^#(?:\\/(?:[a-z0-9_\\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,\n    // relative JSON-pointer: http://tools.ietf.org/html/draft-luff-relative-json-pointer-00\n    \"relative-json-pointer\": /^(?:0|[1-9][0-9]*)(?:#|(?:\\/(?:[^~/]|~0|~1)*)*)$/,\n    // the following formats are used by the openapi specification: https://spec.openapis.org/oas/v3.0.0#data-types\n    // byte: https://github.com/miguelmota/is-base64\n    byte,\n    // signed 32 bit integer\n    int32: { type: \"number\", validate: validateInt32 },\n    // signed 64 bit integer\n    int64: { type: \"number\", validate: validateInt64 },\n    // C-type float\n    float: { type: \"number\", validate: validateNumber },\n    // C-type double\n    double: { type: \"number\", validate: validateNumber },\n    // hint to the UI to hide input strings\n    password: true,\n    // unchecked string payload\n    binary: true,\n};\nexports.fastFormats = {\n    ...exports.fullFormats,\n    date: fmtDef(/^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d$/, compareDate),\n    time: fmtDef(/^(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)$/i, compareTime),\n    \"date-time\": fmtDef(/^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\dt(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)$/i, compareDateTime),\n    \"iso-time\": fmtDef(/^(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)?$/i, compareIsoTime),\n    \"iso-date-time\": fmtDef(/^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d[t\\s](?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)?$/i, compareIsoDateTime),\n    // uri: https://github.com/mafintosh/is-my-json-valid/blob/master/formats.js\n    uri: /^(?:[a-z][a-z0-9+\\-.]*:)(?:\\/?\\/)?[^\\s]*$/i,\n    \"uri-reference\": /^(?:(?:[a-z][a-z0-9+\\-.]*:)?\\/?\\/)?(?:[^\\\\\\s#][^\\s#]*)?(?:#[^\\\\\\s]*)?$/i,\n    // email (sources from jsen validator):\n    // http://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address#answer-8829363\n    // http://www.w3.org/TR/html5/forms.html#valid-e-mail-address (search for 'wilful violation')\n    email: /^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,\n};\nexports.formatNames = Object.keys(exports.fullFormats);\nfunction isLeapYear(year) {\n    // https://tools.ietf.org/html/rfc3339#appendix-C\n    return year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0);\n}\nconst DATE = /^(\\d\\d\\d\\d)-(\\d\\d)-(\\d\\d)$/;\nconst DAYS = [0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\nfunction date(str) {\n    // full-date from http://tools.ietf.org/html/rfc3339#section-5.6\n    const matches = DATE.exec(str);\n    if (!matches)\n        return false;\n    const year = +matches[1];\n    const month = +matches[2];\n    const day = +matches[3];\n    return (month >= 1 &&\n        month <= 12 &&\n        day >= 1 &&\n        day <= (month === 2 && isLeapYear(year) ? 29 : DAYS[month]));\n}\nfunction compareDate(d1, d2) {\n    if (!(d1 && d2))\n        return undefined;\n    if (d1 > d2)\n        return 1;\n    if (d1 < d2)\n        return -1;\n    return 0;\n}\nconst TIME = /^(\\d\\d):(\\d\\d):(\\d\\d(?:\\.\\d+)?)(z|([+-])(\\d\\d)(?::?(\\d\\d))?)?$/i;\nfunction getTime(strictTimeZone) {\n    return function time(str) {\n        const matches = TIME.exec(str);\n        if (!matches)\n            return false;\n        const hr = +matches[1];\n        const min = +matches[2];\n        const sec = +matches[3];\n        const tz = matches[4];\n        const tzSign = matches[5] === \"-\" ? -1 : 1;\n        const tzH = +(matches[6] || 0);\n        const tzM = +(matches[7] || 0);\n        if (tzH > 23 || tzM > 59 || (strictTimeZone && !tz))\n            return false;\n        if (hr <= 23 && min <= 59 && sec < 60)\n            return true;\n        // leap second\n        const utcMin = min - tzM * tzSign;\n        const utcHr = hr - tzH * tzSign - (utcMin < 0 ? 1 : 0);\n        return (utcHr === 23 || utcHr === -1) && (utcMin === 59 || utcMin === -1) && sec < 61;\n    };\n}\nfunction compareTime(s1, s2) {\n    if (!(s1 && s2))\n        return undefined;\n    const t1 = new Date(\"2020-01-01T\" + s1).valueOf();\n    const t2 = new Date(\"2020-01-01T\" + s2).valueOf();\n    if (!(t1 && t2))\n        return undefined;\n    return t1 - t2;\n}\nfunction compareIsoTime(t1, t2) {\n    if (!(t1 && t2))\n        return undefined;\n    const a1 = TIME.exec(t1);\n    const a2 = TIME.exec(t2);\n    if (!(a1 && a2))\n        return undefined;\n    t1 = a1[1] + a1[2] + a1[3];\n    t2 = a2[1] + a2[2] + a2[3];\n    if (t1 > t2)\n        return 1;\n    if (t1 < t2)\n        return -1;\n    return 0;\n}\nconst DATE_TIME_SEPARATOR = /t|\\s/i;\nfunction getDateTime(strictTimeZone) {\n    const time = getTime(strictTimeZone);\n    return function date_time(str) {\n        // http://tools.ietf.org/html/rfc3339#section-5.6\n        const dateTime = str.split(DATE_TIME_SEPARATOR);\n        return dateTime.length === 2 && date(dateTime[0]) && time(dateTime[1]);\n    };\n}\nfunction compareDateTime(dt1, dt2) {\n    if (!(dt1 && dt2))\n        return undefined;\n    const d1 = new Date(dt1).valueOf();\n    const d2 = new Date(dt2).valueOf();\n    if (!(d1 && d2))\n        return undefined;\n    return d1 - d2;\n}\nfunction compareIsoDateTime(dt1, dt2) {\n    if (!(dt1 && dt2))\n        return undefined;\n    const [d1, t1] = dt1.split(DATE_TIME_SEPARATOR);\n    const [d2, t2] = dt2.split(DATE_TIME_SEPARATOR);\n    const res = compareDate(d1, d2);\n    if (res === undefined)\n        return undefined;\n    return res || compareTime(t1, t2);\n}\nconst NOT_URI_FRAGMENT = /\\/|:/;\nconst URI = /^(?:[a-z][a-z0-9+\\-.]*:)(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\\?(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;\nfunction uri(str) {\n    // http://jmrware.com/articles/2009/uri_regexp/URI_regex.html + optional protocol + required \".\"\n    return NOT_URI_FRAGMENT.test(str) && URI.test(str);\n}\nconst BYTE = /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;\nfunction byte(str) {\n    BYTE.lastIndex = 0;\n    return BYTE.test(str);\n}\nconst MIN_INT32 = -(2 ** 31);\nconst MAX_INT32 = 2 ** 31 - 1;\nfunction validateInt32(value) {\n    return Number.isInteger(value) && value <= MAX_INT32 && value >= MIN_INT32;\n}\nfunction validateInt64(value) {\n    // JSON and javascript max Int is 2**53, so any int that passes isInteger is valid for Int64\n    return Number.isInteger(value);\n}\nfunction validateNumber() {\n    return true;\n}\nconst Z_ANCHOR = /[^\\\\]\\\\Z/;\nfunction regex(str) {\n    if (Z_ANCHOR.test(str))\n        return false;\n    try {\n        new RegExp(str);\n        return true;\n    }\n    catch (e) {\n        return false;\n    }\n}\n//# sourceMappingURL=formats.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.formatLimitDefinition = void 0;\nconst ajv_1 = require(\"ajv\");\nconst codegen_1 = require(\"ajv/dist/compile/codegen\");\nconst ops = codegen_1.operators;\nconst KWDs = {\n    formatMaximum: { okStr: \"<=\", ok: ops.LTE, fail: ops.GT },\n    formatMinimum: { okStr: \">=\", ok: ops.GTE, fail: ops.LT },\n    formatExclusiveMaximum: { okStr: \"<\", ok: ops.LT, fail: ops.GTE },\n    formatExclusiveMinimum: { okStr: \">\", ok: ops.GT, fail: ops.LTE },\n};\nconst error = {\n    message: ({ keyword, schemaCode }) => (0, codegen_1.str) `should be ${KWDs[keyword].okStr} ${schemaCode}`,\n    params: ({ keyword, schemaCode }) => (0, codegen_1._) `{comparison: ${KWDs[keyword].okStr}, limit: ${schemaCode}}`,\n};\nexports.formatLimitDefinition = {\n    keyword: Object.keys(KWDs),\n    type: \"string\",\n    schemaType: \"string\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, schemaCode, keyword, it } = cxt;\n        const { opts, self } = it;\n        if (!opts.validateFormats)\n            return;\n        const fCxt = new ajv_1.KeywordCxt(it, self.RULES.all.format.definition, \"format\");\n        if (fCxt.$data)\n            validate$DataFormat();\n        else\n            validateFormat();\n        function validate$DataFormat() {\n            const fmts = gen.scopeValue(\"formats\", {\n                ref: self.formats,\n                code: opts.code.formats,\n            });\n            const fmt = gen.const(\"fmt\", (0, codegen_1._) `${fmts}[${fCxt.schemaCode}]`);\n            cxt.fail$data((0, codegen_1.or)((0, codegen_1._) `typeof ${fmt} != \"object\"`, (0, codegen_1._) `${fmt} instanceof RegExp`, (0, codegen_1._) `typeof ${fmt}.compare != \"function\"`, compareCode(fmt)));\n        }\n        function validateFormat() {\n            const format = fCxt.schema;\n            const fmtDef = self.formats[format];\n            if (!fmtDef || fmtDef === true)\n                return;\n            if (typeof fmtDef != \"object\" ||\n                fmtDef instanceof RegExp ||\n                typeof fmtDef.compare != \"function\") {\n                throw new Error(`\"${keyword}\": format \"${format}\" does not define \"compare\" function`);\n            }\n            const fmt = gen.scopeValue(\"formats\", {\n                key: format,\n                ref: fmtDef,\n                code: opts.code.formats ? (0, codegen_1._) `${opts.code.formats}${(0, codegen_1.getProperty)(format)}` : undefined,\n            });\n            cxt.fail$data(compareCode(fmt));\n        }\n        function compareCode(fmt) {\n            return (0, codegen_1._) `${fmt}.compare(${data}, ${schemaCode}) ${KWDs[keyword].fail} 0`;\n        }\n    },\n    dependencies: [\"format\"],\n};\nconst formatLimitPlugin = (ajv) => {\n    ajv.addKeyword(exports.formatLimitDefinition);\n    return ajv;\n};\nexports.default = formatLimitPlugin;\n//# sourceMappingURL=limit.js.map","/**\n * JsonMiller - A Miller Column JSON Editor Library\n */\nimport Ajv from 'ajv';\nimport addFormats from 'ajv-formats';\nimport styles from './style.css';\n\nexport class JsonMiller {\n    constructor(container, config = {}) {\n        this.container = typeof container === 'string' ? document.querySelector(container) : container;\n        if (!this.container) {\n            throw new Error(\"JsonMiller: Container not found\");\n        }\n\n        this.title = config.title || \"Miller Column JSON Editor\";\n        this.data = config.data || {};\n        this.rootSchema = config.schema || {};\n        this.ajvInstance = config.ajv || null;\n        this.isLocked = false;\n        this.showLockBtn = config.showLockBtn !== false; // Default true\n        this.enableJsonEdit = config.enableJsonEdit === true; // Default false\n        this.isJsonEditMode = false;\n\n        this.selectionPath = []; // Array of keys/indices\n        this.focusedPath = null;\n\n        // Theme state\n        this.isDark = true;\n\n        // Create internal DOM structure\n        this._createDom();\n\n        // Init Theme\n        this._initTheme();\n\n        // Init AJV\n        this._loadAjv();\n\n        this.init();\n\n    }\n\n    _createDom() {\n        // Attach Shadow DOM\n        this.shadowRoot = this.container.attachShadow({ mode: 'open' });\n\n        // Inject Styles\n        const style = document.createElement('style');\n        style.textContent = styles;\n        this.shadowRoot.appendChild(style);\n\n        // Create Wrapper\n        this.wrapper = document.createElement('div');\n        this.wrapper.className = 'json-miller-container';\n\n        // Create Header\n        this.header = document.createElement('header');\n        this.header.innerHTML = `\n            <h3>${this.title}</h3>\n            <div style=\"display: flex; gap: 10px;\">\n                <button class=\"jm-theme-btn\" title=\"Toggle Theme\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"20\" viewBox=\"0 -960 960 960\" width=\"20\" fill=\"currentColor\"><path d=\"M480-120q-150 0-255-105T120-480q0-150 105-255t255-105q14 0 27.5 1t26.5 3q-41 29-65.5 75.5T444-660q0 90 63 153t153 63q55 0 101-24.5t75-65.5q2 13 3 26.5t1 27.5q0 150-105 255T480-120Z\"/></svg>\n                </button>\n                </button>\n                ${this.showLockBtn ? `<button class=\"jm-lock-btn\" title=\"Lock/Unlock\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"20\" viewBox=\"0 -960 960 960\" width=\"20\" fill=\"currentColor\"><path d=\"M240-80q-33 0-56.5-23.5T160-160v-400q0-33 23.5-56.5T240-640h40v-80q0-83 58.5-141.5T480-920q83 0 141.5 58.5T680-720v80h80v80h-80v-160q0-50-35-85t-85-35q-50 0-85 35t-35 85v80H240v400h480v-240h80v240q0 33-23.5 56.5T720-80H240Zm240-120q33 0 56.5-23.5T560-360q0-33-23.5-56.5T480-440q-33 0-56.5 23.5T400-360q0 33 23.5 56.5T480-280Z\"/></svg>\n                </button>` : ''}\n                ${this.enableJsonEdit ? `<button class=\"jm-json-edit-btn\" title=\"Edit JSON\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"20\" viewBox=\"0 -960 960 960\" width=\"20\" fill=\"currentColor\"><path d=\"M200-200h57l391-391-57-57-391 391v57Zm-80 80v-170l528-527q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L290-120H120Zm640-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z\"/></svg>\n                </button>` : ''}\n                <button class=\"jm-copy-btn\" title=\"Copy JSON\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"20\" viewBox=\"0 -960 960 960\" width=\"20\" fill=\"currentColor\"><path d=\"M360-240q-33 0-56.5-23.5T280-320v-480q0-33 23.5-56.5T360-880h360q33 0 56.5 23.5T800-800v480q0 33-23.5 56.5T720-240H360Zm0-80h360v-480H360v480ZM200-80q-33 0-56.5-23.5T120-160v-560h80v560h440v80H200Zm160-240v-480 480Z\"/></svg>\n                </button>\n            </div>\n        `;\n\n        // Create Body\n        const body = document.createElement('div');\n        body.className = 'jm-body';\n        // Ensure body takes remaining space\n        body.style.display = 'flex';\n        body.style.flexDirection = 'column';\n        body.style.flex = '1';\n        body.style.minHeight = '0';\n        body.style.overflow = 'hidden';\n\n        body.innerHTML = `\n            <div class=\"jm-breadcrumbs\"></div>\n            <div class=\"jm-workspace\">\n                <div class=\"jm-editor\"></div>\n                <div class=\"jm-output\"></div>\n            </div>\n        `;\n\n        this.wrapper.appendChild(this.header);\n        this.wrapper.appendChild(body);\n        this.shadowRoot.appendChild(this.wrapper);\n\n        this.breadcrumbsContainer = this.wrapper.querySelector('.jm-breadcrumbs');\n        this.editorContainer = this.wrapper.querySelector('.jm-editor');\n        this.outputContainer = this.wrapper.querySelector('.jm-output');\n\n        this.themeBtn = this.header.querySelector('.jm-theme-btn');\n        this.lockBtn = this.header.querySelector('.jm-lock-btn');\n        this.copyBtn = this.header.querySelector('.jm-copy-btn');\n        this.jsonEditBtn = this.header.querySelector('.jm-json-edit-btn');\n\n        // Bind events\n        this.themeBtn.onclick = () => this.toggleTheme();\n        if (this.lockBtn) this.lockBtn.onclick = () => this.toggleLock();\n        this.copyBtn.onclick = () => this.copyJson();\n        if (this.jsonEditBtn) this.jsonEditBtn.onclick = () => this.toggleJsonEditMode();\n    }\n\n    _loadAjv() {\n        if (this.ajvInstance) {\n            this._ajv = this.ajvInstance;\n            this._validateFn = this._ajv.compile(this.rootSchema);\n            return;\n        }\n\n        // Use bundled Ajv\n        this._ajv = addFormats(new Ajv({ allErrors: true }));\n        this._validateFn = this._ajv.compile(this.rootSchema);\n    }\n\n    get ajv() {\n        return this._ajv;\n    }\n\n    get validateFn() {\n        return this._validateFn;\n    }\n\n    init() {\n        // If AJV is loading async (e.g. via script tag), we might need to wait.\n        // But for a library, we usually expect dependencies to be ready.\n        // We'll just render.\n        this.render();\n    }\n\n    // --- Public API ---\n\n    setData(data) {\n        this.data = data;\n        this.selectionPath = []; // Reset selection? Or try to keep it? Resetting is safer.\n        this.render();\n    }\n\n    setSchema(schema) {\n        this.rootSchema = schema;\n        if (this._ajv) {\n            this._validateFn = this._ajv.compile(this.rootSchema);\n        }\n        this.render();\n    }\n\n    lock() {\n        this.isLocked = true;\n        this.container.classList.add('jm-locked');\n        if (this.lockBtn) this.lockBtn.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"20\" viewBox=\"0 -960 960 960\" width=\"20\" fill=\"currentColor\"><path d=\"M240-80q-33 0-56.5-23.5T160-160v-400q0-33 23.5-56.5T240-640h40v-80q0-83 58.5-141.5T480-920q83 0 141.5 58.5T680-720v80h40q33 0 56.5 23.5T800-560v400q0 33-23.5 56.5T720-80H240Zm0-80h480v-400H240v400Zm240-120q33 0 56.5-23.5T560-360q0-33-23.5-56.5T480-440q-33 0-56.5 23.5T400-360q0 33 23.5 56.5T480-280ZM360-640h240v-80q0-50-35-85t-85-35q-50 0-85 35t-35 85v80ZM240-160v-400 400Z\"/></svg>';\n        this.render({ preserveScroll: true });\n    }\n\n    unlock() {\n        this.isLocked = false;\n        this.container.classList.remove('jm-locked');\n        if (this.lockBtn) this.lockBtn.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"20\" viewBox=\"0 -960 960 960\" width=\"20\" fill=\"currentColor\"><path d=\"M240-80q-33 0-56.5-23.5T160-160v-400q0-33 23.5-56.5T240-640h40v-80q0-83 58.5-141.5T480-920q83 0 141.5 58.5T680-720v80h80v80h-80v-160q0-50-35-85t-85-35q-50 0-85 35t-35 85v80H240v400h480v-240h80v240q0 33-23.5 56.5T720-80H240Zm240-120q33 0 56.5-23.5T560-360q0-33-23.5-56.5T480-440q-33 0-56.5 23.5T400-360q0 33 23.5 56.5T480-280Z\"/></svg>';\n        this.render({ preserveScroll: true });\n    }\n\n    toggleLock() {\n        if (this.isLocked) {\n            this.unlock();\n        } else {\n            this.lock();\n        }\n    }\n\n    getValue() {\n        return this.data;\n    }\n\n    getErrors() {\n        return this.validate(this.data);\n    }\n\n    destroy() {\n        this.container.innerHTML = '';\n        this.container.classList.remove('json-miller-container', 'jm-locked');\n    }\n\n    // --- Header Actions ---\n\n    _initTheme() {\n        // Check system preference\n        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches) {\n            this.isDark = false;\n        }\n        this._updateTheme();\n    }\n\n    toggleTheme() {\n        this.isDark = !this.isDark;\n        this._updateTheme();\n    }\n\n    _updateTheme() {\n        if (this.isDark) {\n            this.container.setAttribute('data-theme', 'dark');\n            if (this.themeBtn) this.themeBtn.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"20\" viewBox=\"0 -960 960 960\" width=\"20\" fill=\"currentColor\"><path d=\"M480-120q-150 0-255-105T120-480q0-150 105-255t255-105q14 0 27.5 1t26.5 3q-41 29-65.5 75.5T444-660q0 90 63 153t153 63q55 0 101-24.5t75-65.5q2 13 3 26.5t1 27.5q0 150-105 255T480-120Z\"/></svg>';\n        } else {\n            this.container.setAttribute('data-theme', 'light');\n            if (this.themeBtn) this.themeBtn.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"20\" viewBox=\"0 -960 960 960\" width=\"20\" fill=\"currentColor\"><path d=\"M480-280q-83 0-141.5-58.5T280-480q0-83 58.5-141.5T480-680q83 0 141.5 58.5T680-480q0 83-58.5 141.5T480-280ZM200-440H40v-80h160v80Zm720 0H760v-80h160v80ZM440-760v-160h80v160h-80Zm0 720v-160h80v160h-80ZM256-650l-101-97 57-59 96 100-52 56Zm492 496-97-101 53-55 101 97-57 59Zm-98-550 97-101 59 57-100 96-56-52ZM154-212l101-97 55 53-97 101-59-57Z\"/></svg>';\n        }\n    }\n\n    copyJson() {\n        navigator.clipboard.writeText(JSON.stringify(this.data, null, 2));\n        alert(\"JSON copied to clipboard\");\n    }\n\n    toggleJsonEditMode() {\n        if (this.isJsonEditMode) {\n            // Saving\n            const textarea = this.outputContainer.querySelector('textarea');\n            if (textarea) {\n                try {\n                    this.isJsonEditMode = false;\n                    const editIcon = `<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"20\" viewBox=\"0 -960 960 960\" width=\"20\" fill=\"currentColor\"><path d=\"M200-200h57l391-391-57-57-391 391v57Zm-80 80v-170l528-527q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L290-120H120Zm640-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z\"/></svg>`;\n                    this.jsonEditBtn.innerHTML = editIcon;\n                    this.jsonEditBtn.title = \"Edit JSON\";\n                    const newData = JSON.parse(textarea.value);\n                    this.setData(newData);\n                } catch (e) {\n                    alert(\"Invalid JSON: \" + e.message);\n                    return; // Stay in edit mode\n                }\n            }\n        } else {\n            // Switching to edit mode\n            this.isJsonEditMode = true;\n            const saveIcon = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"m20.71 9.29l-6-6a1 1 0 0 0-.32-.21A1.09 1.09 0 0 0 14 3H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3v-8a1 1 0 0 0-.29-.71ZM9 5h4v2H9Zm6 14H9v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1Zm4-1a1 1 0 0 1-1 1h-1v-3a3 3 0 0 0-3-3h-4a3 3 0 0 0-3 3v3H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h1v3a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V6.41l4 4Z\"/></svg>`\n            this.jsonEditBtn.innerHTML = saveIcon;\n            this.jsonEditBtn.title = \"Save JSON\";\n            this.render();\n        }\n    }\n\n    // --- Data Helpers ---\n\n    getValueAt(path) {\n        return path.reduce((acc, key) => (acc && acc[key] !== undefined) ? acc[key] : undefined, this.data);\n    }\n\n    setValueAt(path, value) {\n        if (this.isLocked) return;\n\n        if (path.length === 0) {\n            this.data = value;\n        } else {\n            const lastKey = path[path.length - 1];\n            const parentPath = path.slice(0, -1);\n            const parent = this.getValueAt(parentPath);\n            parent[lastKey] = value;\n        }\n        this.render({ preserveScroll: true });\n    }\n\n    getType(value) {\n        if (value === null) return 'null';\n        if (Array.isArray(value)) return 'array';\n        return typeof value;\n    }\n\n    deleteValueAt(path) {\n        if (this.isLocked) return;\n        if (path.length === 0) return; // Cannot delete root\n\n        const lastKey = path[path.length - 1];\n        const parentPath = path.slice(0, -1);\n        const parent = this.getValueAt(parentPath);\n\n        if (Array.isArray(parent)) {\n            parent.splice(Number(lastKey), 1);\n        } else {\n            delete parent[lastKey];\n        }\n        this.render({ preserveScroll: true });\n    }\n\n    getDefaultValue(schema) {\n        if (!schema) return \"\";\n        if (schema.default !== undefined) return schema.default;\n\n        const type = Array.isArray(schema.type) ? schema.type[0] : schema.type;\n\n        if (type === 'string') return \"\";\n        if (type === 'number') return 0;\n        if (type === 'boolean') return false;\n        if (type === 'object') {\n            const obj = {};\n            if (schema.required) {\n                schema.required.forEach(reqKey => {\n                    if (schema.properties && schema.properties[reqKey]) {\n                        obj[reqKey] = this.getDefaultValue(schema.properties[reqKey]);\n                    }\n                });\n            }\n            return obj;\n        }\n        if (type === 'array') return [];\n        return null;\n    }\n\n    isRequired(parentSchema, key) {\n        if (!parentSchema || !parentSchema.required) return false;\n        return parentSchema.required.includes(key);\n    }\n\n    validate(data) {\n        const errors = new Set();\n        if (!this.validateFn) return errors;\n\n        const valid = this.validateFn(data);\n        if (!valid) {\n            this.validateFn.errors.forEach(err => {\n                const pathStr = err.instancePath;\n                if (pathStr) {\n                    const parts = pathStr.split('/').filter(p => p !== \"\");\n                    const pathArray = parts.map(p => {\n                        return isNaN(p) ? p : Number(p);\n                    });\n                    errors.add(JSON.stringify(pathArray));\n                } else {\n                    errors.add(JSON.stringify([]));\n                }\n            });\n        }\n        return errors;\n    }\n\n    // --- Schema Inference ---\n\n    getSchemaForPath(path) {\n        let currentSchema = this.rootSchema;\n\n        for (let key of path) {\n            if (!currentSchema) return null;\n\n            if (currentSchema.type === 'array' && !isNaN(key)) {\n                currentSchema = currentSchema.items;\n                continue;\n            }\n\n            if (currentSchema.properties && currentSchema.properties[key]) {\n                currentSchema = currentSchema.properties[key];\n                continue;\n            }\n\n            return null;\n        }\n        return currentSchema;\n    }\n\n    getAvailableTypes(schemaNode) {\n        if (!schemaNode) return ['string', 'number', 'boolean', 'object', 'array', 'null'];\n\n        if (schemaNode.oneOf) {\n            return schemaNode.oneOf.map(s => s.type);\n        }\n        if (schemaNode.type) {\n            return Array.isArray(schemaNode.type) ? schemaNode.type : [schemaNode.type];\n        }\n        return ['string']; // Default\n    }\n\n    // --- Rendering ---\n\n    render(options = {}) {\n        const preserveScroll = options.preserveScroll || false;\n        const previousScrollLeft = this.editorContainer.scrollLeft;\n\n        this.editorContainer.innerHTML = '';\n\n        // Update Output JSON\n        if (this.isJsonEditMode) {\n            this.outputContainer.innerHTML = '';\n            const textarea = document.createElement('textarea');\n            textarea.value = JSON.stringify(this.data, null, 2);\n            textarea.style.width = '100%';\n            textarea.style.height = '100%';\n            textarea.style.border = 'none';\n            textarea.style.resize = 'none';\n            textarea.style.background = 'transparent';\n            textarea.style.color = 'inherit';\n            textarea.style.fontFamily = 'monospace';\n            textarea.style.outline = 'none';\n            this.outputContainer.appendChild(textarea);\n\n            // Focus and select all? Maybe just focus.\n            textarea.focus();\n        } else {\n            this.outputContainer.innerHTML = this.renderJsonHtml(this.data);\n        }\n\n        // Render Breadcrumbs\n        this.renderBreadcrumbs();\n\n        // Run validation once to get all errors\n        const validationErrors = this.validate(this.data);\n\n        // Always render root level\n        this.renderColumn([], this.data, validationErrors);\n\n        // Render subsequent columns based on selectionPath\n        let currentPath = [];\n\n        for (const key of this.selectionPath) {\n            currentPath.push(key);\n            const value = this.getValueAt(currentPath);\n\n            if (value && typeof value === 'object') {\n                this.renderColumn([...currentPath], value, validationErrors);\n            } else {\n                break;\n            }\n        }\n\n        // Handle scrolling\n        if (preserveScroll) {\n            this.editorContainer.scrollLeft = previousScrollLeft;\n        } else {\n            this.editorContainer.scrollLeft = this.editorContainer.scrollWidth;\n        }\n    }\n\n    renderJsonHtml(data, path = []) {\n        if (data === null) return `<span class=\"json-value type-null\">null</span>`;\n        if (typeof data === 'string') return `<span class=\"json-value type-string\">\"${data}\"</span>`;\n        if (typeof data === 'number') return `<span class=\"json-value type-number\">${data}</span>`;\n        if (typeof data === 'boolean') return `<span class=\"json-value type-boolean\">${data}</span>`;\n\n        const isArray = Array.isArray(data);\n        const openChar = isArray ? '[' : '{';\n        const closeChar = isArray ? ']' : '}';\n        const keys = Object.keys(data);\n\n        if (keys.length === 0) return `${openChar}${closeChar}`;\n\n        let html = `${openChar}\\n`;\n        keys.forEach((key, index) => {\n            const currentPath = [...path, isArray ? Number(key) : key];\n            const pathStr = JSON.stringify(currentPath);\n            const value = data[key];\n            const isLast = index === keys.length - 1;\n            const comma = isLast ? '' : ',';\n            const indent = '  '.repeat(path.length + 1);\n            const keyHtml = isArray ? '' : `<span class=\"json-key\">\"${key}\"</span>: `;\n            const valueHtml = this.renderJsonHtml(value, currentPath);\n\n            html += `<div class=\"json-line\" data-path='${pathStr}'>${indent}${keyHtml}${valueHtml}${comma}</div>`;\n        });\n        html += `${'  '.repeat(path.length)}${closeChar}`;\n        return html;\n    }\n\n    renderBreadcrumbs() {\n        this.breadcrumbsContainer.innerHTML = '';\n\n        const fullPath = ['ROOT', ...this.selectionPath];\n\n        fullPath.forEach((item, index) => {\n            if (index > 0) {\n                const sep = document.createElement('span');\n                sep.className = 'breadcrumb-separator';\n                sep.innerText = '>';\n                this.breadcrumbsContainer.appendChild(sep);\n            }\n\n            const el = document.createElement('span');\n            el.className = 'breadcrumb-item';\n            el.innerText = item;\n\n            if (index === fullPath.length - 1) {\n                el.classList.add('active');\n            } else {\n                el.onclick = () => {\n                    this.selectionPath = this.selectionPath.slice(0, index);\n                    this.render();\n                };\n            }\n            this.breadcrumbsContainer.appendChild(el);\n        });\n\n        // Copy Path Button\n        if (this.selectionPath.length > 0) {\n            const copyBtn = document.createElement('button');\n            copyBtn.className = 'breadcrumb-copy-btn';\n            copyBtn.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"16\" viewBox=\"0 -960 960 960\" width=\"16\" fill=\"currentColor\"><path d=\"M360-240q-33 0-56.5-23.5T280-320v-480q0-33 23.5-56.5T360-880h360q33 0 56.5 23.5T800-800v480q0 33-23.5 56.5T720-240H360Zm0-80h360v-480H360v480ZM200-80q-33 0-56.5-23.5T120-160v-560h80v560h440v80H200Zm160-240v-480 480Z\"/></svg>';\n            copyBtn.title = 'Copy Path';\n            copyBtn.onclick = (e) => {\n                e.stopPropagation();\n                let pathStr = '';\n                this.selectionPath.forEach((key, i) => {\n                    if (typeof key === 'number') {\n                        pathStr += `[${key}]`;\n                    } else {\n                        if (i > 0) pathStr += '.';\n                        pathStr += key;\n                    }\n                });\n                navigator.clipboard.writeText(pathStr);\n\n                // Visual feedback\n                const originalIcon = copyBtn.innerHTML;\n                copyBtn.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"16\" viewBox=\"0 -960 960 960\" width=\"16\" fill=\"currentColor\"><path d=\"M382-240 154-468l57-57 171 171 367-367 57 57-424 424Z\"/></svg>';\n                setTimeout(() => {\n                    copyBtn.innerHTML = originalIcon;\n                }, 1500);\n            };\n            this.breadcrumbsContainer.appendChild(copyBtn);\n        }\n    }\n\n    renderColumn(path, dataContext, validationErrors = new Set()) {\n        const col = document.createElement('div');\n        col.className = 'column';\n\n        const header = document.createElement('div');\n        header.className = 'column-header';\n\n        let headerText = 'ROOT';\n        if (path.length > 0) {\n            const lastKey = path[path.length - 1];\n            const schema = this.getSchemaForPath(path);\n            const isArrayItem = !isNaN(lastKey);\n\n            let title = '';\n\n            if (schema && schema.title) {\n                title = schema.title;\n            } else {\n                if (isArrayItem) {\n                    const parentPath = path.slice(0, -1);\n                    const parentLastKey = parentPath.length > 0 ? parentPath[parentPath.length - 1] : 'Item';\n                    title = String(parentLastKey);\n                } else {\n                    title = String(lastKey);\n                }\n                // Capitalize first letter\n                title = title.charAt(0).toUpperCase() + title.slice(1);\n            }\n\n            title = title.replaceAll(/[-_]/g, ' ');\n            if (isArrayItem) {\n                headerText = `${title} #${lastKey}`;\n            } else {\n                headerText = title;\n            }\n        }\n\n        header.innerText = headerText;\n        col.appendChild(header);\n\n        const keys = Object.keys(dataContext);\n\n        keys.forEach(key => {\n            const fullPath = [...path, Array.isArray(dataContext) ? Number(key) : key];\n            const value = dataContext[key];\n            const valueType = this.getType(value);\n            const isComplex = valueType === 'object' || valueType === 'array';\n\n            const fieldSchema = this.getSchemaForPath(fullPath);\n            const parentSchema = this.getSchemaForPath(path);\n            const isRequired = !Array.isArray(dataContext) && this.isRequired(parentSchema, key);\n\n            const row = document.createElement('div');\n            row.className = 'row';\n            row.setAttribute('data-path', JSON.stringify(fullPath));\n\n            const pathStr = JSON.stringify(fullPath);\n            if (validationErrors.has(pathStr)) {\n                row.classList.add('has-error');\n            } else {\n                for (let errPath of validationErrors) {\n                    if (errPath.startsWith(pathStr.slice(0, -1) + ',')) {\n                        row.classList.add('child-error');\n                        break;\n                    }\n                }\n            }\n\n            row.onmouseenter = () => {\n                const pathStr = JSON.stringify(fullPath);\n                const jsonLine = this.outputContainer.querySelector(`.json-line[data-path='${pathStr}']`);\n                if (jsonLine) {\n                    jsonLine.classList.add('highlight');\n                    jsonLine.scrollIntoView({ behavior: 'smooth', block: 'center' });\n                }\n            };\n            row.onmouseleave = () => {\n                const pathStr = JSON.stringify(fullPath);\n                const jsonLine = this.outputContainer.querySelector(`.json-line[data-path='${pathStr}']`);\n                if (jsonLine) {\n                    jsonLine.classList.remove('highlight');\n                }\n            };\n\n            const isSelected = this.selectionPath.length > path.length &&\n                this.selectionPath[path.length] == key;\n            if (isSelected) row.classList.add('active');\n            if (!isComplex) row.classList.add('scalar-row');\n\n            const rowHeader = document.createElement('div');\n            rowHeader.className = 'row-header';\n\n            const label = document.createElement('span');\n            label.className = 'key-label';\n            label.title = key; // Native tooltip\n            if (isRequired) label.classList.add('required');\n            else label.classList.add('optional');\n            label.innerText = key;\n\n            const allowedTypes = this.getAvailableTypes(fieldSchema);\n            const typeBadge = document.createElement('select');\n            typeBadge.className = 'type-badge';\n            typeBadge.disabled = this.isLocked;\n\n            const typeIcons = {\n                'string': 'abc',\n                'number': '#',\n                'boolean': '?',\n                'object': '{}',\n                'array': '[]',\n                'null': ''\n            };\n\n            typeBadge.classList.add(`type-${valueType}`);\n\n            allowedTypes.forEach(t => {\n                const opt = document.createElement('option');\n                opt.value = t;\n                opt.innerText = typeIcons[t] || t;\n                if (t === valueType) opt.selected = true;\n                typeBadge.appendChild(opt);\n            });\n\n            typeBadge.onchange = (e) => {\n                const newType = e.target.value;\n                let newValue;\n                if (newType === 'string') newValue = \"\";\n                else if (newType === 'number') newValue = 0;\n                else if (newType === 'boolean') newValue = false;\n                else if (newType === 'object') newValue = {};\n                else if (newType === 'array') newValue = [];\n                else if (newType === 'null') newValue = null;\n\n                this.setValueAt(fullPath, newValue);\n                e.stopPropagation();\n            };\n\n            if (allowedTypes.length > 1 || !fieldSchema) {\n                rowHeader.appendChild(typeBadge);\n            } else {\n                const staticBadge = document.createElement('span');\n                staticBadge.className = `type-badge type-${valueType}`;\n                staticBadge.innerText = typeIcons[valueType] || valueType;\n                rowHeader.appendChild(staticBadge);\n            }\n\n            rowHeader.appendChild(label);\n\n            row.appendChild(rowHeader);\n\n            if (!isComplex) {\n                const inputWrapper = document.createElement('div');\n                inputWrapper.className = 'input-wrapper';\n\n                if (valueType === 'boolean') {\n                    const cb = document.createElement('input');\n                    cb.type = 'checkbox';\n                    cb.checked = value;\n                    cb.disabled = this.isLocked;\n                    cb.onchange = (e) => this.setValueAt(fullPath, e.target.checked);\n                    cb.style.width = \"20px\";\n                    cb.style.borderBottom = \"none\";\n                    inputWrapper.appendChild(cb);\n                } else if (fieldSchema && fieldSchema.enum) {\n                    const sel = document.createElement('select');\n                    sel.disabled = this.isLocked;\n                    fieldSchema.enum.forEach(optVal => {\n                        const opt = document.createElement('option');\n                        opt.value = optVal;\n                        opt.innerText = optVal;\n                        if (optVal === value) opt.selected = true;\n                        sel.appendChild(opt);\n                    });\n                    sel.onchange = (e) => this.setValueAt(fullPath, e.target.value);\n                    inputWrapper.appendChild(sel);\n                } else if (valueType === 'null') {\n                    const nullTxt = document.createElement('span');\n                    nullTxt.innerText = \"null\";\n                    nullTxt.style.color = \"#666\";\n                    nullTxt.style.fontStyle = \"italic\";\n                    inputWrapper.appendChild(nullTxt);\n                } else {\n                    const isLongText = valueType === 'string' && String(value).length > 60;\n\n                    let input;\n                    if (isLongText) {\n                        input = document.createElement('textarea');\n                        input.value = value;\n                        input.rows = 3;\n                        input.disabled = this.isLocked;\n                        input.oninput = (e) => {\n                            e.target.style.height = 'auto';\n                            e.target.style.height = (e.target.scrollHeight) + 'px';\n                        };\n                        input.onchange = (e) => {\n                            this.setValueAt(fullPath, e.target.value);\n                        };\n                    } else {\n                        input = document.createElement('input');\n                        input.type = valueType === 'number' ? 'number' : 'text';\n                        input.value = value;\n                        input.disabled = this.isLocked;\n\n                        input.onchange = (e) => {\n                            const val = valueType === 'number' ? parseFloat(e.target.value) : e.target.value;\n                            this.setValueAt(fullPath, val);\n                        };\n                    }\n\n                    if (input.type === 'text') {\n                        if (validationErrors.has(JSON.stringify(fullPath))) {\n                            input.classList.add('input-error');\n                        }\n                    }\n                    inputWrapper.appendChild(input);\n                }\n                row.appendChild(inputWrapper);\n            } else {\n                const arrow = document.createElement('span');\n                arrow.className = 'arrow';\n                arrow.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"20\" viewBox=\"0 -960 960 960\" width=\"20\" fill=\"currentColor\"><path d=\"M504-480 320-664l56-56 240 240-240 240-56-56 184-184Z\"/></svg>';\n                rowHeader.appendChild(arrow);\n            }\n\n            row.onclick = (e) => {\n                if (e.target.tagName === 'INPUT' ||\n                    e.target.tagName === 'SELECT' ||\n                    e.target.tagName === 'TEXTAREA' ||\n                    e.target.closest('.input-wrapper')) return;\n\n                const newPath = this.selectionPath.slice(0, path.length);\n                newPath.push(Array.isArray(dataContext) ? Number(key) : key);\n\n                this.selectionPath = newPath;\n                this.focusedPath = null;\n                this.render();\n            };\n\n            if (isRequired) {\n                const lockIcon = document.createElement('span');\n                lockIcon.className = 'lock-icon';\n                lockIcon.innerHTML = '<svg fill=\"currentColor\" width=\"15\" height=\"15\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M5 22h14a2 2 0 0 0 2-2v-9a2 2 0 0 0-2-2h-2V7A5 5 0 0 0 7 7v2H5a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2zm7-4.5a2 2 0 1 1 2-2 2 2 0 0 1-2 2zM9 9V7a3 3 0 0 1 6 0v2H9z\"/></svg>';\n                row.appendChild(lockIcon);\n            } else {\n                const deleteBtn = document.createElement('button');\n                deleteBtn.className = 'delete-btn';\n                deleteBtn.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"20\" viewBox=\"0 -960 960 960\" width=\"20\" fill=\"currentColor\"><path d=\"M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z\"/></svg>';\n                deleteBtn.title = 'Delete Item';\n                deleteBtn.disabled = this.isLocked;\n\n                let deleteArmed = false;\n                deleteBtn.onclick = (e) => {\n                    e.stopPropagation();\n                    if (this.isLocked) return;\n\n                    if (deleteArmed) {\n                        this.deleteValueAt(fullPath);\n                    } else {\n                        deleteArmed = true;\n                        deleteBtn.classList.add('confirm');\n                        setTimeout(() => {\n                            deleteArmed = false;\n                            deleteBtn.classList.remove('confirm');\n                        }, 3000);\n                    }\n                };\n                row.appendChild(deleteBtn);\n            }\n\n            col.appendChild(row);\n        });\n\n        if (!this.isLocked && !Array.isArray(dataContext) && typeof dataContext === 'object') {\n            const schema = this.getSchemaForPath(path);\n            if (schema && schema.properties) {\n                const allKeys = Object.keys(schema.properties);\n                const currentKeys = Object.keys(dataContext);\n                const missingKeys = allKeys.filter(k => !currentKeys.includes(k));\n\n                if (missingKeys.length > 0) {\n                    const addPropBtn = document.createElement('button');\n                    addPropBtn.innerText = \"+ Property\";\n                    addPropBtn.className = \"add-property-btn\";\n\n                    addPropBtn.onclick = (e) => {\n                        e.stopPropagation();\n                        const existingDropdown = col.querySelector('.property-dropdown');\n                        if (existingDropdown) {\n                            existingDropdown.remove();\n                            return;\n                        }\n\n                        const dropdown = document.createElement('div');\n                        dropdown.className = 'property-dropdown';\n                        dropdown.style.top = (addPropBtn.offsetTop + addPropBtn.offsetHeight) + 'px';\n                        dropdown.style.left = addPropBtn.offsetLeft + 'px';\n                        dropdown.style.width = addPropBtn.offsetWidth + 'px';\n\n                        missingKeys.forEach(key => {\n                            const item = document.createElement('div');\n                            item.className = 'property-dropdown-item';\n                            item.innerText = key;\n                            item.onclick = () => {\n                                const newPath = [...path, key];\n                                const propSchema = schema.properties[key];\n                                const defaultVal = this.getDefaultValue(propSchema);\n                                this.setValueAt(newPath, defaultVal);\n                            };\n                            dropdown.appendChild(item);\n                        });\n\n                        col.appendChild(dropdown);\n\n                        const closeDropdown = (ev) => {\n                            if (!dropdown.contains(ev.target) && ev.target !== addPropBtn) {\n                                dropdown.remove();\n                                document.removeEventListener('click', closeDropdown);\n                            }\n                        };\n                        setTimeout(() => document.addEventListener('click', closeDropdown), 0);\n                    };\n                    col.appendChild(addPropBtn);\n                }\n            }\n        }\n\n        if (!this.isLocked && Array.isArray(dataContext)) {\n            const addBtn = document.createElement('button');\n            addBtn.innerText = \"+ Add Item\";\n            addBtn.className = \"add-item-btn\";\n            addBtn.onclick = () => {\n                const newPath = [...path, dataContext.length];\n                let defaultValue = \"\";\n                const currentSchema = this.getSchemaForPath(path);\n                if (currentSchema && currentSchema.items) {\n                    defaultValue = this.getDefaultValue(currentSchema.items);\n                }\n                this.setValueAt(newPath, defaultValue);\n            };\n            col.appendChild(addBtn);\n        }\n\n        this.editorContainer.appendChild(col);\n    }\n}\n"],"names":["Object","defineProperty","exports","value","regexpCode","getEsmExportName","getProperty","safeStringify","stringify","addCodeArg","str","_","nil","_Code","Name","IDENTIFIER","_CodeOrName","constructor","s","super","test","Error","this","toString","emptyStr","names","code","_items","length","item","_a","_str","reduce","c","_names","strs","args","i","push","plus","expr","res","mergeExprItems","undefined","splice","optimize","arg","x","Array","isArray","join","a","b","slice","JSON","replace","strConcat","c1","c2","key","rx","ValueScope","ValueScopeName","Scope","varKinds","UsedValueState","code_1","require$$0","ValueError","name","const","let","var","prefixes","parent","_prefixes","_parent","toName","nameOrPrefix","prefix","_newName","_nameGroup","index","_b","has","nameStr","setValue","property","itemIndex","scopePath","line","opts","_values","_scope","scope","_n","lines","get","ref","valueKey","vs","_name","Map","set","getValue","keyOrRef","scopeRefs","scopeName","values","_reduceValues","scopeCode","usedValues","getCode","valueCode","nameSet","forEach","Started","def","es5","Completed","or","not","CodeGen","operators","scope_1","require$$1","code_2","enumerable","scope_2","GT","GTE","LT","LTE","EQ","NEQ","NOT","OR","AND","ADD","Node","optimizeNodes","optimizeNames","_constants","Def","varKind","rhs","render","constants","optimizeExpr","Assign","lhs","sideEffects","addExprNames","AssignOp","op","Label","label","Break","Throw","error","AnyCode","ParentNode","nodes","n","subtractNames","addNames","BlockNode","Root","Else","kind","If","condition","else","cond","e","ns","For","ForLoop","iteration","ForRange","from","to","ForIter","loop","iterable","Func","async","Return","Try","catch","finally","Catch","Finally","replaceName","some","items","par","extScope","_blockStarts","_extScope","_nodes","_root","scopeValue","prefixOrName","Set","add","getScopeValue","_def","constant","_leafNode","_constant","assign","object","keyValues","thenBody","elseBody","_blockNode","endIf","elseIf","_elseNode","_endBlockNode","_for","node","forBody","endFor","forRange","forOf","arr","forIn","obj","ownProperties","tryBody","catchCode","finallyCode","_currNode","block","body","nodeCount","endBlock","len","pop","toClose","func","funcBody","endFunc","N1","N2","andCode","mappend","and","orCode","y","util","checkStrictMode","getErrorPath","Type","setEvaluated","evaluatedPropsToName","mergeEvaluated","eachItem","escapeJsonPointer","escapeFragment","unescapeFragment","schemaRefOrVal","schemaHasRules","checkUnknownRules","alwaysValidSchema","toHash","codegen_1","it","schema","self","strictSchema","rules","RULES","keywords","unescapeJsonPointer","makeMergeEvaluated","mergeNames","mergeToName","mergeValues","resultToName","gen","ps","props","keys","p","hash","all","schemaHasRulesButRef","topSchemaRef","schemaPath","keyword","$data","decodeURIComponent","encodeURIComponent","xs","f","if","Math","max","snippets","msg","mode","logger","warn","useFunc","dataProp","dataPropType","jsPropertySyntax","isNumber","Num","names_1","data","valCxt","instancePath","parentData","parentDataProperty","rootData","dynamicAnchors","vErrors","errors","json","jsonPos","jsonLen","jsonPart","default","extendErrors","reportExtraError","reportError","keyword$DataError","keywordError","util_1","require$$2","addError","errObj","err","returnErrors","errs","validateName","schemaEnv","$async","throw","ValidationError","return","message","schemaType","cxt","errorPaths","overrideAllErrors","compositeRule","allErrors","errorObjectCode","resetErrorsCount","errsCount","schemaValue","errorPath","errSchemaPath","verbose","E","params","propertyName","parentSchema","createErrors","errorInstancePath","errorSchemaPath","messages","extraErrorProps","errorObject","instPath","Str","schPath","getRules","isJSONType","jsonTypes","groups","number","type","string","array","types","integer","boolean","null","post","shouldUseGroup","group","rule","shouldUseRule","definition","implements","kwd","applicability","schemaHasRulesForType","dataType","reportTypeError","checkDataTypes","checkDataType","coerceAndCheckDataType","getJSONTypes","getSchemaTypes","DataType","rules_1","applicability_1","errors_1","require$$3","require$$4","ts","every","includes","nullable","coerceTo","coerceTypes","filter","t","COERCIBLE","coerceToTypes","checkTypes","wrongType","strictNumbers","Wrong","coerced","coerceSpecificType","assignParentData","coerceData","strictNums","correct","Correct","numCond","_cond","dataTypes","notObj","typeError","schemaCode","getTypeErrorContext","validateUnion","validateArray","usePattern","callValidateCode","schemaProperties","allSchemaProperties","noPropertyInData","isOwnProperty","hasPropFunc","reportMissingProp","checkMissingProp","checkReportMissingProp","util_2","prototype","hasOwnProperty","schemaMap","prop","setParams","missingProperty","properties","missing","map","propertyInData","context","passSchema","dataAndSchema","dynamicRef","newRegExp","pattern","u","unicodeRegExp","regExp","valid","validArr","validateItems","break","notValid","subschema","sch","unevaluated","schValid","_sch","schCxt","schemaProp","mergeValidEvaluated","result","reset","validateKeywordUsage","funcKeywordCode","macroKeywordCode","modifyData","useKeyword","macroSchema","macro","call","schemaRef","validateSchema","pass","checkAsyncKeyword","validate","compile","validateRef","assignValid","_await","passCxt","passContext","modifying","reportErrs","block$data","ruleErrs","try","validateAsync","validateErrs","validateSync","addErrs","ok","validSchemaType","allowUndefined","st","deps","dependencies","errorsText","fastDeepEqual","equal","RegExp","source","flags","valueOf","traverse","jsonSchemaTraverseModule","cb","_traverse","pre","jsonPtr","rootSchema","parentJsonPtr","parentKeyword","keyIndex","arrayKeywords","propsKeywords","escapeJsonPtr","allKeys","skipKeywords","additionalItems","contains","additionalProperties","propertyNames","then","allOf","anyOf","oneOf","$defs","definitions","patternProperties","enum","required","maximum","minimum","exclusiveMaximum","exclusiveMinimum","multipleOf","maxLength","minLength","format","maxItems","minItems","uniqueItems","maxProperties","minProperties","resolve","getSchemaRefs","resolveUrl","normalizeId","_getFullPath","getFullPath","inlineRef","SIMPLE_INLINED","limit","hasRef","countKeys","REF_KEYWORDS","count","Infinity","resolver","id","normalize","parse","serialize","split","TRAILING_SLASH_HASH","baseId","ANCHOR","schemaId","uriResolver","schId","baseIds","pathPrefix","localRefs","schemaRefs","fullPath","innerBaseId","addRef","_resolve","ambiguos","schOrRef","refs","checkAmbiguosRef","addAnchor","anchor","$anchor","$dynamicAnchor","sch1","sch2","getData","KeywordCxt","validateFunctionCode","boolSchema_1","boolSchema","boolOrEmptySchema","topBoolOrEmptySchema","boolError","falseSchemaError","dataType_1","dataType_2","defaults_1","defaults","assignDefaults","assignDefault","defaultValue","childData","useDefaults","ty","keyword_1","subschema_1","extendSubschemaMode","extendSubschemaData","getSubschema","dpType","dataPathArr","dataContextProps","_nextData","dataLevel","definedProperties","dataNames","jtdDiscriminator","jtdMetadata","require$$5","require$$6","require$$7","resolve_1","require$$8","require$$9","require$$10","validateFunction","funcSourceUrl","destructureValCxtES5","destructureValCxt","process","subschemaCode","isSchemaObj","checkKeywords","schemaCxtHasRules","$comment","commentKeyword","updateContext","checkAsyncSchema","typeAndKeywords","subSchemaObjCode","$ref","ignoreKeywordsWithRef","checkRefsAndKeywords","jtd","schemaKeywords","rootName","root","typeErrors","groupKeywords","iterateKeywords","meta","strictTypes","includesType","strictTypesError","withTypes","narrowSchemaTypes","checkContextTypes","allowUnionTypes","checkMultipleTypes","hasApplicableType","checkKeywordTypes","checkStrictTypes","keywordCode","schTs","kwdT","checkNoDefault","evaluated","resetEvaluated","assignEvaluated","returnResults","topSchemaObjCode","trackErrors","successAction","failAction","failResult","fail","fail$data","invalid$data","append","errorParams","_error","$dataError","codeBlock","$dataValid","check$data","wrong$DataType","validateSchemaRef","invalid$DataSchema","appl","nextContext","schemaCxt","ruleType","JSON_POINTER","RELATIVE_JSON_POINTER","jsonPointer","matches","exec","up","errorMsg","segments","segment","pointerType","validation_error","ajv","validation","ref_error","MissingRefError","missingRef","missingSchema","resolveSchema","getCompilingSchema","resolveRef","SchemaEnv","validation_error_1","validate_1","env","compileSchema","rootId","_ValidationError","sourceCode","_compilations","validateCode","Function","makeValidate","scopeValues","dynamicProps","dynamicItems","delete","inlineOrCompile","inlineRefs","schEnv","sameSchemaEnv","s1","s2","schemas","refPath","getJsonPointer","schOrFunc","PREVENT_SCOPE_CHANGE","parsedRef","fragment","part","partSchema","isUUID","bind","isIPv4","stringArrayToHexStripped","input","acc","charCodeAt","nonSimpleDomain","consumeIsZone","buffer","consumeHextets","address","output","hex","normalizeIPv6","host","token","ind","findToken","isIPV6","ipv6","tokenCount","zone","endipv6Encountered","endIpv6","consume","cursor","getIPV6","newHost","escapedHost","utils","recomposeAuthority","component","uriTokens","userinfo","unescape","ipV6res","port","String","normalizeComponentEncoding","esc","escape","scheme","path","query","removeDotSegments","nextSlash","indexOf","SCHEMES","getSchemeHandler","URN_REG","supportedSchemeNames","wsIsSecure","wsComponent","secure","httpParse","httpSerialize","toLowerCase","http","domainHost","ws","resourceName","https","wss","urn","urnComponent","options","match","nid","nss","schemeHandler","uriComponent","skipEscape","skipNormalize","uuidComponent","uuid","tolerant","setPrototypeOf","schemes","isValidSchemeName","resolveComponent","base","relative","skipNormalization","target","lastIndexOf","cmpts","reference","authority","absolutePath","URI_PARSE","uri","parsed","isIP","parseInt","isNaN","ipv6result","unicodeSupport","URL","domainToASCII","encodeURI","fastUri","baseURI","relativeURI","schemelessOptions","resolved","uriA","uriB","fastUriModule","ref_error_1","compile_1","codegen_2","$dataRefSchema","uri_1","defaultRegExp","META_IGNORE_OPTIONS","EXT_SCOPE_NAMES","removedOptions","errorDataPath","jsonPointers","extendRefs","missingRefs","processCode","strictDefaults","strictKeywords","unknownFormats","cache","ajvErrors","deprecatedOptions","unicode","requiredOptions","o","_c","_d","_e","_f","_g","_h","_j","_k","_l","_m","_o","_p","_q","_r","_s","_t","_u","_v","_w","_x","_y","_z","_0","strict","_optz","strictTuples","strictRequired","loopRequired","loopEnum","addUsedSchema","validateFormats","int32range","Ajv","formats","_loading","_cache","noLogs","console","log","getLogger","formatOpt","checkOptions","_metaOpts","getMetaSchemaOptions","addInitialFormats","_addVocabularies","_addDefaultMetaSchema","addInitialKeywords","addMetaSchema","addInitialSchemas","addKeyword","_dataRefSchema","$id","defaultMeta","schemaKeyRef","v","getSchema","_meta","_addSchema","_compileSchemaEnv","compileAsync","loadSchema","runCompileAsync","_schema","loadMetaSchema","$schema","_compileAsync","checkLoaded","loadMissingSchema","_loadSchema","addSchema","_validateSchema","_checkUnique","throwOrLogError","keyRef","getSchEnv","removeSchema","_removeAllSchemas","clear","cacheKey","addVocabulary","kwdOrDef","checkKeyword","addRule","keywordMetaschema","k","getKeyword","removeKeyword","findIndex","addFormat","separator","dataVar","text","$dataMetaSchema","metaSchema","keywordsJsonPointers","seg","schemaOrData","regex","startsWith","_compileMetaSchema","currentOpts","checkOpts","opt","optsSchemas","defs","metaOpts","KEYWORD_NAME","ruleGroup","find","before","addBeforeRule","_rule","$dataRef","core_1","id_1","ref_1","callRef","getValidate","callRootRef","schOrEnv","callValidate","schName","inlineRefSchema","addErrorsFrom","addEvaluatedFrom","schEvaluated","callAsyncRef","core","limitLength","ucs2length_1","ucs2length","pos","comp","useLoop","loopAllRequired","allErrorsMode","loopUntilMissing","exitOnErrorMode","requiredKey","equal_1","j","itemTypes","loopN","indices","for","loopN2","eql","outer","_enum","getEql","vSchema","equalCode","validation_1","limitNumber_1","limitNumber","ops","KWDs","okStr","multipleOf_1","prec","multipleOfPrecision","invalid","limitLength_1","pattern_1","limitProperties_1","limitProperties","required_1","limitItems_1","limitItems","uniqueItems_1","const_1","_const","enum_1","validateAdditionalItems","validateTuple","extraItems","schArr","l","fullTuple","checkStrictTuple","min","minContains","maxContains","next","validateItemsWithCount","checkLimits","_valid","validateSchemaDeps","validatePropertyDeps","depsCount","property_ies","propDeps","schDeps","propertyDeps","schemaDeps","splitDependencies","hasProperty","depProp","additionalProperty","removeAdditional","patProps","deleteAdditional","additionalPropertyCode","applyAdditionalSchema","definedProp","propsSchema","isAdditional","applicator","additionalItems_1","prefixItems_1","prefixItems","items_1","items2020_1","items2020","contains_1","dependencies_1","propertyNames_1","additionalProperties_1","properties_1","allProps","hasDefault","applyPropertySchema","patternProperties_1","patterns","alwaysValidPatterns","checkProperties","allowMatchingProperties","checkMatchingProperties","pat","validateProperties","alwaysValid","validatePatternProperties","not_1","anyOf_1","require$$11","oneOf_1","passing","discriminator","require$$12","allOf_1","require$$13","if_1","_if","ifClause","hasThen","hasSchema","hasElse","validateIf","validateClause","require$$14","thenElse_1","thenElse","require$$15","draft2020","fmts","fDef","fType","callFormat","validData","invalidFmt","validate$DataFormat","formatDef","unknownMsg","unknownFormat","fmtType","fmtRef","fmtDef","fmt","getFormat","validCondition","validateFormat","draft7","applicator_1","format_1","format_2","metadata_1","metadata","contentVocabulary","metadataVocabulary","draft7Vocabularies","types_1","DiscrError","discrError","tagName","Tag","tag","mapping","applyTagSchema","oneOfMapping","topRequired","hasRequired","tagRequired","propSch","addMappings","addMapping","tagValue","getMapping","Mapping","validateMapping","draft7_1","discriminator_1","draft7MetaSchema","META_SUPPORT_DATA","META_SCHEMA_ID","module","formats_1","compare","formatNames","fastFormats","fullFormats","date","compareDate","time","getTime","compareTime","getDateTime","compareDateTime","compareIsoTime","compareIsoDateTime","duration","NOT_URI_FRAGMENT","URI","url","email","hostname","ipv4","Z_ANCHOR","byte","BYTE","lastIndex","int32","Number","isInteger","MAX_INT32","MIN_INT32","int64","float","validateNumber","double","password","binary","DATE","DAYS","year","month","day","isLeapYear","d1","d2","TIME","strictTimeZone","hr","sec","tz","tzSign","tzH","tzM","utcMin","utcHr","t1","Date","t2","a1","a2","DATE_TIME_SEPARATOR","dateTime","dt1","dt2","limit_1","formatLimitDefinition","ajv_1","formatMaximum","formatMinimum","formatExclusiveMaximum","formatExclusiveMinimum","fCxt","compareCode","fullName","fastName","formatsPlugin","addFormats","exportName","list","fs","container","config","document","querySelector","title","ajvInstance","isLocked","showLockBtn","enableJsonEdit","isJsonEditMode","selectionPath","focusedPath","isDark","_createDom","_initTheme","_loadAjv","init","shadowRoot","attachShadow","style","createElement","textContent","appendChild","wrapper","className","header","innerHTML","display","flexDirection","flex","minHeight","overflow","breadcrumbsContainer","editorContainer","outputContainer","themeBtn","lockBtn","copyBtn","jsonEditBtn","onclick","toggleTheme","toggleLock","copyJson","toggleJsonEditMode","_ajv","_validateFn","validateFn","setData","setSchema","lock","classList","preserveScroll","unlock","remove","getErrors","destroy","window","matchMedia","_updateTheme","setAttribute","navigator","clipboard","writeText","alert","textarea","editIcon","newData","saveIcon","getValueAt","setValueAt","lastKey","parentPath","getType","deleteValueAt","getDefaultValue","reqKey","isRequired","pathStr","pathArray","getSchemaForPath","currentSchema","getAvailableTypes","schemaNode","previousScrollLeft","scrollLeft","width","height","border","resize","background","color","fontFamily","outline","focus","renderJsonHtml","renderBreadcrumbs","validationErrors","renderColumn","currentPath","scrollWidth","openChar","closeChar","html","comma","indent","repeat","keyHtml","valueHtml","sep","innerText","el","stopPropagation","originalIcon","setTimeout","dataContext","col","headerText","isArrayItem","parentLastKey","charAt","toUpperCase","replaceAll","valueType","isComplex","fieldSchema","row","errPath","onmouseenter","jsonLine","scrollIntoView","behavior","onmouseleave","rowHeader","allowedTypes","typeBadge","disabled","typeIcons","selected","onchange","newType","newValue","staticBadge","arrow","inputWrapper","checked","borderBottom","sel","optVal","nullTxt","fontStyle","rows","oninput","val","parseFloat","closest","newPath","lockIcon","deleteBtn","deleteArmed","currentKeys","missingKeys","addPropBtn","existingDropdown","dropdown","top","offsetTop","offsetHeight","left","offsetLeft","offsetWidth","propSchema","defaultVal","closeDropdown","ev","removeEventListener","addEventListener","addBtn"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68]}